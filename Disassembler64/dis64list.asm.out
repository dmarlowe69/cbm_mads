DISLIST.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              ;*********************************
00002  0000              ; DISASSEMBLER64
00003  0000              ;*********************************
00005  0000              ;*********************************
00006  0000              .FIL   0:DIS.ASM
00007  0000              ;*********************************
00008  0000              ;
00009  0000              ;        DISASSEMBLER64
00010  0000              ;    SYMBOLIC DISASSEMBLER
00011  0000              ;       BY DENTON MARLOWE
00012  0000              ;
00013  0000              ;  (C)1986 BY DENTON MARLOWE
00014  0000              ;
00015  0000              ;*********************************
00016  0000              *=$0800                ;START OF BASIC
00017  0800              ;*********************************
00018  0800  00                 .BYTE 0         ;START OF BASIC
00019  0801  0D 08              .WORD BASIC     ;NEXT LINE POINTER
00020  0803  0A                 .BYTE $0A,$00   ;LINE NUMBER
00020  0804  00 
00021  0805  9E                 .BYTE $9E       ;SYS COMMAND
00022  0806  28 32              .BYTE '(2063)'  ;ASCII (2063)
00023  080C  00                 .BYTE 0         ;END OF LINE
00024  080D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00024  080E  00 
00025  080F              ;*********************************
00026  080F              ; KERNAL ADDRESS
00027  080F              ;*********************************
00028  080F              VICREG=$D011           ;SCREEN REGISTER
00029  080F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00030  080F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00031  080F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00032  080F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00033  080F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00034  080F              STOP   =$FFE1          ;CHECK FOR STOP
00035  080F              READST=$FFB7           ;READ ST
00036  080F              SETNAM=$FFBD           ;SET FILENAME
00037  080F              SETLFS=$FFBA           ;SET LOGICAL FILE
00038  080F              OPEN   =$FFC0          ;OPEN FILE
00039  080F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00040  080F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00041  080F              WREADY=$E391           ;BASIC RETURN
00042  080F              ZEROUR=$02             ;ZEROPAGE POINTER
00043  080F              MEMSIZ=$37             ;TOP OF FREE RAM+1
00044  080F              ;*********************************
00045  080F              ;        ENTRY POINT
00046  080F              ;*********************************
00047  080F  4C 21 0A           JMP DISASS
00048  0812              ;*********************************
00049  0812              ;       VARIABLES
00050  0812              ;*********************************
00051  0812  31          PASS   .BYTE '1'       ;PASS INDICATOR
00052  0813  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00053  0814  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00054  0815  33          CPASS  .BYTE '3'       ;PRINTING PASS






DISLIST.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00055  0816  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00056  0817              ;*********************************
00057  0817  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00058  0818  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00059  0819  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE
00060  081A  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00061  081B  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00062  081C  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00063  081D  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00064  081E              ;*********************************
00065  081E              ; DISASSEMBLY ADDRESS POINTERS
00066  081E              ;*********************************
00067  081E  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00068  0820  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00069  0822  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00070  0824  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET
00071  0826  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00072  0828  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00073  082A  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00074  082C  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00075  082E              ;*********************************
00076  082E              ; INTERNAL ADDRESS TABLE
00077  082E              ;*********************************
00078  082E  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00079  0830  AA AA       TABINS .WORD $AAAA     ;TABLE START
00080  0832  AA AA       TABINE .WORD $AAAA     ;TABLE END
00081  0834              ;*********************************
00082  0834              ; SORT TABLE POINTERS
00083  0834              ;*********************************
00084  0834  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00085  0836  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00086  0838              ;*********************************
00087  0838              ; SYMBOL TABLE
00088  0838              ;*********************************
00089  0838  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00090  0839  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00091  083B  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00092  083D  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00093  083F              ;*********************************
00094  083F              ; UNDEFINED SYMBOL TABLE
00095  083F              ;*********************************
00096  083F  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00097  0841  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00098  0843  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00099  0845              ;*********************************
00100  0845              ; TEMP WORKING STORAGE
00101  0845              ;*********************************
00102  0845  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00103  0847  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00104  0849  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00105  084B  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00106  084D  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00107  084F              ;*********************************
00108  084F              ; OTHER VARIABLES
00109  084F              ;*********************************






DISLIST.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00110  084F  AA AA       ADRS   .WORD $AAAA
00111  0851  AA          TEMP   .BYTE $AA
00112  0852  AA          SAVA   .BYTE $AA
00113  0853  AA          SAVX   .BYTE $AA
00114  0854  AA          SAVY   .BYTE $AA
00115  0855              ;*********************************
00116  0855              ; PRINTER OUTPUT STORAGE
00117  0855              ;*********************************
00118  0855  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00119  0857  AA          LISTCT .BYTE $AA       ;LINE COUNT
00120  0858  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00121  085A  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00122  085C              ;*********************************
00123  085C              ; INPUT BUFFER
00124  085C              ;*********************************
00125  085C  00          BUF    .BYTE 0,0,0,0,0,0,0,0,0,0
00125  085D  00 
00125  085E  00 
00125  085F  00 
00125  0860  00 
00125  0861  00 
00125  0862  00 
00125  0863  00 
00125  0864  00 
00125  0865  00 
00126  0866  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00126  0867  00 
00126  0868  00 
00126  0869  00 
00126  086A  00 
00126  086B  00 
00126  086C  00 
00126  086D  00 
00126  086E  00 
00126  086F  00 
00127  0870  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00127  0871  00 
00127  0872  00 
00127  0873  00 
00127  0874  00 
00127  0875  00 
00127  0876  00 
00127  0877  00 
00127  0878  00 
00127  0879  00 
00128  087A  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00128  087B  00 
00128  087C  00 
00128  087D  00 
00128  087E  00 
00128  087F  00 
00128  0880  00 
00128  0881  00 
00128  0882  00 
00128  0883  00 






DISLIST.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00129  0884  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00129  0885  00 
00129  0886  00 
00129  0887  00 
00129  0888  00 
00129  0889  00 
00129  088A  00 
00129  088B  00 
00129  088C  00 
00129  088D  00 
00130  088E  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00130  088F  00 
00130  0890  00 
00130  0891  00 
00130  0892  00 
00130  0893  00 
00130  0894  00 
00130  0895  00 
00130  0896  00 
00130  0897  00 
00131  0898  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00131  0899  00 
00131  089A  00 
00131  089B  00 
00131  089C  00 
00131  089D  00 
00131  089E  00 
00131  089F  00 
00131  08A0  00 
00131  08A1  00 
00132  08A2  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00132  08A3  00 
00132  08A4  00 
00132  08A5  00 
00132  08A6  00 
00132  08A7  00 
00132  08A8  00 
00132  08A9  00 
00132  08AA  00 
00132  08AB  00 
00133  08AC  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00133  08AD  00 
00133  08AE  00 
00133  08AF  00 
00133  08B0  00 
00133  08B1  00 
00133  08B2  00 
00133  08B3  00 
00133  08B4  00 
00133  08B5  00 
00134  08B6  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00134  08B7  00 
00134  08B8  00 
00134  08B9  00 
00134  08BA  00 






DISLIST.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00134  08BB  00 
00134  08BC  00 
00134  08BD  00 
00134  08BE  00 
00134  08BF  00 
00135  08C0              ;*********************************
00136  08C0              ; FILE NAME BUFFER
00137  08C0              ;*********************************
00138  08C0  AA AA       LINEFL .WORD $AAAA
00139  08C2  AA          VERSON .BYTE $AA
00140  08C3  AA          NCHARS .BYTE $AA
00141  08C4  30 3A       NBUF   .BYTE '0:'
00142  08C6  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00142  08C7  AA 
00142  08C8  AA 
00142  08C9  AA 
00142  08CA  AA 
00142  08CB  AA 
00142  08CC  AA 
00142  08CD  AA 
00143  08CE  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00143  08CF  AA 
00143  08D0  AA 
00143  08D1  AA 
00143  08D2  AA 
00143  08D3  AA 
00143  08D4  AA 
00143  08D5  AA 
00144  08D6  AA                 .BYTE $AA,$AA,$AA,$AA
00144  08D7  AA 
00144  08D8  AA 
00144  08D9  AA 
00145  08DA              ;*********************************
00146  08DA              ; SYMBOL TABLE BUFFER
00147  08DA              ;*********************************
00148  08DA  AA          SYMBUF .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00148  08DB  AA 
00148  08DC  AA 
00148  08DD  AA 
00148  08DE  AA 
00148  08DF  AA 
00148  08E0  AA 
00148  08E1  AA 
00148  08E2  AA 
00148  08E3  AA 
00149  08E4              ;*********************************
00150  08E4              ; DATA TABLE
00151  08E4              ;*********************************
00152  08E4  AA AA       EAS    .WORD $AAAA
00153  08E6  AA          TEXTER .BYTE $AA
00154  08E7  AA AA       CDATA  .WORD $AAAA
00155  08E9  AA AA       NDATA  .WORD $AAAA
00156  08EB  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00157  08ED  AA AA       DATABS .WORD $AAAA     ;DATA START
00158  08EF  AA AA       DATABE .WORD $AAAA     ;DATA END






DISLIST.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00159  08F1              ;*********************************
00160  08F1              ; DATA TABLE
00161  08F1              ;*********************************
00162  08F1  AA          TDATA  .BYTE $AA
00163  08F2              ;*********************************
00164  08F2              *=*+$0100
00165  09F2              ;*********************************
00166  09F2  0D          MPASS  .BYTE $0D,'PASS',0
00166  09F3  50 41 
00166  09F7  00 
00167  09F8  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00167  09F9  12 
00167  09FA  20 50 
00167  0A01  92 
00167  0A02  0D 
00167  0A03  00 
00168  0A04  45 52       MSGERR .BYTE 'ERRORS = ',0
00168  0A0D  00 
00169  0A0E  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00169  0A20  00 
00170  0A21              ;*********************************
00171  0A21              ; INITIALIZE DISASSEMBLER
00172  0A21              ;*********************************
00173  0A21  A2 FF       DISASS LDX #$FF
00174  0A23  9A                 TXS
00175  0A24  D8                 CLD
00176  0A25  20 6D 0B           JSR DOP         ;GET OPTIONS
00177  0A28  20 77 19           JSR INITIN      ;INIT POINTERS
00178  0A2B  A9 31              LDA #'1'        ;PASS ONE
00179  0A2D  8D 12 08           STA PASS        ;SET PASS INDICATOR
00180  0A30              ;*********************************
00181  0A30              ; DISASSEMBLER LOOP
00182  0A30              ;*********************************
00183  0A30  20 71 18    DISA   JSR INTSA       ;SET SA
00184  0A33  A9 00              LDA #00         ;ZERO BYTE
00185  0A35  8D E7 08           STA CDATA       ;SET TABLE NUMBER
00186  0A38  A9 F2              LDA #<MPASS     ;PASS MSG
00187  0A3A  A0 09              LDY #>MPASS     ;
00188  0A3C  20 52 13           JSR STRPNT      ;PRINT IT
00189  0A3F  AD 12 08           LDA PASS        ;GET PASS
00190  0A42  20 A8 13           JSR PCHAR       ;PRINT NUMBER
00191  0A45  20 16 18           JSR CRLF        ;CR
00192  0A48              ;*********************************
00193  0A48  AD 12 08           LDA PASS        ;GET PASS
00194  0A4B  CD 15 08           CMP CPASS       ;IS IT LAST
00195  0A4E  F0 0E              BEQ DISB        ;IF SO PRINT
00196  0A50  CD 14 08           CMP EPASS       ;IS IT EXTERNAL
00197  0A53  D0 3A              BNE DLOOP       ;IF NOT GO ON
00198  0A55  20 96 19           JSR SAVINT      ;SAVE INTERNAL
00199  0A58  20 3E 22           JSR EQUINT      ;SET EQUATES
00200  0A5B  4C 8F 0A           JMP DLOOP       ;GO ON
00201  0A5E              ;*********************************
00202  0A5E  A9 01       DISB   LDA #$01        ;ONE BYTE
00203  0A60  8D 58 08           STA LINECT      ;SET LINE # TO 1
00204  0A63  8D 55 08           STA PAGECT      ;SET PAGE TO 1






DISLIST.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00205  0A66  A9 00              LDA #$00        ;ZERO BYTE
00206  0A68  8D 59 08           STA LINECT+1    ;SET LINE # TO 1
00207  0A6B  8D 56 08           STA PAGECT+1    ;SET PAGE TO 1
00208  0A6E  8D 57 08           STA LISTCT      ;SET LIST TO 0
00209  0A71  8D 5A 08           STA ERRCT       ;SET ERROR TO 0
00210  0A74  8D 5B 08           STA ERRCT+1     ;SET ERROR TO 0
00211  0A77  8D C0 08           STA LINEFL      ;SET LINE TO 0
00212  0A7A  8D C1 08           STA LINEFL+1    ;SET LINE TO 0
00213  0A7D  AD 1A 08           LDA OUTPUT      ;GET OUTPUT
00214  0A80  8D 19 08           STA DEVICE      ;SET OUTPUT
00215  0A83              ;*********************************
00216  0A83  20 11 14           JSR HEADER      ;PRINT HEADER
00217  0A86  20 96 0D           JSR OFILED      ;OPEN DISK FILE
00218  0A89  20 5E 17           JSR ORGIN       ;PRINT ORGIN LABEL
00219  0A8C  20 49 23           JSR EQUPRT      ;PRINT EQUATE
00220  0A8F              ;********************************
00221  0A8F  20 14 15    DLOOP  JSR DSLINE      ;DIS ONE LINE
00222  0A92  B0 2C              BCS NEXTP       ;IF EA STOP
00223  0A94  20 1C 12           JSR LINECK      ;LINE COUNT
00224  0A97  20 E1 FF           JSR STOP        ;CHECK STOP
00225  0A9A  F0 57              BEQ QUITS       ;IF SO QUIT
00226  0A9C  20 E4 FF           JSR GETIN       ;GET KEY
00227  0A9F  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00228  0AA1  C9 20              CMP #' '          ;IS IT A SPACE
00229  0AA3  D0 EA              BNE DLOOP       ;IF NOT NEXT
00230  0AA5              ;*********************************
00231  0AA5              ; PAUSE LISTING
00232  0AA5              ;********************************
00233  0AA5  AD 19 08           LDA DEVICE
00234  0AA8  48                 PHA
00235  0AA9  A9 03              LDA #$03
00236  0AAB  8D 19 08           STA DEVICE
00237  0AAE  A9 F8              LDA #<PMSG
00238  0AB0  A0 09              LDY #>PMSG
00239  0AB2  20 52 13           JSR STRPNT
00240  0AB5  68                 PLA
00241  0AB6  8D 19 08           STA DEVICE
00242  0AB9  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00243  0ABC  F0 FB              BEQ PAUSE       ;
00244  0ABE  D0 CF              BNE DLOOP       ;NEXT LINE
00245  0AC0              ;********************************
00246  0AC0  EE 12 08    NEXTP  INC PASS        ;INC PASS
00247  0AC3  AD 12 08           LDA PASS        ;GET PASS
00248  0AC6  CD 15 08           CMP CPASS       ;LAST PASS?
00249  0AC9  90 1F              BCC DISFUL      ;IF LESS AGAIN
00250  0ACB  D0 20              BNE DISC        ;FINISH
00251  0ACD  AD 1B 08           LDA WINDOW      ;WINDOW FLAG
00252  0AD0  F0 18              BEQ DISFUL      ;FULL OUTPUT
00253  0AD2              ;*********************************
00254  0AD2              ; WINDOWED OUTPUT
00255  0AD2              ;*********************************
00256  0AD2  AD 2A 08           LDA SAOUT       ;
00257  0AD5  8D 1E 08           STA SA          ;
00258  0AD8  AD 2B 08           LDA SAOUT+1     ;
00259  0ADB  8D 1F 08           STA SA+1        ;






DISLIST.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00260  0ADE  AD 2C 08           LDA EAOUT       ;
00261  0AE1  8D 20 08           STA EA          ;
00262  0AE4  AD 2D 08           LDA EAOUT+1     ;
00263  0AE7  8D 21 08           STA EA+1        ;
00264  0AEA              ;*********************************
00265  0AEA  4C 30 0A    DISFUL JMP DISA        ;LAST PASS
00266  0AED  20 46 18    DISC   JSR INCSL
00267  0AF0  20 74 17           JSR EFILE       ;END FILE MSG
00268  0AF3              ;*********************************
00269  0AF3  AD 19 08    QUITS  LDA DEVICE      ;CHECK DEV
00270  0AF6  29 08              AND #$08        ;DISK FILE?
00271  0AF8  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00272  0AFA  A9 08              LDA #$08        ;DISK
00273  0AFC  20 C3 FF           JSR CLOSE       ;CLOSE IT
00274  0AFF  AD 1A 08           LDA OUTPUT      ;GET OUTPUT
00275  0B02  29 07              AND #07         ;MASK DISK
00276  0B04  8D 1A 08           STA OUTPUT      ;RESET OUTPUT
00277  0B07  8D 19 08           STA DEVICE      ;RESET OUTPUT
00278  0B0A              ;*********************************
00279  0B0A              ; PRINT ERRORS
00280  0B0A              ;*********************************
00281  0B0A  AD 1A 08    QUTERR LDA OUTPUT
00282  0B0D  09 03              ORA #$03
00283  0B0F  8D 1A 08           STA OUTPUT
00284  0B12  8D 19 08           STA DEVICE
00285  0B15  20 95 12           JSR NEWLIN
00286  0B18  20 95 12           JSR NEWLIN
00287  0B1B  A9 04              LDA #<MSGERR
00288  0B1D  A0 0A              LDY #>MSGERR
00289  0B1F  20 52 13           JSR STRPNT
00290  0B22  AE 5A 08           LDX ERRCT
00291  0B25  AD 5B 08           LDA ERRCT+1
00292  0B28  20 6E 13           JSR PRTNUM
00293  0B2B              ;*********************************
00294  0B2B  AD 19 08           LDA DEVICE      ;CHECK DEV
00295  0B2E  29 04              AND #$04        ;PRINTER?
00296  0B30  F0 13              BEQ DONED       ;IF NOT DONE
00297  0B32  A9 04              LDA #$04        ;DEVICE 4
00298  0B34  8D 1A 08           STA OUTPUT      ;SET DEVICE
00299  0B37  8D 19 08           STA DEVICE      ;SET DEVICE
00300  0B3A  20 48 1B           JSR INTPRT      ;PRINT INTABLE
00301  0B3D  A9 07              LDA #$07        ;DEVICE 3 AND 4
00302  0B3F  8D 19 08           STA DEVICE      ;SET DEVICE
00303  0B42  8D 1A 08           STA OUTPUT      ;SET DEVICE
00304  0B45  20 95 12    DONED  JSR NEWLIN      ;NEWLINE
00305  0B48  20 95 12           JSR NEWLIN      ;NEWLINE
00306  0B4B  A9 0E              LDA #<MSGDIS    ;END MSG
00307  0B4D  A0 0A              LDY #>MSGDIS
00308  0B4F  20 52 13           JSR STRPNT      ;PRINT IT
00309  0B52  20 95 12           JSR NEWLIN      ;NEW LINE
00310  0B55  AD 19 08           LDA DEVICE      ;CHECK DEVICE
00311  0B58  29 04              AND #$04        ;PRINTER
00312  0B5A  F0 08              BEQ DONE        ;
00313  0B5C  20 DF 13           JSR FINISH      ;FINISH PAGE
00314  0B5F  A9 04              LDA #$04        ;PRINTER






DISLIST.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00315  0B61  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00316  0B64              ;*********************************
00317  0B64  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00318  0B67  20 9F 14           JSR SCRON       ;TURN SCREEN ON
00319  0B6A  4C 91 E3           JMP WREADY      ;RETURN
00320  0B6D              ;*********************************
00321  0B6D              .FIL   0:OPTION.ASM
00322  0B6D              ;*********************************
00323  0B6D              ; DISASSEMBLER OPTIONS
00324  0B6D              ;*********************************
00325  0B6D  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00326  0B6F  8D 19 08           STA DEVICE      ;CURRENT OUTPUT
00327  0B72  A9 00              LDA #$00        ;NO DEVICES
00328  0B74  8D 1A 08           STA OUTPUT      ;FINAL OUTPUT
00329  0B77  A9 B1              LDA #<MSG       ;START UP MSG
00330  0B79  A0 0F              LDY #>MSG
00331  0B7B  20 52 13           JSR STRPNT      ;PRINT IT
00332  0B7E              ;*********************************
00333  0B7E              ; READ IN DISK FILE ?
00334  0B7E              ;*********************************
00335  0B7E  A9 FE              LDA #<MSF1
00336  0B80  A0 0F              LDY #>MSF1
00337  0B82  20 52 13           JSR STRPNT
00338  0B85  20 B3 12           JSR INSTNG
00339  0B88  D0 03              BNE PFILE0
00340  0B8A  4C C5 0C           JMP STARTS
00341  0B8D  A2 00       PFILE0 LDX #$00
00342  0B8F  BD 4F 10    PFILE1 LDA PROGM,X
00343  0B92  99 5C 08           STA BUF,Y
00344  0B95  C8                 INY
00345  0B96  E8                 INX
00346  0B97  E0 04              CPX #$04
00347  0B99  D0 F4              BNE PFILE1
00348  0B9B  8C 52 08           STY SAVA
00349  0B9E  20 AB 0C           JSR INITD
00350  0BA1  20 85 0C           JSR PRFILE
00351  0BA4              ;*********************************
00352  0BA4              ; READ IN FILE FOR SA AND EA
00353  0BA4              ;*********************************
00354  0BA4  A2 08              LDX #$08        ;FILE #8
00355  0BA6  20 C6 FF           JSR CHKIN       ;INPUT FILE
00356  0BA9  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00357  0BAC  8D 1E 08           STA SA          ;SET START
00358  0BAF  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00359  0BB2  8D 1F 08           STA SA+1        ;SET START
00360  0BB5  20 71 18           JSR INTSA       ;SET END
00361  0BB8              ;*********************************
00362  0BB8  A9 00              LDA #$00        ;ZERO BYTE
00363  0BBA  8D 4F 08           STA ADRS        ;BYTE COUNTER
00364  0BBD  8D 50 08           STA ADRS+1      ;BYTE COUNTER
00365  0BC0  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00366  0BC3  20 B7 FF           JSR READST      ;READ STATUS
00367  0BC6  D0 0D              BNE PROGED      ;IF NOT ZERO END
00368  0BC8  20 46 18           JSR INCSL       ;INC END ADDRESS
00369  0BCB  EE 4F 08           INC ADRS        ;INC BYTE COUNT






DISLIST.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00370  0BCE  D0 03              BNE *+5         ;
00371  0BD0  EE 50 08           INC ADRS+1      ;
00372  0BD3  D0 EB              BNE PROGRD      ;NEXT BYTE
00373  0BD5  AD 22 08    PROGED LDA SELECT      ;
00374  0BD8  8D 20 08           STA EA          ;
00375  0BDB  AD 23 08           LDA SELECT+1    ;
00376  0BDE  8D 21 08           STA EA+1        ;
00377  0BE1              ;*********************************
00378  0BE1  A9 08              LDA #$08        ;FILE #8
00379  0BE3  20 C3 FF           JSR CLOSE       ;CLOSE IT
00380  0BE6  20 CC FF           JSR CLRCHN      ;RESET I/O
00381  0BE9              ;*********************************
00382  0BE9  A9 1A              LDA #<MSF2
00383  0BEB  A0 10              LDY #>MSF2
00384  0BED  20 52 13           JSR STRPNT
00385  0BF0  AD 1E 08           LDA SA
00386  0BF3  8D 45 08           STA WORKED
00387  0BF6  AD 1F 08           LDA SA+1
00388  0BF9  8D 46 08           STA WORKED+1
00389  0BFC  20 E5 17           JSR PWORKD
00390  0BFF  A9 2D              LDA #'-'
00391  0C01  20 A8 13           JSR PCHAR
00392  0C04  20 F3 17           JSR DOLLAR
00393  0C07  20 D9 17           JSR PSELEC
00394  0C0A  20 16 18           JSR CRLF
00395  0C0D              ;*********************************
00396  0C0D              ; CALCULATE BUFFER ADDRESS
00397  0C0D              ;*********************************
00398  0C0D  A5 37              LDA MEMSIZ
00399  0C0F  8D 22 08           STA SELECT
00400  0C12  A5 38              LDA MEMSIZ+1
00401  0C14  8D 23 08           STA SELECT+1
00402  0C17  20 65 18           JSR DECSL
00403  0C1A  38                 SEC
00404  0C1B  AD 22 08           LDA SELECT
00405  0C1E  ED 4F 08           SBC ADRS
00406  0C21  8D 22 08           STA SELECT
00407  0C24  AD 23 08           LDA SELECT+1
00408  0C27  ED 50 08           SBC ADRS+1
00409  0C2A  8D 23 08           STA SELECT+1
00410  0C2D              ;*********************************
00411  0C2D              ; CALCULATE ADDRESS OFFSET
00412  0C2D              ;*********************************
00413  0C2D  38                 SEC
00414  0C2E  AD 22 08           LDA SELECT
00415  0C31  ED 1E 08           SBC SA
00416  0C34  8D 24 08           STA OFFSET
00417  0C37  8D 45 08           STA WORKED
00418  0C3A  AD 23 08           LDA SELECT+1
00419  0C3D  ED 1F 08           SBC SA+1
00420  0C40  8D 25 08           STA OFFSET+1
00421  0C43  8D 46 08           STA WORKED+1
00422  0C46  A9 AA              LDA #<MSD4A
00423  0C48  A0 10              LDY #>MSD4A
00424  0C4A  20 52 13           JSR STRPNT






DISLIST.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00425  0C4D  20 E5 17           JSR PWORKD
00426  0C50  20 16 18           JSR CRLF
00427  0C53              ;*********************************
00428  0C53              ; OPEN FILE AND READ PRG INTO BUF
00429  0C53              ;*********************************
00430  0C53  20 85 0C           JSR PRFILE      ;OPEN FILE
00431  0C56  A2 08              LDX #$08        ;FILE #8
00432  0C58  20 C6 FF           JSR CHKIN       ;INPUT FILE
00433  0C5B  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00434  0C5E  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00435  0C61  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00436  0C64  AE 22 08           LDX SELECT      ;LOW BYTE POINTER
00437  0C67  86 02              STX ZEROUR      ;ZERO PAGE
00438  0C69  AE 23 08           LDX SELECT+1    ;HIH BYTE POINTER
00439  0C6C  86 03              STX ZEROUR+1    ;ZERO PAGE
00440  0C6E  A0 00              LDY #$00        ;OFFSET
00441  0C70  91 02              STA (ZEROUR),Y  ;STORE BYTE
00442  0C72  20 46 18           JSR INCSL       ;INC POINTER
00443  0C75  20 B7 FF           JSR READST      ;READ STATUS
00444  0C78  F0 E7              BEQ PRO2RD      ;NEXT BYTE
00445  0C7A  A9 08              LDA #$08        ;FILE #8
00446  0C7C  20 C3 FF           JSR CLOSE       ;CLOSE IT
00447  0C7F  20 CC FF           JSR CLRCHN      ;RESET I/O
00448  0C82  4C 07 0D           JMP WINDOP      ;WINDOW OPTION
00449  0C85              ;*********************************
00450  0C85              ; OPEN PROGRAM FILE
00451  0C85              ;*********************************
00452  0C85  AD 52 08    PRFILE LDA SAVA
00453  0C88  A2 5C              LDX #<BUF
00454  0C8A  A0 08              LDY #>BUF
00455  0C8C  20 BD FF           JSR SETNAM
00456  0C8F  A9 08              LDA #$08
00457  0C91  A8                 TAY
00458  0C92  AA                 TAX
00459  0C93  20 BA FF           JSR SETLFS
00460  0C96  20 C0 FF           JSR OPEN
00461  0C99  20 5B 12           JSR DISERR
00462  0C9C  90 0C              BCC PROGOK
00463  0C9E  A9 08              LDA #$08
00464  0CA0  20 C3 FF           JSR CLOSE
00465  0CA3  68                 PLA
00466  0CA4  68                 PLA
00467  0CA5  68                 PLA
00468  0CA6  68                 PLA
00469  0CA7  4C 91 E3           JMP WREADY
00470  0CAA              ;*********************************
00471  0CAA  60          PROGOK RTS
00472  0CAB              ;*********************************
00473  0CAB              ; INIT DISK
00474  0CAB              ;*********************************
00475  0CAB  A9 02       INITD  LDA #$02
00476  0CAD  A0 10              LDY #>INIT
00477  0CAF  A2 53              LDX #<INIT
00478  0CB1  20 BD FF           JSR SETNAM
00479  0CB4  A9 0F              LDA #$0F






DISLIST.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00480  0CB6  A2 08              LDX #$08
00481  0CB8  A0 0F              LDY #$0F
00482  0CBA  20 BA FF           JSR SETLFS
00483  0CBD  20 C0 FF           JSR OPEN
00484  0CC0  A9 0F              LDA #$0F
00485  0CC2  4C C3 FF           JMP CLOSE
00486  0CC5              ;*********************************
00487  0CC5              ; GET START ADDRESS
00488  0CC5              ;*********************************
00489  0CC5  A9 6E       STARTS LDA #<MSD1
00490  0CC7  A0 10              LDY #>MSD1
00491  0CC9  20 52 13           JSR STRPNT
00492  0CCC  20 C2 12           JSR GETWRD
00493  0CCF  AD 4F 08           LDA ADRS
00494  0CD2  8D 1E 08           STA SA
00495  0CD5  AD 50 08           LDA ADRS+1
00496  0CD8  8D 1F 08           STA SA+1
00497  0CDB              ;*********************************
00498  0CDB              ; GET END ADDRESS
00499  0CDB              ;*********************************
00500  0CDB  A9 80              LDA #<MSD2
00501  0CDD  A0 10              LDY #>MSD2
00502  0CDF  20 52 13           JSR STRPNT
00503  0CE2  20 C2 12           JSR GETWRD
00504  0CE5  AD 4F 08           LDA ADRS
00505  0CE8  8D 20 08           STA EA
00506  0CEB  AD 50 08           LDA ADRS+1
00507  0CEE  8D 21 08           STA EA+1
00508  0CF1              ;*********************************
00509  0CF1              ; ADDRRESS OFFSET
00510  0CF1              ;*********************************
00511  0CF1  A9 90              LDA #<MSD4
00512  0CF3  A0 10              LDY #>MSD4
00513  0CF5  20 52 13           JSR STRPNT
00514  0CF8  20 C2 12           JSR GETWRD
00515  0CFB  AD 4F 08           LDA ADRS
00516  0CFE  8D 24 08           STA OFFSET
00517  0D01  AD 50 08           LDA ADRS+1
00518  0D04  8D 25 08           STA OFFSET+1
00519  0D07              ;*********************************
00520  0D07              ; OUTPUT WINDOW
00521  0D07              ;*********************************
00522  0D07  A9 BD       WINDOP LDA #<MSD5
00523  0D09  A0 10              LDY #>MSD5
00524  0D0B  20 52 13           JSR STRPNT
00525  0D0E  20 27 13           JSR CRNO
00526  0D11  B0 30              BCS WIND1
00527  0D13  A9 6E              LDA #<MSD1
00528  0D15  A0 10              LDY #>MSD1
00529  0D17  20 52 13           JSR STRPNT
00530  0D1A  20 C2 12           JSR GETWRD
00531  0D1D  AD 4F 08           LDA ADRS
00532  0D20  8D 2A 08           STA SAOUT
00533  0D23  AD 50 08           LDA ADRS+1
00534  0D26  8D 2B 08           STA SAOUT+1






DISLIST.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00535  0D29  A9 80              LDA #<MSD2
00536  0D2B  A0 10              LDY #>MSD2
00537  0D2D  20 52 13           JSR STRPNT
00538  0D30  20 C2 12           JSR GETWRD
00539  0D33  AD 4F 08           LDA ADRS
00540  0D36  8D 2C 08           STA EAOUT
00541  0D39  AD 50 08           LDA ADRS+1
00542  0D3C  8D 2D 08           STA EAOUT+1
00543  0D3F  A9 FF              LDA #$FF
00544  0D41  30 02              BMI WIND2
00545  0D43  A9 00       WIND1  LDA #$00
00546  0D45  8D 1B 08    WIND2  STA WINDOW
00547  0D48              ;*********************************
00548  0D48              ; SETUP GOBAL POINTER
00549  0D48              ;*********************************
00550  0D48  AD 1E 08           LDA SA
00551  0D4B  8D 26 08           STA SAGOL
00552  0D4E  AD 1F 08           LDA SA+1
00553  0D51  8D 27 08           STA SAGOL+1
00554  0D54  AD 20 08           LDA EA
00555  0D57  8D 28 08           STA EAGOL
00556  0D5A  AD 21 08           LDA EA+1
00557  0D5D  8D 29 08           STA EAGOL+1
00558  0D60              ;*********************************
00559  0D60              ; SOURCE FILE OUTPUT?
00560  0D60              ;*********************************
00561  0D60  A9 2E       OUFILE LDA #<MSG1
00562  0D62  A0 10              LDY #>MSG1
00563  0D64  20 52 13           JSR STRPNT
00564  0D67              ;*********************************
00565  0D67  A9 00              LDA #$00
00566  0D69  8D C3 08           STA NCHARS
00567  0D6C  20 B3 12           JSR INSTNG
00568  0D6F  F0 1A              BEQ NOFILE
00569  0D71  A9 30              LDA #'0'
00570  0D73  8D C2 08           STA VERSON
00571  0D76  8C C3 08           STY NCHARS
00572  0D79  A2 00              LDX #$00
00573  0D7B  BD 5C 08    GFILE0 LDA BUF,X
00574  0D7E  9D C4 08           STA NBUF,X
00575  0D81  E8                 INX
00576  0D82  EC C3 08           CPX NCHARS
00577  0D85  D0 F4              BNE GFILE0
00578  0D87              ;*********************************
00579  0D87  A9 08       FILEOK LDA #$08
00580  0D89  D0 02              BNE FILE
00581  0D8B  A9 00       NOFILE LDA #$00
00582  0D8D  0D 1A 08    FILE   ORA OUTPUT
00583  0D90  8D 1A 08           STA OUTPUT
00584  0D93  4C EC 0D           JMP PRTGET
00585  0D96              ;*********************************
00586  0D96              ;     OPEN SOURCE DISK FILE
00587  0D96              ;*********************************
00588  0D96  AC C3 08    OFILED LDY NCHARS
00589  0D99  F0 03              BEQ NOID






DISLIST.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00590  0D9B  20 AB 0C           JSR INITD
00591  0D9E  20 8F 14    NOID   JSR SCROFF
00592  0DA1              ;*********************************
00593  0DA1  AC C3 08    OFILE  LDY NCHARS
00594  0DA4  F0 45              BEQ OFILE4
00595  0DA6  AD C2 08           LDA VERSON
00596  0DA9  C9 30              CMP #'0'
00597  0DAB  F0 07              BEQ OFILE1
00598  0DAD  AD C2 08           LDA VERSON
00599  0DB0  99 C4 08           STA NBUF,Y
00600  0DB3  C8                 INY
00601  0DB4  EE C2 08    OFILE1 INC VERSON
00602  0DB7  A2 00              LDX #$00
00603  0DB9  BD 4B 10    OFILE2 LDA WRITE,X
00604  0DBC  99 C4 08           STA NBUF,Y
00605  0DBF  C8                 INY
00606  0DC0  E8                 INX
00607  0DC1  E0 04              CPX #$04
00608  0DC3  D0 F4              BNE OFILE2
00609  0DC5  98                 TYA
00610  0DC6  A0 08              LDY #>NBUF
00611  0DC8  A2 C4              LDX #<NBUF
00612  0DCA  20 BD FF           JSR SETNAM
00613  0DCD  A9 08              LDA #$08
00614  0DCF  AA                 TAX
00615  0DD0  A8                 TAY
00616  0DD1  20 BA FF           JSR SETLFS
00617  0DD4  20 C0 FF           JSR OPEN
00618  0DD7  20 5B 12           JSR DISERR
00619  0DDA  90 0F              BCC OFILE4
00620  0DDC              ;*********************************
00621  0DDC              ;  CLOSE OUT FILE ON ERROR
00622  0DDC              ;*********************************
00623  0DDC  A9 08       OFILE3 LDA #$08
00624  0DDE  20 C3 FF           JSR CLOSE
00625  0DE1  20 CC FF           JSR CLRCHN
00626  0DE4  68                 PLA
00627  0DE5  68                 PLA
00628  0DE6  68                 PLA
00629  0DE7  68                 PLA
00630  0DE8  4C 91 E3           JMP WREADY
00631  0DEB  60          OFILE4 RTS
00632  0DEC              ;*********************************
00633  0DEC              ; GET PRINTER OPTION
00634  0DEC              ;*********************************
00635  0DEC  A9 55       PRTGET LDA #<MSG2
00636  0DEE  A0 10              LDY #>MSG2
00637  0DF0  20 52 13           JSR STRPNT
00638  0DF3  20 1A 13           JSR CRYS
00639  0DF6  B0 26              BCS NOPRT
00640  0DF8  A9 00              LDA #$00
00641  0DFA  20 BD FF           JSR SETNAM
00642  0DFD  A9 04              LDA #$04
00643  0DFF  A2 04              LDX #$04
00644  0E01  A0 00              LDY #$00






DISLIST.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00645  0E03  20 BA FF           JSR SETLFS
00646  0E06  20 C0 FF           JSR OPEN
00647  0E09  A2 04              LDX #$04
00648  0E0B  20 C9 FF           JSR CHKOUT
00649  0E0E  20 B7 FF           JSR READST
00650  0E11  29 80              AND #$80
00651  0E13  08                 PHP
00652  0E14  20 CC FF           JSR CLRCHN
00653  0E17  28                 PLP
00654  0E18  30 04              BMI NOPRT
00655  0E1A  A9 04              LDA #$04
00656  0E1C  D0 02              BNE PRINT
00657  0E1E  A9 03       NOPRT  LDA #$03
00658  0E20  0D 1A 08    PRINT  ORA OUTPUT
00659  0E23  8D 1A 08           STA OUTPUT
00660  0E26              ;*********************************
00661  0E26              ; GO GET SYMBOLIC OPTION
00662  0E26              ;*********************************
00663  0E26  20 C9 21           JSR SOP
00664  0E29              ;*********************************
00665  0E29              ; GET RELATIVE ADDRESS OPTION
00666  0E29              ;*********************************
00667  0E29  A9 D9              LDA #<MSR1
00668  0E2B  A0 10              LDY #>MSR1
00669  0E2D  20 52 13           JSR STRPNT
00670  0E30  20 1A 13           JSR CRYS
00671  0E33  90 04              BCC DOP2
00672  0E35  A9 01              LDA #$01
00673  0E37  D0 02              BNE DOP3
00674  0E39  A9 00       DOP2   LDA #$00
00675  0E3B  8D 18 08    DOP3   STA ROPT
00676  0E3E              ;*********************************
00677  0E3E              ; DATA TABLE OPTION
00678  0E3E              ;*********************************
00679  0E3E  AD 3D 08    AOP    LDA SYMBOE
00680  0E41  8D EB 08           STA DATABP
00681  0E44  8D ED 08           STA DATABS
00682  0E47  8D EF 08           STA DATABE
00683  0E4A  85 02              STA ZEROUR
00684  0E4C  AD 3E 08           LDA SYMBOE+1
00685  0E4F  8D EC 08           STA DATABP+1
00686  0E52  8D EE 08           STA DATABS+1
00687  0E55  8D F0 08           STA DATABE+1
00688  0E58  85 03              STA ZEROUR+1
00689  0E5A              ;*********************************
00690  0E5A  A9 01              LDA #<MSAOP
00691  0E5C  A0 11              LDY #>MSAOP
00692  0E5E  20 52 13           JSR STRPNT
00693  0E61  20 B3 12           JSR INSTNG
00694  0E64  D0 03              BNE BOP
00695  0E66  4C E9 0E           JMP NOTABS
00696  0E69              ;*********************************
00697  0E69  98          BOP    TYA
00698  0E6A  48                 PHA
00699  0E6B  20 AB 0C           JSR INITD






DISLIST.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00700  0E6E  68                 PLA
00701  0E6F  A8                 TAY
00702  0E70  A2 00              LDX #$00
00703  0E72  BD 32 25    AFILE  LDA NAMS,X
00704  0E75  99 5C 08           STA BUF,Y
00705  0E78  C8                 INY
00706  0E79  E8                 INX
00707  0E7A  E0 04              CPX #$04
00708  0E7C  D0 F4              BNE AFILE
00709  0E7E  98                 TYA
00710  0E7F  A0 08              LDY #>BUF
00711  0E81  A2 5C              LDX #<BUF
00712  0E83  20 BD FF           JSR SETNAM
00713  0E86  A9 03              LDA #$03
00714  0E88  A2 08              LDX #$08
00715  0E8A  A0 03              LDY #$03
00716  0E8C  20 BA FF           JSR SETLFS
00717  0E8F  20 C0 FF           JSR OPEN
00718  0E92  20 5B 12           JSR DISERR
00719  0E95  B0 1B              BCS AGET1
00720  0E97  A2 03              LDX #$03
00721  0E99  20 C6 FF           JSR CHKIN
00722  0E9C              ;*********************************
00723  0E9C              ; READ IN DATA TABLE
00724  0E9C              ;*********************************
00725  0E9C  A0 00              LDY #$00
00726  0E9E  20 CF FF           JSR CHRIN
00727  0EA1  8D E9 08           STA NDATA
00728  0EA4  F0 0C              BEQ AGET1
00729  0EA6  20 CF FF    AGET   JSR CHRIN
00730  0EA9  99 F1 08           STA TDATA,Y
00731  0EAC  C8                 INY
00732  0EAD  20 B7 FF           JSR READST
00733  0EB0  F0 F4              BEQ AGET
00734  0EB2  A9 03       AGET1  LDA #$03
00735  0EB4  20 C3 FF           JSR CLOSE
00736  0EB7  20 CC FF           JSR CLRCHN
00737  0EBA              ;*********************************
00738  0EBA              ; PRINT DATA TABLE
00739  0EBA              ;*********************************
00740  0EBA  AD E9 08    PRTDAS LDA NDATA
00741  0EBD  8D E7 08           STA CDATA
00742  0EC0  A0 00              LDY #$00
00743  0EC2  8C 54 08           STY SAVY
00744  0EC5  20 16 18    PRTNEX JSR CRLF
00745  0EC8  A2 05              LDX #$05
00746  0ECA  8E 53 08           STX SAVX
00747  0ECD  AC 54 08    PRTDAL LDY SAVY
00748  0ED0  B9 F1 08           LDA TDATA,Y
00749  0ED3  20 3C 13           JSR PRBYT
00750  0ED6  20 28 18           JSR SPACE
00751  0ED9  EE 54 08           INC SAVY
00752  0EDC  CE 53 08           DEC SAVX
00753  0EDF  D0 EC              BNE PRTDAL
00754  0EE1  CE E7 08           DEC CDATA






DISLIST.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00755  0EE4  D0 DF              BNE PRTNEX
00756  0EE6              ;*********************************
00757  0EE6  4C 86 0F           JMP XOP0
00758  0EE9              ;*********************************
00759  0EE9              ; READ DATA FOR KEYBOARD
00760  0EE9              ;*********************************
00761  0EE9  A9 20       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00762  0EEB  A0 11              LDY #>MSA1
00763  0EED  20 52 13           JSR STRPNT
00764  0EF0  20 C2 12           JSR GETWRD      ;INPUT HEX BYTE
00765  0EF3  AD 4F 08           LDA ADRS        ;GET BYTE
00766  0EF6  8D E9 08           STA NDATA       ;SET NUM TABLES
00767  0EF9  D0 03              BNE AOPX        ;0 DATA THEN END
00768  0EFB  4C 86 0F           JMP XOP0        ;RETURN
00769  0EFE  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00770  0F00  8D E7 08           STA CDATA       ;FIRST TABLE
00771  0F03              ;*********************************
00772  0F03              ; CALCULATE TABLE OFFSET
00773  0F03              ;*********************************
00774  0F03  AD E7 08    AOP1   LDA CDATA       ;GET TABLE NUMBER
00775  0F06  0A                 ASL A           ;*2
00776  0F07  0A                 ASL A           ;*4
00777  0F08  18                 CLC             ;C=0
00778  0F09  6D E7 08           ADC CDATA       ;*5
00779  0F0C  8D 54 08           STA SAVY        ;STORE AS OFFSET
00780  0F0F              ;*********************************
00781  0F0F  A9 42              LDA #<MSA2
00782  0F11  A0 11              LDY #>MSA2
00783  0F13  20 52 13           JSR STRPNT      ;PRINT MSG
00784  0F16  20 C2 12           JSR GETWRD      ;GET ADDRESS
00785  0F19  AC 54 08           LDY SAVY        ;GET OFFSET
00786  0F1C  AD 4F 08           LDA ADRS
00787  0F1F  99 F1 08           STA TDATA,Y
00788  0F22  C8                 INY
00789  0F23  AD 50 08           LDA ADRS+1
00790  0F26  99 F1 08           STA TDATA,Y
00791  0F29  C8                 INY
00792  0F2A  8C 54 08           STY SAVY
00793  0F2D              ;*********************************
00794  0F2D              ; END OF DATA TABLE
00795  0F2D              ;*********************************
00796  0F2D  A9 5A       AOP2   LDA #<MSA3
00797  0F2F  A0 11              LDY #>MSA3
00798  0F31  20 52 13           JSR STRPNT
00799  0F34  20 C2 12           JSR GETWRD      ;GET ADDRESS
00800  0F37  AC 54 08           LDY SAVY
00801  0F3A  AD 4F 08           LDA ADRS
00802  0F3D  99 F1 08           STA TDATA,Y
00803  0F40  C8                 INY
00804  0F41  AD 50 08           LDA ADRS+1
00805  0F44  99 F1 08           STA TDATA,Y
00806  0F47  C8                 INY
00807  0F48  8C 54 08           STY SAVY
00808  0F4B              ;*********************************
00809  0F4B              ; GET TYPE OF TABLE






DISLIST.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00810  0F4B              ;*********************************
00811  0F4B  A9 70              LDA #<MSG5      ;TABLE TYPE
00812  0F4D  A0 11              LDY #>MSG5
00813  0F4F  20 52 13           JSR STRPNT
00814  0F52  20 E4 FF    AOP3   JSR GETIN
00815  0F55  F0 FB              BEQ AOP3
00816  0F57  C9 30              CMP #'0'
00817  0F59  F0 14              BEQ ASC
00818  0F5B  C9 31              CMP #'1'
00819  0F5D  F0 10              BEQ ASC
00820  0F5F  C9 32              CMP #'2'
00821  0F61  F0 0C              BEQ ASC
00822  0F63  C9 33              CMP #'3'
00823  0F65  F0 08              BEQ ASC
00824  0F67  C9 34              CMP #'4'
00825  0F69  F0 04              BEQ ASC
00826  0F6B  C9 53              CMP #'S'
00827  0F6D  D0 E3              BNE AOP3
00828  0F6F  20 D2 FF    ASC    JSR CHROUT
00829  0F72  AC 54 08           LDY SAVY
00830  0F75  99 F1 08           STA TDATA,Y
00831  0F78              ;*********************************
00832  0F78  EE E7 08           INC CDATA       ;INC TABLE COUNT
00833  0F7B  AD E7 08           LDA CDATA       ;GET TABLE COUNT
00834  0F7E  CD E9 08           CMP NDATA       ;ALL TABLES?
00835  0F81  F0 03              BEQ XOP0        ;IF NOT GET MORE
00836  0F83  4C 03 0F           JMP AOP1        ;IF NOT GET MORE
00837  0F86              ;*********************************
00838  0F86              ; GET LABEL GENERATION OPTION
00839  0F86              ;*********************************
00840  0F86  A9 DC       XOP0   LDA #<MSB4
00841  0F88  A0 11              LDY #>MSB4
00842  0F8A  20 52 13           JSR STRPNT
00843  0F8D  20 1A 13           JSR CRYS
00844  0F90  B0 04              BCS XOP1
00845  0F92  A9 01              LDA #$01
00846  0F94  D0 02              BNE XOP2
00847  0F96  A9 00       XOP1   LDA #$00
00848  0F98  8D 17 08    XOP2   STA XOPT
00849  0F9B              ;*********************************
00850  0F9B              ; OUTPUT FORMAT OPTION
00851  0F9B              ;*********************************
00852  0F9B  A9 FC              LDA #<MSB5
00853  0F9D  A0 11              LDY #>MSB5
00854  0F9F  20 52 13           JSR STRPNT
00855  0FA2  20 1A 13           JSR CRYS
00856  0FA5  B0 04              BCS FOP1
00857  0FA7  A9 00              LDA #$00
00858  0FA9  F0 02              BEQ FOP2
00859  0FAB  A9 FF       FOP1   LDA #$FF
00860  0FAD  8D 1C 08    FOP2   STA FOROPT
00861  0FB0              ;*********************************
00862  0FB0  60                 RTS
00863  0FB1              ;*********************************
00864  0FB1              ;   COMMAND MESSAGES






DISLIST.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00865  0FB1              ;*********************************
00866  0FB1  0D          MSG    .BYTE $0D,$0D
00866  0FB2  0D 
00867  0FB3  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
00868  0FCC  20 56       .BYTE  ' V080282'
00869  0FD4  0D          .BYTE  $0D
00870  0FD5  28 43       .BYTE  '(C) 1982 BY COMMODORE '
00871  0FEB  42 55       .BYTE  'BUSINESS MACHINES'
00872  0FFC  0D          .BYTE  $0D
00873  0FFD  00          .BYTE  0
00874  0FFE              ;*********************************
00875  0FFE  0D          MSF1   .BYTE $0D
00876  0FFF  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
00877  1019  00          .BYTE  0
00878  101A  0D          MSF2   .BYTE $0D
00879  101B  50 52       .BYTE  'PROGRAM ADDRESS: $'
00880  102D  00          .BYTE  0
00881  102E              ;*********************************
00882  102E  0D          MSG1   .BYTE $0D
00883  102F  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
00884  104A  00          .BYTE  0
00885  104B              ;*********************************
00886  104B  2C 53       WRITE  .BYTE ',S,W'
00887  104F  2C 50       PROGM  .BYTE ',P,R'
00888  1053  49 30       INIT   .BYTE 'I0'
00889  1055              ;*********************************
00890  1055  0D          MSG2   .BYTE $0D
00891  1056  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
00892  106D  00          .BYTE  0
00893  106E              ;*********************************
00894  106E  0D          MSD1   .BYTE $0D
00895  106F  53 54       .BYTE  'START ADDRESS :$'
00896  107F  00          .BYTE  0
00897  1080              ;*********************************
00898  1080  0D          MSD2   .BYTE $0D
00899  1081  45 4E       .BYTE  'END ADDRESS :$'
00900  108F  00          .BYTE  0
00901  1090              ;*********************************
00902  1090  0D          MSD4   .BYTE $0D
00903  1091  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
00904  10A9  00          .BYTE  0
00905  10AA              ;*********************************
00906  10AA  0D          MSD4A  .BYTE $0D
00907  10AB  41 44       .BYTE  'ADDRESS OFFSET :$'
00908  10BC  00          .BYTE  0
00909  10BD              ;*********************************
00910  10BD  0D          MSD5   .BYTE $0D
00911  10BE  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
00912  10D8  00          .BYTE  0
00913  10D9              ;*********************************
00914  10D9  0D          MSR1   .BYTE $0D
00915  10DA  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
00916  10F3  28 59       .BYTE  '(Y/CR OR N)? '
00917  1100  00          .BYTE  0
00918  1101              ;*********************************






DISLIST.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00919  1101  0D          MSAOP  .BYTE $0D
00920  1102  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
00921  111F  00          .BYTE  0
00922  1120  0D          MSA1   .BYTE $0D
00923  1121  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
00924  1141  00          .BYTE  0
00925  1142  0D          MSA2   .BYTE $0D
00926  1143  54 41       .BYTE  'TABLE START ADDRESS :$'
00927  1159  00          .BYTE  0
00928  115A  0D          MSA3   .BYTE $0D
00929  115B  54 41       .BYTE  'TABLE END ADDRESS :$'
00930  116F  00          .BYTE  0
00931  1170  0D          MSG5   .BYTE $0D,$0D
00931  1171  0D 
00932  1172  44 49              .BYTE 'DISASSEMBLY OPTIONS'
00933  1185  0D                 .BYTE $0D,$0D
00933  1186  0D 
00934  1187  30 20              .BYTE '0 ASCII',$0D
00934  118E  0D 
00935  118F  31 20              .BYTE '1 BYTE',$0D
00935  1195  0D 
00936  1196  32 20              .BYTE '2 WORD',$0D
00936  119C  0D 
00937  119D  33 20              .BYTE '3 DBYTE',$0D
00937  11A4  0D 
00938  11A5  34 20              .BYTE '4 WORD-1',$0D
00938  11AD  0D 
00939  11AE  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
00939  11C2  0D 
00940  11C3  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
00941  11DB  00                 .BYTE 0
00942  11DC              ;*********************************
00943  11DC  0D          MSB4   .BYTE $0D
00944  11DD  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
00945  11FB  00          .BYTE  0
00946  11FC              ;*********************************
00947  11FC  0D          MSB5   .BYTE $0D
00948  11FD  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
00949  121B  00          .BYTE  0
00950  121C              ;*********************************
00951  121C              .FIL   0:UTIL.ASM
00952  121C              ;*********************************
00953  121C              ;      *** UTILITIES ***
00954  121C              ;*********************************
00955  121C              ; CHECK LINE COUNT FOR OUTPUT FILE
00956  121C              ;*********************************
00957  121C  AD 12 08    LINECK LDA PASS
00958  121F  CD 15 08           CMP CPASS
00959  1222  D0 36              BNE LINECO
00960  1224  AD 19 08           LDA DEVICE
00961  1227  29 08              AND #$08
00962  1229  F0 2F              BEQ LINECO
00963  122B              ;*********************************
00964  122B              ; CLOSE SOURCE FILE AND OPEN NEXT
00965  122B              ;*********************************






DISLIST.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00966  122B  38                 SEC
00967  122C  AD C0 08           LDA LINEFL
00968  122F  E9 20              SBC #$20
00969  1231  8D 51 08           STA TEMP
00970  1234  AD C1 08           LDA LINEFL+1
00971  1237  E9 03              SBC #$03
00972  1239  0D 51 08           ORA TEMP
00973  123C  90 1C              BCC LINECO
00974  123E  EA                 NOP
00975  123F  EA                 NOP
00976  1240  EA                 NOP
00977  1241  20 74 17           JSR EFILE
00978  1244  A9 08              LDA #$08
00979  1246  20 C3 FF           JSR CLOSE
00980  1249  20 A1 0D           JSR OFILE
00981  124C  A9 00              LDA #$00
00982  124E  8D C0 08           STA LINEFL
00983  1251  8D C1 08           STA LINEFL+1
00984  1254  20 5E 17           JSR ORGIN
00985  1257  20 84 17           JSR COMENT
00986  125A  60          LINECO RTS
00987  125B              ;*********************************
00988  125B              ;  DISK ERROR CHECK
00989  125B              ;*********************************
00990  125B  A9 08       DISERR LDA #$08        ;DEV #8
00991  125D  85 BA              STA $BA         ;PUT IN DEV TABLE
00992  125F  20 B4 FF           JSR $FFB4       ;SEND TALK
00993  1262  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
00994  1264  85 B9              STA $B9         ;PUT IN TABLE
00995  1266  20 96 FF           JSR $FF96       ;SEND SEC
00996  1269  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
00997  126C  C9 30              CMP #$30        ;IS IT A ZERO
00998  126E  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
00999  1270  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01000  1273  C9 0D              CMP #$0D        ;IS IT CR?
01001  1275  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01002  1277  20 AB FF           JSR $FFAB       ;UNTALK
01003  127A  18                 CLC             ;NO ERROR FLAG
01004  127B  60                 RTS             ;RETURN
01005  127C              ;*********************************
01006  127C              ; PRINT DISK ERROR
01007  127C              ;*********************************
01008  127C  48          DLOOC  PHA             ;STACK BYTE
01009  127D  A9 0D              LDA #$0D        ;ASCII CR
01010  127F  20 D2 FF           JSR CHROUT      ;PRINT IT
01011  1282  68                 PLA             ;GET BYTE
01012  1283  20 D2 FF           JSR CHROUT      ;PRINT IT
01013  1286  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01014  1289  20 D2 FF           JSR CHROUT      ;PRINT IT
01015  128C  C9 0D              CMP #$0D        ;IS IT CR
01016  128E  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01017  1290  20 AB FF           JSR $FFAB       ;UNTALK
01018  1293  38                 SEC             ;SET ERROR FLAG
01019  1294  60                 RTS             ;RETURN
01020  1295              ;*********************************






DISLIST.ASM......PAGE 0022

LINE# LOC   CODE        LINE


01021  1295              ; START NEW LINE AND INC COUNT
01022  1295              ;*********************************
01023  1295  EE 58 08    NEWLIN INC LINECT
01024  1298  D0 03              BNE *+5
01025  129A  EE 59 08           INC LINECT+1
01026  129D  EE C0 08           INC LINEFL
01027  12A0  D0 03              BNE *+5
01028  12A2  EE C1 08           INC LINEFL+1
01029  12A5  20 16 18           JSR CRLF
01030  12A8  AD 19 08           LDA DEVICE
01031  12AB  29 04              AND #$04
01032  12AD  F0 03              BEQ NEWEXT
01033  12AF  20 04 14           JSR NEXLIN
01034  12B2  60          NEWEXT RTS
01035  12B3              ;*********************************
01036  12B3              ; INPUT UTILITIES
01037  12B3              ;*********************************
01038  12B3              ; INPUT STRING ROUTINE
01039  12B3              ;*********************************
01040  12B3  A0 00       INSTNG LDY #$00
01041  12B5  20 CF FF    INSTN1 JSR CHRIN
01042  12B8  99 5C 08           STA BUF,Y
01043  12BB  C8                 INY
01044  12BC  C9 0D              CMP #$0D
01045  12BE  D0 F5              BNE INSTN1
01046  12C0  88                 DEY
01047  12C1  60                 RTS
01048  12C2              ;*********************************
01049  12C2              ; INPUT HEX CHAR STRING
01050  12C2              ;*********************************
01051  12C2  A9 00       GETWRD LDA #$00
01052  12C4  8D 4F 08           STA ADRS
01053  12C7  8D 50 08           STA ADRS+1
01054  12CA  20 B3 12           JSR INSTNG
01055  12CD  88                 DEY
01056  12CE  30 15              BMI INEND
01057  12D0              ;*********************************
01058  12D0              ; PROCESS INPUT
01059  12D0              ;*********************************
01060  12D0  20 E6 12           JSR GETBYT
01061  12D3  AD 51 08           LDA TEMP
01062  12D6  8D 4F 08           STA ADRS
01063  12D9  88                 DEY
01064  12DA  30 09              BMI INEND
01065  12DC  20 E6 12           JSR GETBYT
01066  12DF  AD 51 08           LDA TEMP
01067  12E2  8D 50 08           STA ADRS+1
01068  12E5  60          INEND  RTS
01069  12E6              ;*********************************
01070  12E6              ; COVERT BUFFER INTO BYTES
01071  12E6              ;*********************************
01072  12E6  B9 5C 08    GETBYT LDA BUF,Y
01073  12E9  20 03 13           JSR BINARY
01074  12EC  8D 51 08           STA TEMP
01075  12EF  88                 DEY






DISLIST.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01076  12F0  30 10              BMI INENX
01077  12F2  B9 5C 08           LDA BUF,Y
01078  12F5  20 03 13           JSR BINARY
01079  12F8  0A                 ASL A
01080  12F9  0A                 ASL A
01081  12FA  0A                 ASL A
01082  12FB  0A                 ASL A
01083  12FC  0D 51 08           ORA TEMP
01084  12FF  8D 51 08           STA TEMP
01085  1302  60          INENX  RTS
01086  1303              ;*********************************
01087  1303              ; CONVERT A INTO HEX NIBBLE
01088  1303              ;*********************************
01089  1303  38          BINARY SEC
01090  1304  E9 30              SBC #'0'
01091  1306  90 0E              BCC NOHEX
01092  1308  C9 0A              CMP #$0A
01093  130A  90 0C              BCC YSHEX
01094  130C  E9 07              SBC #$07
01095  130E  C9 10              CMP #$10
01096  1310  B0 04              BCS NOHEX
01097  1312  C9 0A              CMP #$0A
01098  1314  B0 02              BCS YSHEX
01099  1316  38          NOHEX  SEC
01100  1317  60                 RTS
01101  1318  18          YSHEX  CLC
01102  1319  60                 RTS
01103  131A              ;*********************************
01104  131A              ; GET OPTION (CR/Y OR N): Y=C=0
01105  131A              ;*********************************
01106  131A  20 CF FF    CRYS   JSR CHRIN
01107  131D  C9 59              CMP #'Y'
01108  131F  F0 11              BEQ CRYS1
01109  1321  C9 0D              CMP #$0D
01110  1323  F0 0D              BEQ CRYS1
01111  1325  D0 0D              BNE CRNO1
01112  1327              ;*********************************
01113  1327              ; GET OPTION (Y OR CR/N): Y=C=0
01114  1327              ;*********************************
01115  1327  20 CF FF    CRNO   JSR CHRIN
01116  132A  C9 4E              CMP #'N'
01117  132C  F0 06              BEQ CRNO1
01118  132E  C9 0D              CMP #$0D
01119  1330  F0 02              BEQ CRNO1
01120  1332  18          CRYS1  CLC
01121  1333  60                 RTS
01122  1334  38          CRNO1  SEC
01123  1335  60                 RTS
01124  1336              ;*********************************
01125  1336              ; PRINT UTILITES
01126  1336              ;*********************************
01127  1336              ; PRINT WORD MSB IN Y LSB IN A
01128  1336              ;*********************************
01129  1336  48          PRBYTS PHA             ;PUT A ON STACK
01130  1337  98                 TYA             ;PUT HIH BYTE IN A






DISLIST.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01131  1338  20 3C 13           JSR PRBYT       ;PRINT MSB
01132  133B  68                 PLA             ;GET LSB
01133  133C              ;*********************************
01134  133C              ; PRINT BYTE IN A
01135  133C              ;*********************************
01136  133C  48          PRBYT  PHA             ;PUT BYTE ON STACK
01137  133D  4A                 LSR A           ;4 RIGHT SHIFTS
01138  133E  4A                 LSR A           ;TO MOVE HIGH
01139  133F  4A                 LSR A           ;NIBBLE TO LOW
01140  1340  4A                 LSR A           ;NIB WITH HIGH 0'S
01141  1341  A8                 TAY             ;USE AS POINTER
01142  1342  B9 A8 14           LDA HEXA,Y      ;GET ASCII
01143  1345  20 A8 13           JSR PCHAR       ;PRINT
01144  1348  68                 PLA             ;PULL BYTE OUT
01145  1349  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01146  134B  A8                 TAY             ;USE AS POINTER
01147  134C  B9 A8 14           LDA HEXA,Y      ;GET ASCII
01148  134F  4C A8 13           JMP PCHAR       ;PRINT
01149  1352              ;*********************************
01150  1352              ; STRING OUTPUT ROUTINE
01151  1352              ;*********************************
01152  1352  85 02       STRPNT STA ZEROUR      ;POINTER TO
01153  1354  84 03              STY ZEROUR+1    ;MESSAGE
01154  1356  A0 00              LDY #$00        ;OFFSET
01155  1358  B1 02       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01156  135A  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01157  135C  20 A8 13           JSR PCHAR       ;PRINT
01158  135F  C8                 INY             ;INC OFFSET
01159  1360  D0 F6              BNE SOUT        ;LOOP
01160  1362  60          SEXIT  RTS             ;RETURN
01161  1363              ;*********************************
01162  1363              ; PRINT DEC NUMBER (0000)
01163  1363              ;*********************************
01164  1363  86 02       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01165  1365  85 03              STA ZEROUR+1    ;HIGH BYTE NUM
01166  1367  A2 03              LDX #$03        ;4 CHARS
01167  1369  8E 53 08           STX SAVX        ;SAVE COUNT
01168  136C  D0 09              BNE PRTNU1      ;BRANCH
01169  136E              ;*********************************
01170  136E              ; PRINT DEC NUMBER (00000)
01171  136E              ;*********************************
01172  136E  86 02       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01173  1370  85 03              STA ZEROUR+1    ;HIGH BYTE NUM
01174  1372  A2 04              LDX #$04        ;5 CHARS
01175  1374  8E 53 08           STX SAVX        ;SAVE COUNT
01176  1377              ;*********************************
01177  1377              ; PRINT DEC NUMBER AND LEADING 0
01178  1377              ;*********************************
01179  1377  AE 53 08    PRTNU1 LDX SAVX
01180  137A  A0 30              LDY #$30
01181  137C  D0 01              BNE PRTNU3
01182  137E  C8          PRTNU2 INY 
01183  137F  38          PRTNU3 SEC 
01184  1380  A5 02              LDA ZEROUR
01185  1382  FD B8 14           SBC CONST0,X






DISLIST.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01186  1385  85 02              STA ZEROUR
01187  1387  A5 03              LDA ZEROUR+1
01188  1389  FD BD 14           SBC CONST1,X
01189  138C  85 03              STA ZEROUR+1
01190  138E  B0 EE              BCS PRTNU2
01191  1390  A5 02              LDA ZEROUR
01192  1392  7D B8 14           ADC CONST0,X
01193  1395  85 02              STA ZEROUR
01194  1397  A5 03              LDA ZEROUR+1
01195  1399  7D BD 14           ADC CONST1,X
01196  139C  85 03              STA ZEROUR+1
01197  139E  98                 TYA
01198  139F  20 A8 13           JSR PCHAR
01199  13A2  CE 53 08           DEC SAVX
01200  13A5  10 D0              BPL PRTNU1
01201  13A7  60                 RTS
01202  13A8              ;*********************************
01203  13A8              ;  OUTPUT CHAR TO OPEN CHANNEL
01204  13A8              ;*********************************
01205  13A8  48          PCHAR  PHA             ;SAVE CHAR
01206  13A9  AD 19 08           LDA DEVICE      ;GET FILE FLAG
01207  13AC  29 08              AND #$08        ;CHECK FOR DISK
01208  13AE  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01209  13B0  A2 08              LDX #$08        ;DISK FILE #1
01210  13B2  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01211  13B5  68                 PLA             ;GET CHAR
01212  13B6  48                 PHA             ;RESAVE CHAR
01213  13B7  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01214  13BA  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01215  13BD  AD 19 08    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01216  13C0  29 04              AND #$04        ;CHECK FOR PRINTER
01217  13C2  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01218  13C4  A2 04              LDX #$04        ;PRINT FILE #4
01219  13C6  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01220  13C9  68                 PLA             ;GET CHAR
01221  13CA  48                 PHA             ;RESAVE CHAR
01222  13CB  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01223  13CE  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01224  13D1  AD 19 08    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01225  13D4  29 03              AND #$03        ;CHECK FOR SCREEN
01226  13D6  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01227  13D8  68                 PLA             ;GET CHAR
01228  13D9  48                 PHA             ;RESAVE CHAR
01229  13DA  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01230  13DD  68          PEXIT  PLA             ;GET CHAR
01231  13DE  60                 RTS             ;RETURN
01232  13DF              ;*********************************
01233  13DF              ; PRINTER OUTPUT ROUTINES
01234  13DF              ;*********************************
01235  13DF              ; FINISH OUT PAGE WITH CR
01236  13DF              ;*********************************
01237  13DF  20 F2 13    FINISH JSR CRLFPR      ;PRINT CR
01238  13E2  EE 57 08           INC LISTCT      ;INC LINE COUNT
01239  13E5  AD 57 08           LDA LISTCT      ;GET COUNT
01240  13E8  C9 42              CMP #$42        ;66 LINES






DISLIST.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01241  13EA  D0 F3              BNE FINISH      ;IF NOT MORE
01242  13EC  A9 00              LDA #$00        ;ZERO BYTE
01243  13EE  8D 57 08           STA LISTCT      ;RESET COUNT
01244  13F1  60                 RTS             ;RETURN
01245  13F2              ;*********************************
01246  13F2              ; PRINT CR TO PRINTER
01247  13F2              ;*********************************
01248  13F2  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01249  13F4  8D 19 08           STA DEVICE      ;SET PRINTER
01250  13F7  20 16 18           JSR CRLF        ;CR
01251  13FA  AD 1A 08           LDA OUTPUT      ;GET DEVICE
01252  13FD  8D 19 08           STA DEVICE      ;RESET DEVICE
01253  1400  60                 RTS             ;RETURN
01254  1401              ;*********************************
01255  1401              ; START NEWLINE AND CHECK COUNT
01256  1401              ;*********************************
01257  1401  20 F2 13    NEXPTR JSR CRLFPR      ;PRINT CR
01258  1404  EE 57 08    NEXLIN INC LISTCT      ;INC LINE COUNT
01259  1407  AD 57 08           LDA LISTCT      ;GET COUNT
01260  140A  C9 3C              CMP #$3C        ;48 LINES
01261  140C  D0 45              BNE LINEOK      ;IF NOT BRANCH
01262  140E  20 DF 13           JSR FINISH      ;FINISH PAGE
01263  1411              ;*********************************
01264  1411              ; START NEW PAGE WITH HEADING
01265  1411              ;*********************************
01266  1411  AD 19 08    HEADER LDA DEVICE      ;CHECK DEVICE
01267  1414  29 04              AND #$04        ;PRINTER?
01268  1416  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01269  1418  20 01 14           JSR NEXPTR      ;NEXT LINE
01270  141B  A9 04              LDA #$04        ;DEVICE #4
01271  141D  8D 19 08           STA DEVICE      ;SET DEVICE
01272  1420  A9 C2              LDA #<XTITLE    ;HEADER
01273  1422  A0 14              LDY #>XTITLE    ;
01274  1424  20 52 13           JSR STRPNT      ;PRINT IT
01275  1427              ;*********************************
01276  1427              ; PRINT PAGE COUNT AND HEADER
01277  1427              ;*********************************
01278  1427  AE 55 08           LDX PAGECT
01279  142A  AD 56 08           LDA PAGECT+1
01280  142D  20 63 13           JSR PRTPAG
01281  1430  20 01 14           JSR NEXPTR
01282  1433  20 01 14           JSR NEXPTR
01283  1436  A9 04              LDA #$04
01284  1438  8D 19 08           STA DEVICE
01285  143B  A9 DD              LDA #<LTITLE
01286  143D  A0 14              LDY #>LTITLE
01287  143F  20 52 13           JSR STRPNT
01288  1442  20 01 14           JSR NEXPTR
01289  1445              ;*********************************
01290  1445              ; INC PAGE COUNT
01291  1445              ;*********************************
01292  1445  EE 55 08           INC PAGECT
01293  1448  D0 03              BNE PAGER1
01294  144A  EE 56 08           INC PAGECT+1
01295  144D  20 01 14    PAGER1 JSR NEXPTR






DISLIST.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01296  1450  20 01 14           JSR NEXPTR
01297  1453  60          LINEOK RTS 
01298  1454              ;*********************************
01299  1454              ; SYMBOL TABLE ROUTINES
01300  1454              ;*********************************
01301  1454              ; START NEWLINE AND CHECK COUNT
01302  1454              ;*********************************
01303  1454  20 F2 13    NEXPTS JSR CRLFPR      ;PRINT CR
01304  1457  EE 57 08           INC LISTCT      ;INC LINE COUNT
01305  145A  AD 57 08           LDA LISTCT      ;GET COUNT
01306  145D  C9 3C              CMP #$3C        ;48 LINES
01307  145F  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01308  1461  20 DF 13           JSR FINISH      ;FINISH PAGE
01309  1464              ;*********************************
01310  1464              ; START NEW PAGE WITH HEADING
01311  1464              ;*********************************
01312  1464  20 54 14    HEADES JSR NEXPTS      ;NEXT LINE
01313  1467  A9 FA              LDA #<XTITLS    ;HEADER
01314  1469  A0 14              LDY #>XTITLS    ;
01315  146B  20 52 13           JSR STRPNT      ;PRINT IT
01316  146E  20 54 14           JSR NEXPTS
01317  1471  20 54 14           JSR NEXPTS
01318  1474  A9 07              LDA #<LTITLS
01319  1476  A0 15              LDY #>LTITLS
01320  1478  20 52 13           JSR STRPNT
01321  147B  20 54 14           JSR NEXPTS
01322  147E  60          HEADOK RTS
01323  147F              ;*********************************
01324  147F              ; CHECK FOR NEW PAGE FOR SYMBOL
01325  147F              ;*********************************
01326  147F  AD 57 08    HEADSY LDA LISTCT
01327  1482  C9 35              CMP #$35
01328  1484  B0 06              BCS HEADFX
01329  1486  20 54 14           JSR NEXPTS
01330  1489  4C 54 14           JMP NEXPTS
01331  148C  4C DF 13    HEADFX JMP FINISH
01332  148F              ;*********************************
01333  148F              ; SCREEN UTILITES
01334  148F              ;*********************************
01335  148F  AD 19 08    SCROFF LDA DEVICE
01336  1492  29 04              AND #$04
01337  1494  F0 08              BEQ SCRNO1
01338  1496  AD 11 D0           LDA VICREG
01339  1499  29 EF              AND #$EF
01340  149B  8D 11 D0           STA VICREG
01341  149E  60          SCRNO1 RTS
01342  149F              ;*********************************
01343  149F  AD 11 D0    SCRON  LDA VICREG
01344  14A2  09 10              ORA #$10
01345  14A4  8D 11 D0           STA VICREG
01346  14A7  60                 RTS
01347  14A8              ;*********************************
01348  14A8              ; HEX-TO-ASCII TABLE
01349  14A8              ;*********************************
01350  14A8  30 31       HEXA   .BYTE '0123456789ABCDEF'






DISLIST.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01351  14B8              ;*********************************
01352  14B8              ; CONSTANTS FOR PRTNUM ROUTINE
01353  14B8              ;*********************************
01354  14B8  01          CONST0 .BYTE $01,$0A,$64,$E8,$10
01354  14B9  0A 
01354  14BA  64 
01354  14BB  E8 
01354  14BC  10 
01355  14BD  00          CONST1 .BYTE $00,$00,$00,$03,$27
01355  14BE  00 
01355  14BF  00 
01355  14C0  03 
01355  14C1  27 
01356  14C2              ;*********************************
01357  14C2              ; PAGE TITLE
01358  14C2              ;*********************************
01359  14C2  44 49       XTITLE .BYTE 'DISASSEMBLER64.......PAGE '
01360  14DC  00                 .BYTE $00
01361  14DD  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01362  14F9  00                 .BYTE $00
01363  14FA              ;********************************
01364  14FA              ; SYMBOL PAGE TITLE
01365  14FA              ;********************************
01366  14FA  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01366  1506  00 
01367  1507  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01367  1513  00 
01368  1514              ;*********************************
01369  1514              .FIL   0:MODE.ASM
01370  1514              ;*********************************
01371  1514              ; ADDRESSING MODE UTILITIES
01372  1514              ;*********************************
01373  1514              ;      DISASSEMBLE ONE LINE
01374  1514              ;*********************************
01375  1514  20 BE 1B    DSLINE JSR DATAOP      ;CHECK FOR DATA
01376  1517  30 33              BMI BYTT        ;N=1 THEN FOUND
01377  1519              ;*********************************
01378  1519              ; CHECK BIT OPTIONS
01379  1519              ;*********************************
01380  1519  20 4F 18           JSR GETSL       ;GET BYTE
01381  151C  C9 2C              CMP #$2C        ;ABSOLUTE BIT
01382  151E  F0 2F              BEQ BYTBIT      ;
01383  1520  C9 24              CMP #$24        ;ZEROPAGE BIT
01384  1522  F0 2B              BEQ BYTBIT      ;
01385  1524              ;********************************
01386  1524              ; PROCESS LINE OF CODE
01387  1524              ;********************************
01388  1524  AE 12 08    DISL   LDX PASS        ;GET PASS COUNT
01389  1527  EC 15 08           CPX CPASS       ;LAST
01390  152A  F0 06              BEQ DISL1       ;IF LAST BRANCH
01391  152C  20 7A 1E           JSR OPERN1      ;IF LAST BRANCH
01392  152F  4C 4C 15           JMP BYTT        ;NEXT INSTRUCTION
01393  1532              ;********************************
01394  1532              ; PRINT DISASSEMBLY ADDRESS
01395  1532              ;********************************






DISLIST.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01396  1532  20 6D 1E    DISL1  JSR PRTASS      ;PRINT LINE DATA
01397  1535  20 AD 17           JSR PRAD        ;PRINT ADDRESS
01398  1538  20 28 18           JSR SPACE       ;SPACE OVER
01399  153B              ;********************************
01400  153B              ; PRINT INSTRUCTION
01401  153B              ;********************************
01402  153B  20 4F 18           JSR GETSL       ;GET BYTE
01403  153E  48                 PHA             ;STORE
01404  153F  20 50 1E           JSR MNEMON      ;PRINT MNEMONIC
01405  1542  20 28 18           JSR SPACE       ;SPACE OVER
01406  1545  68                 PLA             ;GET BYTE
01407  1546  20 82 1E           JSR OPERND      ;PRINT OPERAND
01408  1549  20 95 12    FINAL  JSR NEWLIN      ;START NEW LINE
01409  154C  4C 2D 18    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01410  154F              ;********************************
01411  154F              ;          BIT TRICK
01412  154F              ;*********************************
01413  154F  AD 12 08    BYTBIT LDA PASS        ;GET PASS COUNT
01414  1552  CD 15 08           CMP CPASS       ;LAST
01415  1555  D0 F5              BNE BYTT        ;IF NOT NEXT BYTE
01416  1557              ;*********************************
01417  1557  20 46 18           JSR INCSL
01418  155A  20 27 1A           JSR INTCHA
01419  155D  08                 PHP
01420  155E  20 65 18           JSR DECSL
01421  1561  28                 PLP
01422  1562  90 2B              BCC BYTEXT
01423  1564              ;*********************************
01424  1564              ;  PRINT LINE DATA FOR .BYTE
01425  1564              ;*********************************
01426  1564  20 84 17           JSR COMENT      ;COMENT LINE
01427  1567  20 1A 19           JSR PRTDAT      ;PRINT LINE DATA
01428  156A  20 A7 18           JSR PRTONE      ;ONE BYTE
01429  156D  20 AD 17           JSR PRAD        ;PRINT ADDRESS
01430  1570  20 28 18           JSR SPACE       ;SPACE OVER
01431  1573  A9 7E              LDA #<MSGBIT    ;BIT STRING
01432  1575  A0 18              LDY #>MSGBIT    ;
01433  1577  20 52 13           JSR STRPNT      ;PRINT IT
01434  157A  20 4F 18           JSR GETSL       ;GET BYTE
01435  157D  20 3C 13           JSR PRBYT       ;PRINT BYTE
01436  1580  20 95 12           JSR NEWLIN      ;PRINT BYTE
01437  1583  20 46 18           JSR INCSL       ;INC SELECT
01438  1586  20 8A 17           JSR COMET       ;COMENT LINE
01439  1589  20 65 18           JSR DECSL       ;REASET SELECT
01440  158C  4C 49 15           JMP FINAL       ;CR AND NEXT BYTE
01441  158F              ;*********************************
01442  158F  4C 32 15    BYTEXT JMP DISL1
01443  1592              ;*********************************
01444  1592              ; ADDRESSING MODE UTILITIES
01445  1592              ;*********************************
01446  1592              ;      ONE-BYTE OPERAND
01447  1592              ;********************************
01448  1592  20 46 18    ONEBYT JSR INCSL       ;INC TO BYTE
01449  1595  20 4F 18           JSR GETSL       ;GET BYTE
01450  1598  8D 45 08           STA WORKED      ;STORE OPERAND






DISLIST.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01451  159B  A9 00              LDA #$00        ;ZERO BYTE
01452  159D  8D 46 08           STA WORKED+1    ;ZERO HIGH BYTE
01453  15A0  AD 12 08           LDA PASS        ;GET PASS COUNT
01454  15A3  CD 13 08           CMP IPASS       ;INTERNAL
01455  15A6  F0 53              BEQ OPCPUT      ;TABLE OPERAND
01456  15A8  CD 14 08           CMP EPASS       ;EXTERNAL
01457  15AB  F0 51              BEQ OPCSYM      ;EXTERNAL EQUATE
01458  15AD              ;*********************************
01459  15AD              ; OUTPUT OPERAND
01460  15AD              ;*********************************
01461  15AD  20 65 22           JSR SYMOP       ;CHECK FOR SYMBOL
01462  15B0  B0 4F              BCS TWOB        ;SYMBOL FOUND
01463  15B2  20 51 19           JSR RANGE       ;IS IT INTERNAL
01464  15B5  90 06              BCC ONEBY       ;GENERATE LABEL
01465  15B7  20 F3 17           JSR DOLLAR      ;EXTERNAL
01466  15BA  4C C0 15           JMP ONEBX       ;PRINT ADDRESS
01467  15BD  20 A3 17    ONEBY  JSR PRLA        ;PRINT XX
01468  15C0  AD 45 08    ONEBX  LDA WORKED      ;GET OPERAND
01469  15C3  4C 3C 13           JMP PRBYT       ;PRINT BYTE
01470  15C6              ;********************************
01471  15C6              ;      TWO-BYTE OPERAND
01472  15C6              ;********************************
01473  15C6  20 46 18    TWOBYT JSR INCSL       ;INC TO BYTE
01474  15C9  20 4F 18           JSR GETSL       ;GET BYTE
01475  15CC  8D 45 08           STA WORKED      ;STORE LOW BYTE
01476  15CF  20 46 18           JSR INCSL       ;INC TO BYTE
01477  15D2  20 4F 18           JSR GETSL       ;GET BYTE
01478  15D5  8D 46 08           STA WORKED+1    ;STORE HIGH BYTE
01479  15D8  AD 12 08           LDA PASS        ;GET PASS COUNT
01480  15DB  CD 13 08           CMP IPASS       ;INTERNAL
01481  15DE  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01482  15E0  CD 14 08           CMP EPASS       ;EXTERNAL
01483  15E3  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01484  15E5              ;********************************
01485  15E5              ;  OUTPUT OPERAND
01486  15E5              ;********************************
01487  15E5  20 65 22           JSR SYMOP       ;CHECK SYMBOL
01488  15E8  B0 17              BCS TWOB        ;C=1 FOUND ONE
01489  15EA  20 51 19           JSR RANGE       ;IS IT INTERNAL
01490  15ED  90 06              BCC TWOBY       ;GERNERATE LABEL
01491  15EF  20 F3 17           JSR DOLLAR      ;EXTERNAL
01492  15F2  4C F8 15           JMP TWOBX       ;
01493  15F5  20 A3 17    TWOBY  JSR PRLA        ;PRINT XX
01494  15F8  4C E5 17    TWOBX  JMP PWORKD      ;PRINT ADDRESS
01495  15FB  4C C8 19    OPCPUT JMP PUTI        ;PUT IN TABLE
01496  15FE  4C 65 22    OPCSYM JMP SYMOP       ;CHECK EXT EQUATE
01497  1601  60          TWOB   RTS             ;RETURN
01498  1602              ;*********************************
01499  1602              ; ILLEGAL MODES, UNUSED OPCODES
01500  1602              ;*********************************
01501  1602  EE 5A 08    ILLEGL INC ERRCT       ;INC ERROR COUNT
01502  1605  D0 03              BNE *+5         ;
01503  1607  EE 5B 08           INC ERRCT+1
01504  160A  A0 1E              LDY #>MBYTE
01505  160C  A9 37              LDA #<MBYTE






DISLIST.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01506  160E  20 52 13           JSR STRPNT
01507  1611  20 F3 17           JSR DOLLAR
01508  1614  20 4F 18           JSR GETSL
01509  1617  20 3C 13           JSR PRBYT
01510  161A  20 28 18           JSR SPACE
01511  161D  A0 18              LDY #>ILLMSG
01512  161F  A9 93              LDA #<ILLMSG
01513  1621  4C 52 13           JMP STRPNT
01514  1624              ;********************************
01515  1624              ;      ACCUMULATOR MODE
01516  1624              ;********************************
01517  1624  A9 41       ACC    LDA #'A'        ;ASCII A
01518  1626  4C A8 13           JMP PCHAR       ;PRINT IT
01519  1629              ;********************************
01520  1629              ;       IMMEDIATE MODE
01521  1629              ;********************************
01522  1629  20 46 18    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01523  162C  AE 12 08           LDX PASS        ;GET PASS
01524  162F  EC 15 08           CPX CPASS       ;LAST PASS
01525  1632  D0 2A              BNE IMEXIT      ;EXIT
01526  1634  A9 23              LDA #'#'        ;ASCII #
01527  1636  20 A8 13           JSR PCHAR       ;PRINT IT
01528  1639  20 F3 17           JSR DOLLAR      ;PRINT $
01529  163C  20 4F 18           JSR GETSL       ;GET BYTE
01530  163F  48                 PHA             ;STACK IT
01531  1640  20 3C 13           JSR PRBYT       ;PRINT IT
01532  1643  68                 PLA             ;POP IT
01533  1644  20 3F 1D           JSR CASCII      ;PRINTABLE ASCII
01534  1647  B0 15              BCS IMEXIT      ;IF NOT EXIT
01535  1649  48                 PHA             ;STACK IT
01536  164A  20 1B 18           JSR SPAC6       ;SPACE OVER
01537  164D  20 EE 17           JSR SEMIC       ;COMMENT
01538  1650  A9 27              LDA #'''        ;QUOTE
01539  1652  20 A8 13           JSR PCHAR       ;PRINT IT
01540  1655  68                 PLA             ;POP IT
01541  1656  20 A8 13           JSR PCHAR       ;PRINT IT
01542  1659  A9 27              LDA #'''        ;QUOTE
01543  165B  20 A8 13           JSR PCHAR       ;PRINT IT
01544  165E  60          IMEXIT RTS             ;EXIT
01545  165F              ;*********************************
01546  165F              ;      ZERO PAGE MODE
01547  165F              ;*********************************
01548  165F  4C 92 15    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01549  1662              ;*********************************
01550  1662              ;      ZERO PAGE,X MODE
01551  1662              ;********************************
01552  1662  20 92 15    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01553  1665  4C 02 18           JMP XINDEX      ;PRINT ,X
01554  1668              ;********************************
01555  1668              ;       ZERO PAGE,Y MODE
01556  1668              ;********************************
01557  1668  20 92 15    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01558  166B  4C 0C 18           JMP YINDEX      ;PRINT ,Y
01559  166E              ;*********************************
01560  166E              ;         ABSOLUTE MODE






DISLIST.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01561  166E              ;*********************************
01562  166E  20 C6 15    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01563  1671  20 65 18           JSR DECSL       ;DEC TO SECOND
01564  1674  20 65 18           JSR DECSL       ;DEC TO OPCODE
01565  1677  20 4F 18           JSR GETSL       ;GET BYTE
01566  167A  48                 PHA
01567  167B  20 46 18           JSR INCSL
01568  167E  20 46 18           JSR INCSL
01569  1681  68                 PLA
01570  1682  C9 4C              CMP #$4C        ;IS IT JMP
01571  1684  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01572  1686  20 95 12           JSR NEWLIN      ;NEXT LINE
01573  1689  20 46 18           JSR INCSL
01574  168C  20 8A 17           JSR COMET       ;COMMENT LINE
01575  168F  20 65 18           JSR DECSL
01576  1692  60          ABSEXT RTS             ;RETURN
01577  1693              ;*********************************
01578  1693              ;       ABSOLUTE,X MODE
01579  1693              ;********************************
01580  1693  20 C6 15    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01581  1696  4C 02 18           JMP XINDEX      ;PRINT ,X
01582  1699              ;********************************
01583  1699              ;       ABSOLUTE,Y MODE
01584  1699              ;********************************
01585  1699  20 C6 15    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01586  169C  4C 0C 18           JMP YINDEX      ;PRINT ,Y
01587  169F              ;********************************
01588  169F              ;       IMPLIED MODE
01589  169F              ;********************************
01590  169F  20 4F 18    IMPLID JSR GETSL       ;GET BYTE
01591  16A2  F0 09              BEQ IMPLI1      ;BRK
01592  16A4  C9 60              CMP #$60        ;CHECK CODE
01593  16A6  F0 05              BEQ IMPLI1      ;RTS
01594  16A8  C9 40              CMP #$40        ;CHECK CODE
01595  16AA  F0 01              BEQ IMPLI1      ;RTI
01596  16AC  60          IMPONE RTS             ;RETURN
01597  16AD  20 95 12    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01598  16B0  20 46 18           JSR INCSL
01599  16B3  20 8A 17           JSR COMET       ;COMMENT LINE
01600  16B6  4C 65 18           JMP DECSL
01601  16B9              ;********************************
01602  16B9              ;       INDIRECT MODE
01603  16B9              ;********************************
01604  16B9  20 F8 17    INDRCT JSR LPAREN      ;PRINT (
01605  16BC  20 C6 15           JSR TWOBYT      ;PRINT TWO BYTE
01606  16BF  20 FD 17           JSR RPAREN      ;PRINT )
01607  16C2  20 95 12           JSR NEWLIN      ;NEXT LINE
01608  16C5  20 46 18           JSR INCSL
01609  16C8  20 8A 17           JSR COMET       ;COMMENT LINE
01610  16CB  4C 65 18           JMP DECSL
01611  16CE              ;********************************
01612  16CE              ;     INDIRECT,X MODE
01613  16CE              ;********************************
01614  16CE  20 F8 17    INDX   JSR LPAREN      ;PRINT (
01615  16D1  20 62 16           JSR ZEROX       ;PRINT $HH,X






DISLIST.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01616  16D4  4C FD 17           JMP RPAREN      ;PRINT )
01617  16D7              ;********************************
01618  16D7              ;     INDIRECT,Y MODE
01619  16D7              ;********************************
01620  16D7  20 F8 17    INDY   JSR LPAREN      ;PRINT (
01621  16DA  20 92 15           JSR ONEBYT      ;PRINT ONE BYTE
01622  16DD  20 FD 17           JSR RPAREN      ;PRINT )
01623  16E0  4C 0C 18           JMP YINDEX      ;PRINT ,Y
01624  16E3              ;*********************************
01625  16E3              ;      RELATIVE MODE
01626  16E3              ;*********************************
01627  16E3  20 46 18    RELATV JSR INCSL       ;INC BYTE POINTER
01628  16E6  AD 12 08           LDA PASS        ;GET PASS COUNT
01629  16E9  CD 14 08           CMP EPASS       ;EXTERNAL
01630  16EC  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01631  16EE  AD 22 08           LDA SELECT      ;GET LOW POINTER
01632  16F1  8D 45 08           STA WORKED      ;STORE TEMP
01633  16F4  AD 23 08           LDA SELECT+1    ;GET HIGH POINTER
01634  16F7  8D 46 08           STA WORKED+1    ;STORE TEMP
01635  16FA  EE 45 08           INC WORKED      ;ADD 1 TO ADDRESS
01636  16FD  D0 03              BNE *+5         ;ZERO MEANS CARRY
01637  16FF  EE 46 08           INC WORKED+1    ;INC HIGH ADDRESS
01638  1702  20 4F 18           JSR GETSL       ;GET BYTE
01639  1705  C9 00              CMP #$00        ;IS IT ZERO
01640  1707  10 03              BPL FORWRD      ;IF SO BRANCH
01641  1709  CE 46 08           DEC WORKED+1    ;DEC HIGH POINTER
01642  170C  18          FORWRD CLC             ;CLEAR CARRY FLAG
01643  170D  6D 45 08           ADC WORKED      ;ADD IN OPERAND
01644  1710  90 03              BCC RELND       ;TO SELECT ADDRES
01645  1712  EE 46 08           INC WORKED+1    ;AND NOW POINTS
01646  1715  8D 45 08    RELND  STA WORKED      ;TARGET ADDRESS
01647  1718  AD 12 08           LDA PASS        ;GET PASS COUNT
01648  171B  CD 13 08           CMP IPASS       ;INTERNAL
01649  171E  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01650  1720  20 65 22           JSR SYMOP       ;CHECK FOR SYMBOL
01651  1723  B0 0D              BCS RELSYM      ;C=1 SYMBOL
01652  1725  AD 18 08           LDA ROPT        ;CHECK OPTION
01653  1728  C9 01              CMP #$01        ;REL TO * ?
01654  172A  F0 07              BEQ RELPC       ;IF SO DO IT
01655  172C  4C E2 17           JMP PWORK       ;PRINT ADDRESS
01656  172F  4C C8 19    RELPUT JMP PUTI        ;PUT IN TABLE
01657  1732  60          RELSYM RTS             ;RETURN
01658  1733              ;*********************************
01659  1733              ; PRINT RELATIVE TO PC
01660  1733              ;*********************************
01661  1733  20 4F 18    RELPC  JSR GETSL       ;GET BRANCH DATA
01662  1736  48                 PHA             ;SAVE ON STACK
01663  1737  30 07              BMI RELNEG      ;BACKWARD ?
01664  1739  A9 86              LDA #<POSREL
01665  173B  A0 18              LDY #>POSREL
01666  173D  4C 44 17           JMP RELPM
01667  1740  A9 8A       RELNEG LDA #<NEGREL
01668  1742  A0 18              LDY #>NEGREL
01669  1744  20 52 13    RELPM  JSR STRPNT
01670  1747  68                 PLA             ;GET BRANCH DATA






DISLIST.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01671  1748  18                 CLC             ;CLEAR CARRY
01672  1749  69 02              ADC #$02        ;ADD 2 FOR BRANCH
01673  174B  10 05              BPL RELP        ;FORWARD ?
01674  174D  18                 CLC             ;CLEAR CARRY
01675  174E  49 FF              EOR #$FF        ;COMPLMENT
01676  1750  69 01              ADC #$01        ;ADD 1 FOR 2'S
01677  1752  20 3C 13    RELP   JSR PRBYT       ;PRINT BRANCH
01678  1755  20 1B 18           JSR SPAC6       ;SPACE
01679  1758  20 EE 17           JSR SEMIC       ;COMMENT CHAR
01680  175B  4C E2 17           JMP PWORK       ;PRINT ADDRESS
01681  175E              ;*********************************
01682  175E              ;  ORGIN LABEL
01683  175E              ;*********************************
01684  175E  20 3E 19    ORGIN  JSR PRTOTH      ;PRINT LINE DATA
01685  1761  A9 2A              LDA #'*'        ;PC
01686  1763  20 A8 13           JSR PCHAR       ;PRINT IT
01687  1766  A9 3D              LDA #'='        ;EQUALS
01688  1768  20 A8 13           JSR PCHAR       ;PRINT IT
01689  176B  20 F3 17           JSR DOLLAR      ;ASCII $
01690  176E  20 D9 17           JSR PSELEC      ;PRINT ADDRESS
01691  1771  4C 95 12           JMP NEWLIN      ;START NEWLINE
01692  1774              ;*********************************
01693  1774              ; END OF FILE LABLE
01694  1774              ;*********************************
01695  1774  20 84 17    EFILE  JSR COMENT      ;COMMENT LINE
01696  1777  20 3E 19           JSR PRTOTH      ;PRINT LINE DATA
01697  177A  A9 8E              LDA #<MSGEND    ;END MESSAGE
01698  177C  A0 18              LDY #>MSGEND
01699  177E  20 52 13           JSR STRPNT      ;PRINT IT
01700  1781  4C 95 12           JMP NEWLIN      ;NEW LINE
01701  1784              ;*********************************
01702  1784              ; PRINT COMMENT LINE
01703  1784              ;*********************************
01704  1784  20 8A 17    COMENT JSR COMET       ;PRINT COMMENT
01705  1787  4C 95 12           JMP NEWLIN      ;NEXT LINE
01706  178A              ;*********************************
01707  178A  20 3E 19    COMET  JSR PRTOTH      ;PRINT LINE DATA
01708  178D  20 EE 17           JSR SEMIC       ;PRINT COMMENT
01709  1790  AD 1C 08           LDA FOROPT
01710  1793  D0 03              BNE CSHORT
01711  1795  A0 20              LDY #$20        ;COUNTER
01712  1797  2C                 .BYTE $2C
01713  1798  A0 10       CSHORT LDY #$10
01714  179A  A9 2A       COMPT  LDA #'*'        ;STAR
01715  179C  20 A8 13           JSR PCHAR       ;PRINT CHAR
01716  179F  88                 DEY             ;DEC COUNTER
01717  17A0  D0 F8              BNE COMPT       ;20 OR 10 STARS
01718  17A2  60                 RTS             ;RETURN
01719  17A3              ;*********************************
01720  17A3              ;     PRINT SELECTED ADDRESS
01721  17A3              ;*********************************
01722  17A3  A9 58       PRLA   LDA #'X'        ;XX LABEL
01723  17A5  20 A8 13           JSR PCHAR       ;
01724  17A8  A9 58              LDA #'X'        ;
01725  17AA  4C A8 13           JMP PCHAR       ;






DISLIST.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01726  17AD              ;*********************************
01727  17AD              ; PRINT CODE ADDRESS
01728  17AD              ;*********************************
01729  17AD  20 51 22    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
01730  17B0  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
01731  17B2  AD 17 08           LDA XOPT        ;CHECK GENERATION
01732  17B5  F0 10              BEQ P1          ;NO LABELS
01733  17B7  20 27 1A           JSR INTCHA      ;IS ADDRESS IN TAB
01734  17BA  B0 0B              BCS P1          ;C=1 YES
01735  17BC  AD 1C 08           LDA FOROPT      ;CHECK FORMAT
01736  17BF  F0 03              BEQ POVER       ;STD FORMAT
01737  17C1  4C 28 18           JMP SPACE       ;ONE SPACE
01738  17C4  4C 1B 18    POVER  JMP SPAC6       ;SPACE OVER
01739  17C7              ;*********************************
01740  17C7              ; PRINT ADDRESS AS LABEL
01741  17C7              ;*********************************
01742  17C7  20 A3 17    P1     JSR PRLA        ;PRINT XX
01743  17CA  20 D9 17           JSR PSELEC      ;PRINT ADDRESS
01744  17CD  EA                 NOP
01745  17CE  EA                 NOP
01746  17CF  EA                 NOP
01747  17D0  60          NPRAD  RTS             ;RETURN
01748  17D1              ;*********************************
01749  17D1  AD 1C 08    NPRAD1 LDA FOROPT
01750  17D4  D0 FA              BNE NPRAD
01751  17D6  4C 02 23           JMP FIXSYM
01752  17D9              ;*********************************
01753  17D9              ; PRINT SELECT ADDRESS
01754  17D9              ;*********************************
01755  17D9  AD 22 08    PSELEC LDA SELECT      ;LOW BYTE
01756  17DC  AC 23 08           LDY SELECT+1    ;HIGH BYTE
01757  17DF  4C 36 13           JMP PRBYTS      ;PRINT THEM
01758  17E2              ;*********************************
01759  17E2              ; PRINT WORKED ADDRESS WITH XX
01760  17E2              ;*********************************
01761  17E2  20 A3 17    PWORK  JSR PRLA        ;PRINT XX
01762  17E5              ;*********************************
01763  17E5              ; PRINT WORKED ADDRESS
01764  17E5              ;*********************************
01765  17E5  AD 45 08    PWORKD LDA WORKED      ;LOW BYTE
01766  17E8  AC 46 08           LDY WORKED+1    ;HIGH BYTE
01767  17EB  4C 36 13           JMP PRBYTS      ;PRINT THEM
01768  17EE              ;********************************
01769  17EE              ; PRINT SEMICOLON FOR COMMENT
01770  17EE              ;********************************
01771  17EE  A9 3B       SEMIC  LDA #';'
01772  17F0  4C A8 13           JMP PCHAR
01773  17F3              ;********************************
01774  17F3              ; PRINT DOLLAR SIGN FOR HEX
01775  17F3              ;********************************
01776  17F3  A9 24       DOLLAR LDA #'$'
01777  17F5  4C A8 13           JMP PCHAR
01778  17F8              ;********************************
01779  17F8              ; PRINT LEFT PARENTTHESES
01780  17F8              ;********************************






DISLIST.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01781  17F8  A9 28       LPAREN LDA #'('
01782  17FA  4C A8 13           JMP PCHAR
01783  17FD              ;********************************
01784  17FD              ; PRINT RIGHT PARENTTHESES
01785  17FD              ;********************************
01786  17FD  A9 29       RPAREN LDA #')'
01787  17FF  4C A8 13           JMP PCHAR
01788  1802              ;********************************
01789  1802              ; PRINT A COMMA AND AN "X"
01790  1802              ;********************************
01791  1802  A9 2C       XINDEX LDA #','
01792  1804  20 A8 13           JSR PCHAR
01793  1807  A9 58              LDA #'X'
01794  1809  4C A8 13           JMP PCHAR
01795  180C              ;********************************
01796  180C              ; PRINT A COMMA AND A "Y"
01797  180C              ;********************************
01798  180C  A9 2C       YINDEX LDA #','
01799  180E  20 A8 13           JSR PCHAR
01800  1811  A9 59              LDA #'Y'
01801  1813  4C A8 13           JMP PCHAR
01802  1816              ;********************************
01803  1816              ; PRINT CARRAIGE RETURN
01804  1816              ;*********************************
01805  1816  A9 0D       CRLF   LDA #$0D        ;ASCII CR
01806  1818  4C A8 13           JMP PCHAR       ;PRINT
01807  181B              ;*********************************
01808  181B              ; PRINT SIX SPACES
01809  181B              ;*********************************
01810  181B  A9 05       SPAC6  LDA #$05
01811  181D  8D 51 08    SPACM  STA TEMP
01812  1820  20 28 18    SPAC   JSR SPACE
01813  1823  CE 51 08           DEC TEMP
01814  1826  D0 F8              BNE SPAC
01815  1828              ;*********************************
01816  1828              ; PRINT SPACE
01817  1828              ;*********************************
01818  1828  A9 20       SPACE  LDA #$20        ;ASCII SPACE
01819  182A  4C A8 13           JMP PCHAR       ;PRINT
01820  182D              ;*********************************
01821  182D              ; SELECT NEXT BYTE
01822  182D              ;*********************************
01823  182D  AD 23 08    NEXTSL LDA SELECT+1
01824  1830  CD 21 08           CMP EA+1
01825  1833  90 0A              BCC SLOK
01826  1835  D0 0D              BNE NOINC
01827  1837  AD 22 08           LDA SELECT
01828  183A  CD 20 08           CMP EA
01829  183D  B0 05              BCS NOINC
01830  183F  20 46 18    SLOK   JSR INCSL
01831  1842  18                 CLC
01832  1843  60                 RTS
01833  1844  38          NOINC  SEC
01834  1845  60                 RTS
01835  1846              ;*********************************






DISLIST.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01836  1846              ; INC SLECTED BYTE
01837  1846              ;*********************************
01838  1846  EE 22 08    INCSL  INC SELECT
01839  1849  D0 03              BNE *+5
01840  184B  EE 23 08           INC SELECT+1
01841  184E  60                 RTS
01842  184F              ;*********************************
01843  184F              ; GET SELECTED BYTE
01844  184F              ;*********************************
01845  184F  18          GETSL  CLC
01846  1850  AD 22 08           LDA SELECT
01847  1853  6D 24 08           ADC OFFSET
01848  1856  85 02              STA ZEROUR
01849  1858  AD 23 08           LDA SELECT+1
01850  185B  6D 25 08           ADC OFFSET+1
01851  185E  85 03              STA ZEROUR+1
01852  1860  A0 00              LDY #$00
01853  1862  B1 02              LDA (ZEROUR),Y
01854  1864  60                 RTS
01855  1865              ;*********************************
01856  1865              ; DEC SLECTED BYTE
01857  1865              ;*********************************
01858  1865  AD 22 08    DECSL  LDA SELECT
01859  1868  D0 03              BNE *+5
01860  186A  CE 23 08           DEC SELECT+1
01861  186D  CE 22 08           DEC SELECT
01862  1870  60                 RTS
01863  1871              ;*********************************
01864  1871              ; INITIALIZE SELECT
01865  1871              ;*********************************
01866  1871  AD 1E 08    INTSA  LDA SA
01867  1874  8D 22 08           STA SELECT
01868  1877  AD 1F 08           LDA SA+1
01869  187A  8D 23 08           STA SELECT+1
01870  187D  60                 RTS
01871  187E              ;*********************************
01872  187E              ; ASCII STRING DATA
01873  187E              ;*********************************
01874  187E  2E 42       MSGBIT .BYTE '.BYTE $',0
01874  1885  00 
01875  1886  2A 2B 24    POSREL .BYTE '*+$',0
01875  1889  00 
01876  188A  2A 2D 24    NEGREL .BYTE '*-$',0
01876  188D  00 
01877  188E  2E 45       MSGEND .BYTE '.END',0
01877  1892  00 
01878  1893  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
01878  18A6  00 
01879  18A7              ;*********************************
01880  18A7              ; PRINT ONE BYTE OPCODE DATA
01881  18A7              ;*********************************
01882  18A7  20 4F 18    PRTONE JSR GETSL       ;GET BYTE
01883  18AA  20 3C 13           JSR PRBYT       ;PRINT BYTE
01884  18AD  AD 1C 08           LDA FOROPT
01885  18B0  F0 03              BEQ PRTON1






DISLIST.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01886  18B2  A9 07              LDA #$07
01887  18B4  2C                 .BYTE $2C
01888  18B5  A9 09       PRTON1 LDA #$09        ;10 SPACES
01889  18B7  20 1D 18           JSR SPACM       ;
01890  18BA  4C 13 19           JMP PRTEST      ;RESET I/O DEVICE
01891  18BD              ;*********************************
01892  18BD              ; PRINT TWO BYTE OPCODE DATA
01893  18BD              ;*********************************
01894  18BD  20 4F 18    PRTTWO JSR GETSL       ;GET BYTE
01895  18C0  20 3C 13           JSR PRBYT       ;PRINT BYTE
01896  18C3  20 28 18           JSR SPACE       ;
01897  18C6  20 46 18           JSR INCSL       ;INC TO OPERAND
01898  18C9  20 4F 18           JSR GETSL       ;GET BYTE
01899  18CC  20 3C 13           JSR PRBYT       ;PRINT IT
01900  18CF  AD 1C 08           LDA FOROPT
01901  18D2  F0 03              BEQ PRTTW1
01902  18D4  A9 04              LDA #$04
01903  18D6  2C                 .BYTE $2C
01904  18D7  A9 06       PRTTW1 LDA #$06        ;7 SPACES
01905  18D9  20 1D 18           JSR SPACM       ;
01906  18DC  20 65 18           JSR DECSL       ;RESET POINTER
01907  18DF  4C 13 19           JMP PRTEST      ;RESET I/O DEVICE
01908  18E2              ;*********************************
01909  18E2              ; PRINT THREE BYTE OPCODE DATA
01910  18E2              ;*********************************
01911  18E2  20 4F 18    PRTTHE JSR GETSL       ;GET BYTE
01912  18E5  20 3C 13           JSR PRBYT       ;PRINT BYTE
01913  18E8  20 28 18           JSR SPACE       ;
01914  18EB  20 46 18           JSR INCSL       ;INC TO OPERAND
01915  18EE  20 4F 18           JSR GETSL       ;GET BYTE
01916  18F1  20 3C 13           JSR PRBYT       ;PRINT IT
01917  18F4  20 28 18           JSR SPACE       ;
01918  18F7  20 46 18           JSR INCSL       ;INC TO LAST BYTE
01919  18FA  20 4F 18           JSR GETSL       ;GET BYTE
01920  18FD  20 3C 13           JSR PRBYT       ;PRINT IT
01921  1900  AD 1C 08           LDA FOROPT
01922  1903  F0 03              BEQ PRTTH1
01923  1905  A9 01              LDA #$01
01924  1907  2C                 .BYTE $2C
01925  1908  A9 03       PRTTH1 LDA #$03        ;4 SPACES
01926  190A  20 1D 18           JSR SPACM       ;
01927  190D  20 65 18           JSR DECSL       ;DEC POINTER
01928  1910  20 65 18           JSR DECSL       ;DEC POINTER
01929  1913              ;*********************************
01930  1913              ; RESET I/O DEVICE (DISK IF USED)
01931  1913              ;*********************************
01932  1913  AD 1A 08    PRTEST LDA OUTPUT      ;GET I/O DEVICE
01933  1916  8D 19 08           STA DEVICE      ;RESET I/O
01934  1919  60                 RTS             ;RETURN
01935  191A              ;*********************************
01936  191A              ; PRINT LINE DATA FOR OPCODE
01937  191A              ;*********************************
01938  191A  AD 19 08    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
01939  191D  29 07              AND #$07        ;MASK DISK
01940  191F  8D 19 08           STA DEVICE      ;RESET






DISLIST.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01941  1922  AD 1C 08           LDA FOROPT      ;CHECK FORMAT
01942  1925  D0 0F              BNE PRTDAF      ;SKIP LINE #
01943  1927  AD 59 08           LDA LINECT+1    ;HIH BYTE LINE
01944  192A  AE 58 08           LDX LINECT      ;LOW BYTE LINE
01945  192D  20 6E 13           JSR PRTNUM      ;PRINT NUMBER
01946  1930  20 28 18           JSR SPACE       ;
01947  1933  20 28 18           JSR SPACE       ;
01948  1936  20 D9 17    PRTDAF JSR PSELEC      ;PRINT ADDRESS
01949  1939  A9 01              LDA #$01        ;2 SPACES
01950  193B  4C 1D 18           JMP SPACM       ;
01951  193E              ;*********************************
01952  193E              ; PRINT LINE DATA FOR OTHER LINES
01953  193E              ;*********************************
01954  193E  20 1A 19    PRTOTH JSR PRTDAT      ;PRINT LINE
01955  1941  AD 1C 08           LDA FOROPT
01956  1944  F0 03              BEQ PRTOT1
01957  1946  A9 09              LDA #$09
01958  1948  2C                 .BYTE $2C
01959  1949  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
01960  194B  20 1D 18           JSR SPACM       ;
01961  194E  4C 13 19           JMP PRTEST      ;RESET I/O
01962  1951              ;********************************
01963  1951              .FIL   0:INTERNAL.ASM
01964  1951              ;*********************************
01965  1951              ; INTERNAL ADDRESS TABLE ROUTINES
01966  1951              ;*********************************
01967  1951              ; CHECK FOR OUT OF RANGE ADDRESS
01968  1951              ;*********************************
01969  1951  AD 46 08    RANGE  LDA WORKED+1    ;GET HIGH
01970  1954  CD 29 08           CMP EAGOL+1     ;COMPARE
01971  1957  90 0A              BCC RANG        ;< CHECK START
01972  1959  D0 1A              BNE ROUT        ;> OUT OF RANGE
01973  195B  AD 45 08           LDA WORKED      ;GET LOW
01974  195E  CD 28 08           CMP EAGOL       ;COMPARE
01975  1961  B0 12              BCS ROUT        ;> OUT OF RANGE
01976  1963              ;*********************************
01977  1963  AD 46 08    RANG   LDA WORKED+1    ;GET HIGH
01978  1966  CD 27 08           CMP SAGOL+1     ;COMPARE
01979  1969  90 0A              BCC ROUT        ;< OUT OF RANGE
01980  196B  AD 45 08           LDA WORKED      ;GET LOW
01981  196E  CD 26 08           CMP SAGOL       ;COMPARE
01982  1971  90 02              BCC ROUT        ;< OUT OF RANGE
01983  1973              ;*********************************
01984  1973  18                 CLC             ;C=0 IN RANGE
01985  1974  60                 RTS
01986  1975  38          ROUT   SEC             ;C=1 OUT RANGE
01987  1976  60                 RTS
01988  1977              ;*********************************
01989  1977              ; INITIALIZE INTERNAL TABLE
01990  1977              ;*********************************
01991  1977  AD EF 08    INITIN LDA DATABE
01992  197A  8D 30 08           STA TABINS
01993  197D  8D 32 08           STA TABINE
01994  1980  AD F0 08           LDA DATABE+1
01995  1983  8D 31 08           STA TABINS+1






DISLIST.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01996  1986  8D 33 08           STA TABINE+1
01997  1989              ;*********************************
01998  1989              ; INITIALIZE INTERNAL TABLE POINT
01999  1989              ;*********************************
02000  1989  AD 30 08    INTSET LDA TABINS
02001  198C  8D 2E 08           STA TABINP
02002  198F  AD 31 08           LDA TABINS+1
02003  1992  8D 2F 08           STA TABINP+1
02004  1995  60                 RTS
02005  1996              ;*********************************
02006  1996              ; SAVE INTERNAL TABLE POINTERS
02007  1996              ;*********************************
02008  1996  AD 30 08    SAVINT LDA TABINS
02009  1999  8D 4B 08           STA SAVES
02010  199C  AD 31 08           LDA TABINS+1
02011  199F  8D 4C 08           STA SAVES+1
02012  19A2  AD 32 08           LDA TABINE
02013  19A5  8D 4D 08           STA SAVEE
02014  19A8  AD 33 08           LDA TABINE+1
02015  19AB  8D 4E 08           STA SAVEE+1
02016  19AE  60                 RTS
02017  19AF              ;*********************************
02018  19AF              ; RESTORE INTERNAL TABLE POINTERS
02019  19AF              ;*********************************
02020  19AF  AD 4B 08    RESINT LDA SAVES
02021  19B2  8D 30 08           STA TABINS
02022  19B5  AD 4C 08           LDA SAVES+1
02023  19B8  8D 31 08           STA TABINS+1
02024  19BB  AD 4D 08           LDA SAVEE
02025  19BE  8D 32 08           STA TABINE
02026  19C1  AD 4E 08           LDA SAVEE+1
02027  19C4  8D 33 08           STA TABINE+1
02028  19C7  60                 RTS
02029  19C8              ;*********************************
02030  19C8              ; PUT ADDRESS IN INTERNAL TABLE
02031  19C8              ;*********************************
02032  19C8  38          PUTI   SEC
02033  19C9  AD 30 08           LDA TABINS
02034  19CC  ED 32 08           SBC TABINE
02035  19CF  8D 51 08           STA TEMP
02036  19D2  AD 31 08           LDA TABINS+1
02037  19D5  ED 33 08           SBC TABINE+1
02038  19D8  0D 51 08           ORA TEMP
02039  19DB  F0 05              BEQ PUIT
02040  19DD  20 33 1A           JSR INTCHK      ;IS ADDRESS IN TAB
02041  19E0  B0 23              BCS INTEXT      ;IF SO EXIT
02042  19E2  AD 32 08    PUIT   LDA TABINE      ;GET LOW END
02043  19E5  85 02              STA ZEROUR      ;STORE
02044  19E7  AD 33 08           LDA TABINE+1    ;GET HIGH END
02045  19EA  85 03              STA ZEROUR+1    ;STORE
02046  19EC  A0 00              LDY #$00        ;OFFSET
02047  19EE  AD 45 08           LDA WORKED      ;GET LOW ADDRESS
02048  19F1  91 02              STA (ZEROUR),Y  ;PUT IN TABLE
02049  19F3  C8                 INY             ;OFFSET TO HIGH
02050  19F4  AD 46 08           LDA WORKED+1    ;GET HIGH ADDRESS






DISLIST.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02051  19F7  91 02              STA (ZEROUR),Y  ;PUT IN TABLE
02052  19F9  20 EE 17           JSR SEMIC
02053  19FC  20 E5 17           JSR PWORKD
02054  19FF              ;*********************************
02055  19FF  20 07 1A           JSR INCIE       ;INC TO HIGH & LOW
02056  1A02  4C 07 1A           JMP INCIE       ;INC TO HIGH & LOW
02057  1A05  18          INTEXT CLC             ;C=0 FOR NO MATCH
02058  1A06  60                 RTS             ;RETURN
02059  1A07              ;*********************************
02060  1A07              ; INC INTERNAL END TABLE POINTER
02061  1A07              ;*********************************
02062  1A07  EE 32 08    INCIE  INC TABINE
02063  1A0A  D0 03              BNE *+5
02064  1A0C  EE 33 08           INC TABINE+1
02065  1A0F              ;*********************************
02066  1A0F              ; INC INTERNAL ADDRESS POINTER
02067  1A0F              ;*********************************
02068  1A0F  EE 2E 08    INCI   INC TABINP
02069  1A12  D0 03              BNE *+5
02070  1A14  EE 2F 08           INC TABINP+1
02071  1A17  60                 RTS
02072  1A18              ;*********************************
02073  1A18              ; GET BYTE FROM INTERNAL TABLE
02074  1A18              ;*********************************
02075  1A18  AD 2E 08    GETI   LDA TABINP
02076  1A1B  85 02              STA ZEROUR
02077  1A1D  AD 2F 08           LDA TABINP+1
02078  1A20  85 03              STA ZEROUR+1
02079  1A22  A0 00              LDY #$00
02080  1A24  B1 02              LDA (ZEROUR),Y
02081  1A26  60                 RTS
02082  1A27              ;*********************************
02083  1A27              ; CHECK IF ADDRESS IN TABLE
02084  1A27              ;*********************************
02085  1A27  AD 22 08    INTCHA LDA SELECT
02086  1A2A  8D 45 08           STA WORKED
02087  1A2D  AD 23 08           LDA SELECT+1
02088  1A30  8D 46 08           STA WORKED+1
02089  1A33              ;*********************************
02090  1A33  20 89 19    INTCHK JSR INTSET
02091  1A36  20 18 1A    INTCH  JSR GETI
02092  1A39  8D 47 08           STA WORKER
02093  1A3C  20 0F 1A           JSR INCI
02094  1A3F  20 18 1A           JSR GETI
02095  1A42  8D 48 08           STA WORKER+1
02096  1A45  38                 SEC
02097  1A46  AD 46 08           LDA WORKED+1
02098  1A49  ED 48 08           SBC WORKER+1
02099  1A4C  8D 51 08           STA TEMP
02100  1A4F  AD 45 08           LDA WORKED
02101  1A52  ED 47 08           SBC WORKER
02102  1A55  0D 51 08           ORA TEMP
02103  1A58  F0 17              BEQ INTMAT
02104  1A5A              ;*********************************
02105  1A5A  20 0F 1A           JSR INCI






DISLIST.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02106  1A5D  AD 2F 08           LDA TABINP+1
02107  1A60  CD 33 08           CMP TABINE+1
02108  1A63  90 D1              BCC INTCH
02109  1A65  D0 08              BNE INTEND
02110  1A67  AD 2E 08           LDA TABINP
02111  1A6A  CD 32 08           CMP TABINE
02112  1A6D  90 C7              BCC INTCH
02113  1A6F              ;*********************************
02114  1A6F  18          INTEND CLC
02115  1A70  60                 RTS
02116  1A71  38          INTMAT SEC
02117  1A72  60                 RTS
02118  1A73              ;*********************************
02119  1A73              ; 2 BYTE TABLE SORT ROUTINE
02120  1A73              ;*********************************
02121  1A73  20 89 19    SORT   JSR INTSET      ;SET POINTERS
02122  1A76  AD 30 08           LDA TABINS
02123  1A79  8D 34 08           STA SMALLS
02124  1A7C  8D 36 08           STA SMALLP
02125  1A7F  AD 31 08           LDA TABINS+1
02126  1A82  8D 35 08           STA SMALLS+1
02127  1A85  8D 37 08           STA SMALLP+1
02128  1A88              ;*********************************
02129  1A88              ; PUT FIRST WORD INTO TEMP
02130  1A88              ;*********************************
02131  1A88  20 18 1A    SORT1  JSR GETI
02132  1A8B  8D 51 08           STA TEMP
02133  1A8E  20 0F 1A           JSR INCI
02134  1A91  20 18 1A           JSR GETI
02135  1A94  8D 52 08           STA TEMP+1
02136  1A97              ;*********************************
02137  1A97              ; INC TO NEXT WORD AND COMPARE
02138  1A97              ; SMALLP POINTS TO LOW BYTE
02139  1A97              ;*********************************
02140  1A97  20 0F 1A    SORT2  JSR INCI
02141  1A9A  AD 2E 08           LDA TABINP
02142  1A9D  8D 36 08           STA SMALLP
02143  1AA0  AD 2F 08           LDA TABINP+1
02144  1AA3  8D 37 08           STA SMALLP+1
02145  1AA6  20 18 1A           JSR GETI
02146  1AA9  8D 45 08           STA WORKED
02147  1AAC  20 0F 1A           JSR INCI
02148  1AAF  AD 2F 08           LDA TABINP+1
02149  1AB2  CD 33 08           CMP TABINE+1
02150  1AB5  90 0D              BCC T2
02151  1AB7  D0 08              BNE S3
02152  1AB9  AD 2E 08           LDA TABINP
02153  1ABC  CD 32 08           CMP TABINE
02154  1ABF  90 03              BCC T2
02155  1AC1  4C 19 1B    S3     JMP SORT3
02156  1AC4  20 18 1A    T2     JSR GETI
02157  1AC7  8D 46 08           STA WORKED+1
02158  1ACA  CD 52 08           CMP TEMP+1
02159  1ACD  90 0D              BCC SMALL
02160  1ACF  D0 08              BNE LARGE






DISLIST.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02161  1AD1  AD 45 08           LDA WORKED
02162  1AD4  CD 51 08           CMP TEMP
02163  1AD7  90 03              BCC SMALL
02164  1AD9  4C 97 1A    LARGE  JMP SORT2
02165  1ADC              ;*********************************
02166  1ADC              ; WORD IS SMALL THAN TEMP PUT IT
02167  1ADC              ; WHERE TEMP CAME FROM (SMALLS)
02168  1ADC              ;*********************************
02169  1ADC  AD 34 08    SMALL  LDA SMALLS
02170  1ADF  85 02              STA ZEROUR
02171  1AE1  AD 35 08           LDA SMALLS+1
02172  1AE4  85 03              STA ZEROUR+1
02173  1AE6  A0 00              LDY #$00
02174  1AE8  AD 45 08           LDA WORKED
02175  1AEB  91 02              STA (ZEROUR),Y
02176  1AED  C8                 INY
02177  1AEE  AD 46 08           LDA WORKED+1
02178  1AF1  91 02              STA (ZEROUR),Y
02179  1AF3              ;*********************************
02180  1AF3              ; PUT TEMP IN PLACE OF WORD
02181  1AF3              ; SMALLP POINTS TO LO ADDRESS
02182  1AF3              ;*********************************
02183  1AF3  AD 36 08           LDA SMALLP
02184  1AF6  85 02              STA ZEROUR
02185  1AF8  AD 37 08           LDA SMALLP+1
02186  1AFB  85 03              STA ZEROUR+1
02187  1AFD  A0 00              LDY #$00
02188  1AFF  AD 51 08           LDA TEMP
02189  1B02  91 02              STA (ZEROUR),Y
02190  1B04  C8                 INY
02191  1B05  AD 52 08           LDA TEMP+1
02192  1B08  91 02              STA (ZEROUR),Y
02193  1B0A              ;*********************************
02194  1B0A  AD 34 08           LDA SMALLS
02195  1B0D  8D 2E 08           STA TABINP
02196  1B10  AD 35 08           LDA SMALLS+1
02197  1B13  8D 2F 08           STA TABINP+1
02198  1B16  4C 88 1A           JMP SORT1
02199  1B19              ;*********************************
02200  1B19              ; IF AFTER SCAN TO TABLE GOTO NEXT
02201  1B19              ; WORD IN TABLE FOR CHECK
02202  1B19              ;*********************************
02203  1B19  18          SORT3  CLC
02204  1B1A  AD 34 08           LDA SMALLS
02205  1B1D  69 02              ADC #$02
02206  1B1F  8D 34 08           STA SMALLS
02207  1B22  8D 2E 08           STA TABINP
02208  1B25  AD 35 08           LDA SMALLS+1
02209  1B28  69 00              ADC #$00
02210  1B2A  8D 35 08           STA SMALLS+1
02211  1B2D  8D 2F 08           STA TABINP+1
02212  1B30  AD 35 08           LDA SMALLS+1
02213  1B33  CD 33 08           CMP TABINE+1
02214  1B36  90 0A              BCC SORTOK
02215  1B38  D0 0B              BNE SORT4






DISLIST.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02216  1B3A  AD 34 08           LDA SMALLS
02217  1B3D  CD 32 08           CMP TABINE
02218  1B40  B0 03              BCS SORT4
02219  1B42  4C 88 1A    SORTOK JMP SORT1
02220  1B45              ;*********************************
02221  1B45  4C 89 19    SORT4  JMP INTSET
02222  1B48              ;*********************************
02223  1B48              ; PRINT INTERNAL ADDRESS TABLE
02224  1B48              ;*********************************
02225  1B48  38          INTPRT SEC
02226  1B49  AD 30 08           LDA TABINS
02227  1B4C  ED 32 08           SBC TABINE
02228  1B4F  8D 51 08           STA TEMP
02229  1B52  AD 31 08           LDA TABINS+1
02230  1B55  ED 33 08           SBC TABINE+1
02231  1B58  0D 51 08           ORA TEMP
02232  1B5B  D0 01              BNE INTOUT
02233  1B5D  60                 RTS
02234  1B5E              ;*********************************
02235  1B5E  20 7F 14    INTOUT JSR HEADSY
02236  1B61  20 73 1A           JSR SORT
02237  1B64              ;*********************************
02238  1B64  A9 03       LOOP1  LDA #$03
02239  1B66  8D 52 08           STA SAVA
02240  1B69  20 18 1A    INTPR  JSR GETI
02241  1B6C  8D 45 08           STA WORKED
02242  1B6F  20 0F 1A           JSR INCI
02243  1B72  20 18 1A           JSR GETI
02244  1B75  8D 46 08           STA WORKED+1
02245  1B78  20 28 18           JSR SPACE
02246  1B7B  20 65 22           JSR SYMOP
02247  1B7E  90 0B              BCC INTPRS
02248  1B80  20 02 23           JSR FIXSYM
02249  1B83  A9 02              LDA #$02
02250  1B85  20 1D 18           JSR SPACM
02251  1B88  4C 90 1B           JMP INTPRM
02252  1B8B  A9 08       INTPRS LDA #$08
02253  1B8D  20 1D 18           JSR SPACM
02254  1B90  20 E5 17    INTPRM JSR PWORKD
02255  1B93  20 0F 1A           JSR INCI
02256  1B96  AD 2F 08           LDA TABINP+1
02257  1B99  CD 33 08           CMP TABINE+1
02258  1B9C  90 0A              BCC PRTOK
02259  1B9E  D0 15              BNE PREND
02260  1BA0  AD 2E 08           LDA TABINP
02261  1BA3  CD 32 08           CMP TABINE
02262  1BA6  B0 0D              BCS PREND
02263  1BA8  CE 52 08    PRTOK  DEC SAVA
02264  1BAB  30 0B              BMI LOOP2
02265  1BAD  A9 02              LDA #$02
02266  1BAF  20 1D 18           JSR SPACM
02267  1BB2  4C 69 1B           JMP INTPR
02268  1BB5  4C 54 14    PREND  JMP NEXPTS
02269  1BB8  20 54 14    LOOP2  JSR NEXPTS
02270  1BBB  4C 64 1B           JMP LOOP1






DISLIST.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02271  1BBE              ;*********************************
02272  1BBE              .FIL   0:ASC.ASM
02273  1BBE              ;*********************************
02274  1BBE              ; DATA TABLE HANDLER
02275  1BBE              ;*********************************
02276  1BBE  AD E9 08    DATAOP LDA NDATA       ;GET NUM TABLES
02277  1BC1  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02278  1BC3  A9 00              LDA #$00        ;ZERO BYTE
02279  1BC5  8D E7 08           STA CDATA       ;SET FIRST TABLE
02280  1BC8  F0 03              BEQ DATAO1      ;
02281  1BCA  4C AE 1C    ENDAX  JMP ENDDAT      ;
02282  1BCD              ;*********************************
02283  1BCD  AD E7 08    DATAO1 LDA CDATA       ;CURRENT TABLE
02284  1BD0  CD E9 08           CMP NDATA       ;LAST TABLE DONE
02285  1BD3  F0 F5              BEQ ENDAX       ;IF SO EXIT
02286  1BD5  0A                 ASL A           ;CDATA*2
02287  1BD6  0A                 ASL A           ;CDATA*4
02288  1BD7  18                 CLC
02289  1BD8  6D E7 08           ADC CDATA       ;CDATA*5
02290  1BDB  A8                 TAY             ;PUT INTO INDEX
02291  1BDC  B9 F1 08           LDA TDATA,Y     ;START LOW
02292  1BDF  8D 47 08           STA WORKER      ;STORE
02293  1BE2  C8                 INY             ;INC OFFSET
02294  1BE3  B9 F1 08           LDA TDATA,Y     ;START HIGH
02295  1BE6  8D 48 08           STA WORKER+1    ;STORE
02296  1BE9  38                 SEC             ;C=1
02297  1BEA  AD 47 08           LDA WORKER      ;
02298  1BED  ED 22 08           SBC SELECT      ;
02299  1BF0  8D 51 08           STA TEMP        ;
02300  1BF3  AD 48 08           LDA WORKER+1    ;
02301  1BF6  ED 23 08           SBC SELECT+1    ;
02302  1BF9  0D 51 08           ORA TEMP        ;
02303  1BFC  F0 05              BEQ DATAO2      ;MATCH
02304  1BFE  EE E7 08           INC CDATA       ;NEXT TABLE
02305  1C01  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02306  1C03              ;*********************************
02307  1C03              ; GET TABLE DATA
02308  1C03              ;*********************************
02309  1C03  C8          DATAO2 INY             ;INC OFFSET
02310  1C04  B9 F1 08           LDA TDATA,Y     ;END LOW
02311  1C07  8D E4 08           STA EAS         ;STORE
02312  1C0A  C8                 INY             ;INC OFFSET
02313  1C0B  B9 F1 08           LDA TDATA,Y     ;END HIGH
02314  1C0E  8D E5 08           STA EAS+1       ;STORE
02315  1C11  C8                 INY             ;INC OFFSET
02316  1C12  B9 F1 08           LDA TDATA,Y     ;DATA TYPE
02317  1C15  8D E6 08           STA TEXTER      ;STORE
02318  1C18  C9 53              CMP #'S'        ;IS IT SKIPPER
02319  1C1A  D0 23              BNE ASCCCC      ;
02320  1C1C              ;*********************************
02321  1C1C              ; SKIP RANGE OF ADDRESSES
02322  1C1C              ;*********************************
02323  1C1C  AD 12 08           LDA PASS
02324  1C1F  CD 15 08           CMP CPASS
02325  1C22  D0 1B              BNE ASCCCC






DISLIST.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02326  1C24  AD E4 08           LDA EAS
02327  1C27  8D 22 08           STA SELECT
02328  1C2A  AD E5 08           LDA EAS+1
02329  1C2D  8D 23 08           STA SELECT+1
02330  1C30  20 46 18           JSR INCSL
02331  1C33  20 5E 17           JSR ORGIN
02332  1C36  20 65 18           JSR DECSL
02333  1C39  20 84 17           JSR COMENT
02334  1C3C  4C AB 1C           JMP DATUT
02335  1C3F              ;*********************************
02336  1C3F              ; CHECK PASS
02337  1C3F              ;*********************************
02338  1C3F  AD 12 08    ASCCCC LDA PASS
02339  1C42  CD 14 08           CMP EPASS       ;EXTERNAL
02340  1C45  D0 0F              BNE ASCKK
02341  1C47  AD E4 08    SKIPER LDA EAS
02342  1C4A  8D 22 08           STA SELECT
02343  1C4D  AD E5 08           LDA EAS+1
02344  1C50  8D 23 08           STA SELECT+1
02345  1C53  4C AB 1C           JMP DATUT
02346  1C56              ;*********************************
02347  1C56              ; DISASSEMBLER LOOP FOR DATA
02348  1C56              ;*********************************
02349  1C56  AD 12 08    ASCKK  LDA PASS        ;GET PASS
02350  1C59  CD 15 08           CMP CPASS       ;IS IT LAST
02351  1C5C  D0 0E              BNE ASCI1       ;NO PRINT
02352  1C5E  20 84 17           JSR COMENT      ;COMMENT LINE
02353  1C61  AD 12 08    ASCII  LDA PASS        ;GET PASS
02354  1C64  CD 15 08           CMP CPASS       ;IS IT LAST
02355  1C67  D0 03              BNE ASCI1       ;NO PRINT
02356  1C69  20 1A 19           JSR PRTDAT      ;PRINT LINE
02357  1C6C  20 B1 1C    ASCI1  JSR ACHECK      ;DIS ONE LINE
02358  1C6F  B0 29              BCS ASCIIQ      ;IF EA STOP
02359  1C71              ;*********************************
02360  1C71  20 E1 FF           JSR STOP
02361  1C74  F0 24              BEQ ASCIIQ
02362  1C76  20 E4 FF           JSR GETIN
02363  1C79  F0 E6              BEQ ASCII
02364  1C7B  C9 20              CMP #' '
02365  1C7D  D0 E2              BNE ASCII
02366  1C7F  AD 19 08           LDA DEVICE
02367  1C82  48                 PHA
02368  1C83  A9 03              LDA #$03
02369  1C85  8D 19 08           STA DEVICE
02370  1C88  A9 F8              LDA #<PMSG
02371  1C8A  A0 09              LDY #>PMSG
02372  1C8C  20 52 13           JSR STRPNT
02373  1C8F  68                 PLA
02374  1C90  8D 19 08           STA DEVICE
02375  1C93  20 E4 FF    PAUS1  JSR GETIN
02376  1C96  F0 FB              BEQ PAUS1
02377  1C98  D0 C7              BNE ASCII
02378  1C9A              ;*********************************
02379  1C9A  AD 12 08    ASCIIQ LDA PASS        ;GET PASS
02380  1C9D  CD 15 08           CMP CPASS       ;IS IT LAST






DISLIST.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02381  1CA0  D0 09              BNE DATUT       ;EXIT
02382  1CA2  20 46 18           JSR INCSL
02383  1CA5  20 84 17           JSR COMENT      ;COMMENT LINE
02384  1CA8  20 65 18           JSR DECSL
02385  1CAB              ;*********************************
02386  1CAB              ; EXIT TO NEXTSL
02387  1CAB              ;*********************************
02388  1CAB  A9 FF       DATUT  LDA #$FF        ;SET N=1
02389  1CAD  60                 RTS             ;RETURN
02390  1CAE  A9 00       ENDDAT LDA #$00        ;SET N=0
02391  1CB0  60                 RTS             ;RETURN
02392  1CB1              ;*********************************
02393  1CB1              ; CHECK OPTIONS
02394  1CB1              ;*********************************
02395  1CB1  AD E6 08    ACHECK LDA TEXTER      ;GET DATA TYPE
02396  1CB4  C9 34              CMP #'4'         ;WORD-1
02397  1CB6  F0 0B              BEQ AC0
02398  1CB8  C9 33              CMP #'3'         ;DBYTE
02399  1CBA  F0 0A              BEQ AC1
02400  1CBC  C9 32              CMP #'2'         ;WORD
02401  1CBE  F0 03              BEQ AC0
02402  1CC0  4C C9 1C           JMP BYTES       ;BYTE OR ASCII
02403  1CC3  4C 7B 1D    AC0    JMP WORDS       ;WORD OR WORD-1
02404  1CC6  4C 4B 1D    AC1    JMP DBYTES      ;DBYTES
02405  1CC9              ;*********************************
02406  1CC9              ; .BYTE DIRECTIVE
02407  1CC9              ;*********************************
02408  1CC9  AD 12 08    BYTES  LDA PASS        ;GET PASS
02409  1CCC  CD 15 08           CMP CPASS       ;IS IT LAST
02410  1CCF  D0 20              BNE BYTESX      ;IF NOT EXIT
02411  1CD1  20 A7 18           JSR PRTONE      ;PRINT BYTE
02412  1CD4  20 AD 17           JSR PRAD        ;PRINT ADDRESS
02413  1CD7  A0 1E              LDY #>MBYTE     ;.BYTE
02414  1CD9  A9 37              LDA #<MBYTE     ;
02415  1CDB  20 52 13           JSR STRPNT      ;PRINT IT
02416  1CDE  AD E6 08           LDA TEXTER      ;GET TYPE
02417  1CE1  C9 30              CMP #'0'          ;ASCII
02418  1CE3  F0 0F              BEQ ALINE       ;ASCII BYTES
02419  1CE5  20 F3 17           JSR DOLLAR      ;PRINT $
02420  1CE8  20 4F 18           JSR GETSL       ;GET BYTE
02421  1CEB  20 3C 13           JSR PRBYT       ;PRINT BYTE
02422  1CEE  20 95 12           JSR NEWLIN      ;NEXT LINE
02423  1CF1  4C 1E 1E    BYTESX JMP NEXTBY      ;NEXT BYTE
02424  1CF4              ;*********************************
02425  1CF4              ; ASCII TEXT
02426  1CF4              ;*********************************
02427  1CF4  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02428  1CF6  8D 51 08           STA TEMP        ;STORE IN COUNT
02429  1CF9              ;*********************************
02430  1CF9              ; CHECK FIRST BYTE OF LINE
02431  1CF9              ;*********************************
02432  1CF9  20 4F 18           JSR GETSL       ;GET BYTE
02433  1CFC  20 3F 1D           JSR CASCII      ;CHECK FOR ASCII
02434  1CFF  B0 2F              BCS NASCII      ;IF NOT BRANCH
02435  1D01  A9 27              LDA #'''        ;PRINT ONE QUOTE






DISLIST.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02436  1D03  20 A8 13           JSR PCHAR       ;PRINT IT
02437  1D06              ;*********************************
02438  1D06  20 4F 18    ALOP   JSR GETSL       ;GET BYTE
02439  1D09  20 3F 1D           JSR CASCII      ;IS IT ASCII
02440  1D0C  B0 1A              BCS EASCII      ;IF NOT END LINE
02441  1D0E  20 A8 13           JSR PCHAR       ;PRINT ASCII
02442  1D11  20 1E 1E           JSR NEXTBY      ;INC SELECT
02443  1D14  B0 0D              BCS EASCI1      ;C=1 IF END
02444  1D16  EE 51 08           INC TEMP        ;INC COUNT
02445  1D19  AD 51 08           LDA TEMP        ;LOAD COUNT
02446  1D1C  C9 28              CMP #$28        ;40 CHAR
02447  1D1E  F0 08              BEQ EASCII      ;IF SO END
02448  1D20  4C 06 1D           JMP ALOP        ;NEXT
02449  1D23              ;*********************************
02450  1D23  20 28 1D    EASCI1 JSR EASCII
02451  1D26  38                 SEC
02452  1D27  60                 RTS
02453  1D28              ;*********************************
02454  1D28  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02455  1D2A  20 A8 13           JSR PCHAR       ;
02456  1D2D  4C 95 12           JMP NEWLIN      ;PRINT CR
02457  1D30              ;*********************************
02458  1D30  20 F3 17    NASCII JSR DOLLAR      ;PRINT $
02459  1D33  20 4F 18           JSR GETSL       ;GET BYTE
02460  1D36  20 3C 13           JSR PRBYT       ;PRINT IT
02461  1D39  20 95 12           JSR NEWLIN      ;PRINT CR
02462  1D3C  4C 1E 1E           JMP NEXTBY      ;NEXT SL
02463  1D3F              ;*********************************
02464  1D3F              ; CHECK ACCUM FOR PRINTABLE ASCII
02465  1D3F              ;*********************************
02466  1D3F  C9 20       CASCII CMP #$20        ;< SPACE
02467  1D41  30 06              BMI NOASC       ;IF LESS NOASCII
02468  1D43  C9 60              CMP #$60        ;> _
02469  1D45  B0 02              BCS NOASC       ;IF GREATER NO
02470  1D47  18                 CLC             ;CLEAR CARRY OK
02471  1D48  60                 RTS             ;RETURN
02472  1D49  38          NOASC  SEC             ;SET CARRY BAD
02473  1D4A  60                 RTS             ;RETURN
02474  1D4B              ;*********************************
02475  1D4B              ; .DBYTE DIRECTIVE
02476  1D4B              ;*********************************
02477  1D4B  AD 12 08    DBYTES LDA PASS        ;CHECK PASS
02478  1D4E  CD 15 08           CMP CPASS       ;LAST PASS
02479  1D51  D0 25              BNE DBYTEX      ;EXIT
02480  1D53  20 BD 18           JSR PRTTWO      ;PRINT 2 BYTES
02481  1D56  20 AD 17           JSR PRAD        ;PRINT ADDRESS
02482  1D59  A0 1E              LDY #>MDBYTE    ;.DBYTE
02483  1D5B  A9 47              LDA #<MDBYTE    ;
02484  1D5D  20 52 13           JSR STRPNT      ;PRINT IT
02485  1D60  20 4F 18           JSR GETSL       ;GET BYTE
02486  1D63  8D 46 08           STA WORKED+1    ;STORE
02487  1D66  20 46 18           JSR INCSL       ;GET BYTE
02488  1D69  20 4F 18           JSR GETSL       ;GET BYTE
02489  1D6C  8D 45 08           STA WORKED      ;STORE
02490  1D6F  20 F3 17           JSR DOLLAR      ;PRINT $






DISLIST.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02491  1D72  20 E5 17           JSR PWORKD      ;PRINT WORD
02492  1D75  20 95 12           JSR NEWLIN      ;PRINT CR
02493  1D78  4C 1E 1E    DBYTEX JMP NEXTBY      ;NEXT SL
02494  1D7B              ;*********************************
02495  1D7B              ; .WORD DIRECTIVE
02496  1D7B              ;*********************************
02497  1D7B  AD 12 08    WORDS  LDA PASS        ;GET PASS
02498  1D7E  CD 15 08           CMP CPASS         ;LAST
02499  1D81  D0 0D              BNE WORD1       ;IF NOT BRANCH
02500  1D83  20 BD 18           JSR PRTTWO      ;PRINT 2 BYTES
02501  1D86  20 AD 17           JSR PRAD        ;PRINT ADDRESS
02502  1D89  A0 1E              LDY #>MWORD     ;.WORD
02503  1D8B  A9 3F              LDA #<MWORD     ;
02504  1D8D  20 52 13           JSR STRPNT      ;PRINT IT
02505  1D90              ;*********************************
02506  1D90              ; GET WORD INTO WORKED
02507  1D90              ;*********************************
02508  1D90  20 4F 18    WORD1  JSR GETSL       ;GET BYTE
02509  1D93  8D 45 08           STA WORKED      ;STORE BYTE
02510  1D96  8D 36 08           STA SMALLP      ;STORE BYTE
02511  1D99  20 46 18           JSR INCSL       ;GET BYTE
02512  1D9C  20 4F 18           JSR GETSL       ;GET BYTE
02513  1D9F  8D 46 08           STA WORKED+1    ;STORE BYTE
02514  1DA2  8D 37 08           STA SMALLP+1    ;STORE BYTE
02515  1DA5  AD E6 08           LDA TEXTER      ;GET OPTION
02516  1DA8  C9 34              CMP #'4'          ;.WORD ADRS-1
02517  1DAA  F0 2A              BEQ WORDM       ;BRANCH
02518  1DAC              ;*********************************
02519  1DAC              ; CHECK PASS
02520  1DAC              ;*********************************
02521  1DAC  AD 12 08           LDA PASS        ;CHECK PASS
02522  1DAF  CD 13 08           CMP IPASS       ;INTERNAL
02523  1DB2  F0 16              BEQ WORDPT      ;TABLE WORD
02524  1DB4  CD 14 08           CMP EPASS
02525  1DB7  F0 17              BEQ WORDSY
02526  1DB9              ;*********************************
02527  1DB9              ; PRINT WORD
02528  1DB9              ;*********************************
02529  1DB9  20 65 22           JSR SYMOP       ;CHECK SYMBOL
02530  1DBC  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02531  1DBE  20 F3 17           JSR DOLLAR      ;PRINT $
02532  1DC1  20 E5 17           JSR PWORKD      ;PRINT WORD
02533  1DC4  20 95 12           JSR NEWLIN      ;PRINT CR
02534  1DC7  4C 1E 1E    WORDSX JMP NEXTBY      ;NEXT SL
02535  1DCA  20 C8 19    WORDPT JSR PUTI        ;PUT IN TABLE
02536  1DCD  4C 1E 1E           JMP NEXTBY      ;NEXT SL
02537  1DD0  20 65 22    WORDSY JSR SYMOP
02538  1DD3  4C 1E 1E           JMP NEXTBY
02539  1DD6              ;*********************************
02540  1DD6              ; .WORD ADDRESS-1
02541  1DD6              ;*********************************
02542  1DD6  18          WORDM  CLC
02543  1DD7  AD 45 08           LDA WORKED
02544  1DDA  69 01              ADC #$01
02545  1DDC  8D 45 08           STA WORKED






DISLIST.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02546  1DDF  AD 46 08           LDA WORKED+1
02547  1DE2  69 00              ADC #$00
02548  1DE4  8D 46 08           STA WORKED+1
02549  1DE7              ;*********************************
02550  1DE7              ; CHECK PASS
02551  1DE7              ;*********************************
02552  1DE7  AD 12 08           LDA PASS        ;CHECK PASS
02553  1DEA  CD 13 08           CMP IPASS       ;INTERNAL
02554  1DED  F0 DB              BEQ WORDPT      ;TABLE WORD
02555  1DEF  CD 14 08           CMP EPASS       ;EXTERNAL
02556  1DF2  F0 DC              BEQ WORDSY      ;TABLE WORD
02557  1DF4              ;*********************************
02558  1DF4              ; PRINT WORD
02559  1DF4              ;*********************************
02560  1DF4  20 65 22           JSR SYMOP       ;CHECK SYMBOL
02561  1DF7  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02562  1DF9  A9 2D              LDA #'-'
02563  1DFB  20 A8 13           JSR PCHAR
02564  1DFE  A9 31              LDA #'1'
02565  1E00  20 A8 13           JSR PCHAR
02566  1E03  4C 18 1E           JMP WORDS3
02567  1E06              ;*********************************
02568  1E06  20 F3 17    WORDS2 JSR DOLLAR      ;PRINT $
02569  1E09  AD 36 08           LDA SMALLP
02570  1E0C  8D 45 08           STA WORKED
02571  1E0F  AD 37 08           LDA SMALLP+1
02572  1E12  8D 46 08           STA WORKED+1
02573  1E15  20 E5 17           JSR PWORKD      ;PRINT WORD
02574  1E18  20 95 12    WORDS3 JSR NEWLIN      ;PRINT CR
02575  1E1B  4C 1E 1E    WORDXX JMP NEXTBY      ;NEXT SL
02576  1E1E              ;*********************************
02577  1E1E              ; SELECT NEXT BYTE OF DATA
02578  1E1E              ;*********************************
02579  1E1E  AD 23 08    NEXTBY LDA SELECT+1
02580  1E21  CD E5 08           CMP EAS+1
02581  1E24  90 0A              BCC SBLOK
02582  1E26  D0 0D              BNE NOBINC
02583  1E28  AD 22 08           LDA SELECT
02584  1E2B  CD E4 08           CMP EAS
02585  1E2E  B0 05              BCS NOBINC
02586  1E30  20 46 18    SBLOK  JSR INCSL
02587  1E33  18                 CLC
02588  1E34  60                 RTS
02589  1E35  38          NOBINC SEC
02590  1E36  60                 RTS
02591  1E37              ;*********************************
02592  1E37  20 2E       MBYTE  .BYTE ' .BYTE ',0
02592  1E3E  00 
02593  1E3F  20 2E       MWORD  .BYTE ' .WORD ',0
02593  1E46  00 
02594  1E47  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02594  1E4F  00 
02595  1E50              ;*********************************
02596  1E50              .FIL   0:TABLE.ASM
02597  1E50              ;*********************************






DISLIST.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02598  1E50              ;       PRINT MNEMONIC
02599  1E50              ;*********************************
02600  1E50  A2 03       MNEMON LDX #3          ;3 CHARACTERS
02601  1E52  8E 51 08           STX TEMP        ;COUNTER
02602  1E55  AA                 TAX             ;CODE IS INDEX
02603  1E56  BD C9 1F           LDA MCODES,X    ;GET OFFSET
02604  1E59  AA                 TAX             ;INDEX OFFSET
02605  1E5A  BD F1 1E    MNLOOP LDA MNAMES,X    ;GET CHARACTER
02606  1E5D  8E 53 08           STX SAVX        ;SAVE INDEX
02607  1E60  20 A8 13           JSR PCHAR       ;PRINT CHAR
02608  1E63  AE 53 08           LDX SAVX        ;GET INDEX
02609  1E66  E8                 INX             ;NEXT CHAR
02610  1E67  CE 51 08           DEC TEMP        ;DEC COUNT
02611  1E6A  D0 EE              BNE MNLOOP      ;LOOP TILL 0
02612  1E6C  60                 RTS             ;RETURN
02613  1E6D              ;*********************************
02614  1E6D              ;        PRINT OPERAND
02615  1E6D              ;*********************************
02616  1E6D  48          PRTASS PHA             ;STACK INDEX
02617  1E6E  20 1A 19           JSR PRTDAT      ;PRINT LINE DATA
02618  1E71  68                 PLA             ;PULL INDEX
02619  1E72  A8                 TAY             ;SAVE INDEX
02620  1E73  A9 9D              LDA #<SUBP
02621  1E75  A2 1E              LDX #>SUBP
02622  1E77  4C 87 1E           JMP GETOPE      ;LOOK UP ROUTINE
02623  1E7A              ;*********************************
02624  1E7A  A8          OPERN1 TAY             ;SAVE INDEX
02625  1E7B  A9 B9              LDA #<SUBS1
02626  1E7D  A2 1E              LDX #>SUBS1
02627  1E7F  4C 87 1E           JMP GETOPE      ;LOOK UP ROUTINE
02628  1E82              ;*********************************
02629  1E82  A8          OPERND TAY             ;SAVE INDEX
02630  1E83  A9 D5              LDA #<SUBS
02631  1E85  A2 1E              LDX #>SUBS
02632  1E87              ;*********************************
02633  1E87              ; LOOK UP AND JMP TO ROUTINE
02634  1E87              ;*********************************
02635  1E87  85 02       GETOPE STA ZEROUR      ;LOW TABLE
02636  1E89  86 03              STX ZEROUR+1    ;HIGH TABLE
02637  1E8B  B9 C9 20           LDA MODES,Y     ;GET OFFSET
02638  1E8E  A8                 TAY             ;INDEX OFFSET
02639  1E8F  B1 02              LDA (ZEROUR),Y  ;GET LOW BYTE
02640  1E91  8D 4F 08           STA ADRS        ;STORE
02641  1E94  C8                 INY             ;INC INDEX
02642  1E95  B1 02              LDA (ZEROUR),Y  ;GET HIGH BYTE
02643  1E97  8D 50 08           STA ADRS+1      ;STORE
02644  1E9A  6C 4F 08           JMP (ADRS)      ;INDIRECT JMP
02645  1E9D              ;*********************************
02646  1E9D              ; TABLE OF ADDRESSING MODE SUBS
02647  1E9D              ;*********************************
02648  1E9D              ; MACHINE LANGUAGE ROUTINES
02649  1E9D              ;*********************************
02650  1E9D  A7 18       SUBP   .WORD PRTONE    ;MODES 0  $00
02651  1E9F  A7 18       .WORD  PRTONE          ; 2  $02
02652  1EA1  BD 18       .WORD  PRTTWO          ; 4  $04






DISLIST.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02653  1EA3  BD 18       .WORD  PRTTWO          ; 6  $06
02654  1EA5  BD 18       .WORD  PRTTWO          ; 8  $08
02655  1EA7  BD 18       .WORD  PRTTWO          ; 10 $0A
02656  1EA9  E2 18       .WORD  PRTTHE          ; 12 $0C
02657  1EAB  E2 18       .WORD  PRTTHE          ; 14 $0E
02658  1EAD  E2 18       .WORD  PRTTHE          ; 16 $10
02659  1EAF  A7 18       .WORD  PRTONE          ; 18 $12
02660  1EB1  BD 18       .WORD  PRTTWO          ; 20 $14
02661  1EB3  BD 18       .WORD  PRTTWO          ; 22 $16
02662  1EB5  BD 18       .WORD  PRTTWO          ; 24 $18
02663  1EB7  E2 18       .WORD  PRTTHE          ; 26 $1A
02664  1EB9              ;*********************************
02665  1EB9              ; CODE ANALYSIS ROUTINES
02666  1EB9              ;*********************************
02667  1EB9  AC 16       SUBS1  .WORD IMPONE    ;MODES 0  $00
02668  1EBB  AC 16       .WORD  IMPONE          ; 2  $02
02669  1EBD  29 16       .WORD  IMMEDT          ; 4  $04
02670  1EBF  92 15       .WORD  ONEBYT          ; 6  $06
02671  1EC1  92 15       .WORD  ONEBYT          ; 8  $08
02672  1EC3  92 15       .WORD  ONEBYT          ; 10 $0A
02673  1EC5  C6 15       .WORD  TWOBYT          ; 12 $0C
02674  1EC7  C6 15       .WORD  TWOBYT          ; 14 $0E
02675  1EC9  C6 15       .WORD  TWOBYT          ; 16 $10
02676  1ECB  AC 16       .WORD  IMPONE          ; 18 $12
02677  1ECD  E3 16       .WORD  RELATV          ; 20 $14
02678  1ECF  92 15       .WORD  ONEBYT          ; 22 $16
02679  1ED1  92 15       .WORD  ONEBYT          ; 24 $18
02680  1ED3  C6 15       .WORD  TWOBYT          ; 26 $1A
02681  1ED5              ;*********************************
02682  1ED5              ; FINAL PASS ADDRESSING MODES
02683  1ED5              ;*********************************
02684  1ED5  02 16       SUBS   .WORD ILLEGL    ;MODES 0  $00
02685  1ED7  24 16       .WORD  ACC             ; 2  $02
02686  1ED9  29 16       .WORD  IMMEDT          ; 4  $04
02687  1EDB  5F 16       .WORD  ZEROPG          ; 6  $06
02688  1EDD  62 16       .WORD  ZEROX           ; 8  $08
02689  1EDF  68 16       .WORD  ZEROY           ; 10 $0A
02690  1EE1  6E 16       .WORD  ABSLUT          ; 12 $0C
02691  1EE3  93 16       .WORD  ABSX            ; 14 $0E
02692  1EE5  99 16       .WORD  ABSY            ; 16 $10
02693  1EE7  9F 16       .WORD  IMPLID          ; 18 $12
02694  1EE9  E3 16       .WORD  RELATV          ; 20 $14
02695  1EEB  CE 16       .WORD  INDX            ; 22 $16
02696  1EED  D7 16       .WORD  INDY            ; 24 $18
02697  1EEF  B9 16       .WORD  INDRCT          ; 26 $1A
02698  1EF1              ;*********************************
02699  1EF1              ; LIST OF MNEMONICS
02700  1EF1              ;*********************************
02701  1EF1  00          MNAMES .BYTE 0,0,0     ;MCODES 0   $00
02701  1EF2  00 
02701  1EF3  00 
02702  1EF4  41 44 43    .BYTE  'ADC'           ; 3   $03
02703  1EF7  41 4E 44    .BYTE  'AND'           ; 6   $06
02704  1EFA  41 53 4C    .BYTE  'ASL'           ; 9   $09
02705  1EFD  42 43 43    .BYTE  'BCC'           ; 12  $0C






DISLIST.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02706  1F00  42 43 53    .BYTE  'BCS'           ; 15  $0F
02707  1F03  42 45 51    .BYTE  'BEQ'           ; 18  $12
02708  1F06  42 49 54    .BYTE  'BIT'           ; 21  $15
02709  1F09  42 4D 49    .BYTE  'BMI'           ; 24  $18
02710  1F0C  42 4E 45    .BYTE  'BNE'           ; 27  $1B
02711  1F0F  42 50 4C    .BYTE  'BPL'           ; 30  $1E
02712  1F12  42 52 4B    .BYTE  'BRK'           ; 33  $21
02713  1F15  42 56 43    .BYTE  'BVC'           ; 36  $24
02714  1F18  42 56 53    .BYTE  'BVS'           ; 39  $27
02715  1F1B  43 4C 43    .BYTE  'CLC'           ; 42  $2A
02716  1F1E  43 4C 44    .BYTE  'CLD'           ; 45  $2D
02717  1F21  43 4C 49    .BYTE  'CLI'           ; 48  $30
02718  1F24  43 4C 56    .BYTE  'CLV'           ; 51  $33
02719  1F27  43 4D 50    .BYTE  'CMP'           ; 54  $36
02720  1F2A  43 50 58    .BYTE  'CPX'           ; 57  $39
02721  1F2D  43 50 59    .BYTE  'CPY'           ; 60  $3C
02722  1F30  44 45 43    .BYTE  'DEC'           ; 63  $3F
02723  1F33  44 45 58    .BYTE  'DEX'           ; 66  $42
02724  1F36  44 45 59    .BYTE  'DEY'           ; 69  $45
02725  1F39  45 4F 52    .BYTE  'EOR'           ; 72  $48
02726  1F3C  49 4E 43    .BYTE  'INC'           ; 75  $4B
02727  1F3F  49 4E 58    .BYTE  'INX'           ; 78  $4E
02728  1F42  49 4E 59    .BYTE  'INY'           ; 81  $51
02729  1F45  4A 4D 50    .BYTE  'JMP'           ; 84  $54
02730  1F48  4A 53 52    .BYTE  'JSR'           ; 87  $57
02731  1F4B  4C 44 41    .BYTE  'LDA'           ; 90  $5A
02732  1F4E  4C 44 58    .BYTE  'LDX'           ; 93  $5D
02733  1F51  4C 44 59    .BYTE  'LDY'           ; 96  $60
02734  1F54  4C 53 52    .BYTE  'LSR'           ; 99  $63
02735  1F57  4E 4F 50    .BYTE  'NOP'           ; 102 $66
02736  1F5A  4F 52 41    .BYTE  'ORA'           ; 105 $69
02737  1F5D  50 48 41    .BYTE  'PHA'           ; 108 $6C
02738  1F60  50 48 50    .BYTE  'PHP'           ; 111 $6F
02739  1F63  50 4C 41    .BYTE  'PLA'           ; 114 $72
02740  1F66  50 4C 50    .BYTE  'PLP'           ; 117 $75
02741  1F69  52 4F 4C    .BYTE  'ROL'           ; 120 $78
02742  1F6C  52 4F 52    .BYTE  'ROR'           ; 123 $7B
02743  1F6F  52 54 49    .BYTE  'RTI'           ; 126 $7E
02744  1F72  52 54 53    .BYTE  'RTS'           ; 129 $81
02745  1F75  53 42 43    .BYTE  'SBC'           ; 132 $84
02746  1F78  53 45 43    .BYTE  'SEC'           ; 135 $87
02747  1F7B  53 45 44    .BYTE  'SED'           ; 138 $8A
02748  1F7E  53 45 49    .BYTE  'SEI'           ; 141 $8D
02749  1F81  53 54 41    .BYTE  'STA'           ; 144 $90
02750  1F84  53 54 58    .BYTE  'STX'           ; 147 $93
02751  1F87  53 54 59    .BYTE  'STY'           ; 150 $96
02752  1F8A  54 41 58    .BYTE  'TAX'           ; 153 $99
02753  1F8D  54 41 59    .BYTE  'TAY'           ; 156 $9C
02754  1F90  54 53 58    .BYTE  'TSX'           ; 159 $9F
02755  1F93  54 58 41    .BYTE  'TXA'           ; 162 $A2
02756  1F96  54 58 53    .BYTE  'TXS'           ; 165 $A5
02757  1F99  54 59 41    .BYTE  'TYA'           ; 168 $A8
02758  1F9C              ;*********************************
02759  1F9C              ; QUASI-OPCODES
02760  1F9C              ;*********************************






DISLIST.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02761  1F9C  41 53 4F    .BYTE  'ASO'           ; 171 $AB
02762  1F9F  52 4C 41    .BYTE  'RLA'           ; 174 $AE
02763  1FA2  4C 53 45    .BYTE  'LSE'           ; 177 $B1
02764  1FA5  52 52 41    .BYTE  'RRA'           ; 180 $B4
02765  1FA8  41 58 53    .BYTE  'AXS'           ; 183 $B7
02766  1FAB  4C 41 58    .BYTE  'LAX'           ; 186 $BA
02767  1FAE  44 43 4D    .BYTE  'DCM'           ; 189 $BD
02768  1FB1  49 4E 53    .BYTE  'INS'           ; 192 $C0
02769  1FB4  41 4C 52    .BYTE  'ALR'           ; 195 $C3
02770  1FB7  41 52 52    .BYTE  'ARR'           ; 198 $C6
02771  1FBA  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
02772  1FBD  53 41 58    .BYTE  'SAX'           ; 204 $CC
02773  1FC0  4E 4F 50    .BYTE  'NOP'           ; 207 $CF
02774  1FC3  53 4B 42    .BYTE  'SKB'           ; 210 $D2
02775  1FC6  53 4B 57    .BYTE  'SKW'           ; 213 $D5
02776  1FC9              ;*********************************
02777  1FC9              ; TABLE OF MNEMONIC CODES
02778  1FC9              ;*********************************
02779  1FC9              ;
02780  1FC9              ;A MNEMONIC'S CODE IS ITS OFFSET
02781  1FC9              ;    INTO MNAMES, THE LIST OF
02782  1FC9              ;         MNEONIC NAMES.
02783  1FC9              ;
02784  1FC9              ;*********************************
02785  1FC9  21          MCODES .BYTE $21,$69,0,0,0,$69,$09,0
02785  1FCA  69 
02785  1FCB  00 
02785  1FCC  00 
02785  1FCD  00 
02785  1FCE  69 
02785  1FCF  09 
02785  1FD0  00 
02786  1FD1  6F          .BYTE  $6F,$69,$09,0,0,$69,$09,0
02786  1FD2  69 
02786  1FD3  09 
02786  1FD4  00 
02786  1FD5  00 
02786  1FD6  69 
02786  1FD7  09 
02786  1FD8  00 
02787  1FD9  1E          .BYTE  $1E,$69,0,0,0,$69,$09,0
02787  1FDA  69 
02787  1FDB  00 
02787  1FDC  00 
02787  1FDD  00 
02787  1FDE  69 
02787  1FDF  09 
02787  1FE0  00 
02788  1FE1  2A          .BYTE  $2A,$69,0,0,0,$69,$09,0
02788  1FE2  69 
02788  1FE3  00 
02788  1FE4  00 
02788  1FE5  00 
02788  1FE6  69 
02788  1FE7  09 






DISLIST.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02788  1FE8  00 
02789  1FE9  57          .BYTE  $57,6,0,0,$15,6,$78,0
02789  1FEA  06 
02789  1FEB  00 
02789  1FEC  00 
02789  1FED  15 
02789  1FEE  06 
02789  1FEF  78 
02789  1FF0  00 
02790  1FF1  75          .BYTE  $75,6,$78,0,$15,6,$78,0
02790  1FF2  06 
02790  1FF3  78 
02790  1FF4  00 
02790  1FF5  15 
02790  1FF6  06 
02790  1FF7  78 
02790  1FF8  00 
02791  1FF9  18          .BYTE  $18,6,0,0,0,6,$78,0
02791  1FFA  06 
02791  1FFB  00 
02791  1FFC  00 
02791  1FFD  00 
02791  1FFE  06 
02791  1FFF  78 
02791  2000  00 
02792  2001  87          .BYTE  $87,6,0,0,0,6,$78,0
02792  2002  06 
02792  2003  00 
02792  2004  00 
02792  2005  00 
02792  2006  06 
02792  2007  78 
02792  2008  00 
02793  2009  7E          .BYTE  $7E,$48,0,0,0,$48,$63,0
02793  200A  48 
02793  200B  00 
02793  200C  00 
02793  200D  00 
02793  200E  48 
02793  200F  63 
02793  2010  00 
02794  2011  6C          .BYTE  $6C,$48,$63,0,$54,$48,$63,0
02794  2012  48 
02794  2013  63 
02794  2014  00 
02794  2015  54 
02794  2016  48 
02794  2017  63 
02794  2018  00 
02795  2019  24          .BYTE  $24,$48,0,0,0,$48,$63,0
02795  201A  48 
02795  201B  00 
02795  201C  00 
02795  201D  00 
02795  201E  48 






DISLIST.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02795  201F  63 
02795  2020  00 
02796  2021  30          .BYTE  $30,$48,0,0,0,$48,$63,0
02796  2022  48 
02796  2023  00 
02796  2024  00 
02796  2025  00 
02796  2026  48 
02796  2027  63 
02796  2028  00 
02797  2029  81          .BYTE  $81,3,0,0,0,3,$7B,0
02797  202A  03 
02797  202B  00 
02797  202C  00 
02797  202D  00 
02797  202E  03 
02797  202F  7B 
02797  2030  00 
02798  2031  72          .BYTE  $72,3,$7B,0,$54,3,$7B,0
02798  2032  03 
02798  2033  7B 
02798  2034  00 
02798  2035  54 
02798  2036  03 
02798  2037  7B 
02798  2038  00 
02799  2039  27          .BYTE  $27,3,0,0,0,3,$7B,0
02799  203A  03 
02799  203B  00 
02799  203C  00 
02799  203D  00 
02799  203E  03 
02799  203F  7B 
02799  2040  00 
02800  2041  8D          .BYTE  $8D,3,0,0,0,3,$7B,0
02800  2042  03 
02800  2043  00 
02800  2044  00 
02800  2045  00 
02800  2046  03 
02800  2047  7B 
02800  2048  00 
02801  2049  00          .BYTE  0,$90,0,0,$96,$90,$93,0
02801  204A  90 
02801  204B  00 
02801  204C  00 
02801  204D  96 
02801  204E  90 
02801  204F  93 
02801  2050  00 
02802  2051  45          .BYTE  $45,0,$A2,0,$96,$90,$93,0
02802  2052  00 
02802  2053  A2 
02802  2054  00 
02802  2055  96 






DISLIST.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02802  2056  90 
02802  2057  93 
02802  2058  00 
02803  2059  0C          .BYTE  $0C,$90,0,0,$96,$90,$93,0
02803  205A  90 
02803  205B  00 
02803  205C  00 
02803  205D  96 
02803  205E  90 
02803  205F  93 
02803  2060  00 
02804  2061  A8          .BYTE  $A8,$90,$A5,0,0,$90,0,0
02804  2062  90 
02804  2063  A5 
02804  2064  00 
02804  2065  00 
02804  2066  90 
02804  2067  00 
02804  2068  00 
02805  2069  60          .BYTE  $60,$5A,$5D,0,$60,$5A,$5D,0
02805  206A  5A 
02805  206B  5D 
02805  206C  00 
02805  206D  60 
02805  206E  5A 
02805  206F  5D 
02805  2070  00 
02806  2071  9C          .BYTE  $9C,$5A,$99,0,$60,$5A,$5D,0
02806  2072  5A 
02806  2073  99 
02806  2074  00 
02806  2075  60 
02806  2076  5A 
02806  2077  5D 
02806  2078  00 
02807  2079  0F          .BYTE  $0F,$5A,0,0,$60,$5A,$5D,0
02807  207A  5A 
02807  207B  00 
02807  207C  00 
02807  207D  60 
02807  207E  5A 
02807  207F  5D 
02807  2080  00 
02808  2081  33          .BYTE  $33,$5A,$9F,0,$60,$5A,$5D,0
02808  2082  5A 
02808  2083  9F 
02808  2084  00 
02808  2085  60 
02808  2086  5A 
02808  2087  5D 
02808  2088  00 
02809  2089  3C          .BYTE  $3C,$36,0,0,$3C,$36,$3F,0
02809  208A  36 
02809  208B  00 
02809  208C  00 






DISLIST.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02809  208D  3C 
02809  208E  36 
02809  208F  3F 
02809  2090  00 
02810  2091  51          .BYTE  $51,$36,$42,0,$3C,$36,$3F,0
02810  2092  36 
02810  2093  42 
02810  2094  00 
02810  2095  3C 
02810  2096  36 
02810  2097  3F 
02810  2098  00 
02811  2099  1B          .BYTE  $1B,$36,0,0,0,$36,$3F,0
02811  209A  36 
02811  209B  00 
02811  209C  00 
02811  209D  00 
02811  209E  36 
02811  209F  3F 
02811  20A0  00 
02812  20A1  2D          .BYTE  $2D,$36,0,0,0,$36,$3F,0
02812  20A2  36 
02812  20A3  00 
02812  20A4  00 
02812  20A5  00 
02812  20A6  36 
02812  20A7  3F 
02812  20A8  00 
02813  20A9  39          .BYTE  $39,$84,0,0,$39,$84,$4B,0
02813  20AA  84 
02813  20AB  00 
02813  20AC  00 
02813  20AD  39 
02813  20AE  84 
02813  20AF  4B 
02813  20B0  00 
02814  20B1  4E          .BYTE  $4E,$84,$66,0,$39,$84,$4B,0
02814  20B2  84 
02814  20B3  66 
02814  20B4  00 
02814  20B5  39 
02814  20B6  84 
02814  20B7  4B 
02814  20B8  00 
02815  20B9  12          .BYTE  $12,$84,0,0,0,$84,$4B,0
02815  20BA  84 
02815  20BB  00 
02815  20BC  00 
02815  20BD  00 
02815  20BE  84 
02815  20BF  4B 
02815  20C0  00 
02816  20C1  8A          .BYTE  $8A,$84,0,0,0,$84,$4B,0
02816  20C2  84 
02816  20C3  00 






DISLIST.ASM......PAGE 0059

LINE# LOC   CODE        LINE


02816  20C4  00 
02816  20C5  00 
02816  20C6  84 
02816  20C7  4B 
02816  20C8  00 
02817  20C9              ;*********************************
02818  20C9              ; TABLE OF ADDRESSING MODE CODES
02819  20C9              ;*********************************
02820  20C9              ;
02821  20C9              ; AN ADDRESSING MODE'S CODE IS
02822  20C9              ; ITS OFFSET INTO SUBS, THE TABLE
02823  20C9              ; OF ADDRESSING MODE SUBROUTINES
02824  20C9              ;
02825  20C9              ;*********************************
02826  20C9  12          MODES  .BYTE 18,22,0,0,0,6,6,0
02826  20CA  16 
02826  20CB  00 
02826  20CC  00 
02826  20CD  00 
02826  20CE  06 
02826  20CF  06 
02826  20D0  00 
02827  20D1  12          .BYTE  18,4,2,0,0,12,12,0
02827  20D2  04 
02827  20D3  02 
02827  20D4  00 
02827  20D5  00 
02827  20D6  0C 
02827  20D7  0C 
02827  20D8  00 
02828  20D9  14          .BYTE  20,24,0,0,0,8,8,0
02828  20DA  18 
02828  20DB  00 
02828  20DC  00 
02828  20DD  00 
02828  20DE  08 
02828  20DF  08 
02828  20E0  00 
02829  20E1  12          .BYTE  18,16,0,0,0,14,14,0
02829  20E2  10 
02829  20E3  00 
02829  20E4  00 
02829  20E5  00 
02829  20E6  0E 
02829  20E7  0E 
02829  20E8  00 
02830  20E9  0C          .BYTE  12,22,0,0,6,6,6,0
02830  20EA  16 
02830  20EB  00 
02830  20EC  00 
02830  20ED  06 
02830  20EE  06 
02830  20EF  06 
02830  20F0  00 
02831  20F1  12          .BYTE  18,4,2,0,12,12,12,0






DISLIST.ASM......PAGE 0060

LINE# LOC   CODE        LINE


02831  20F2  04 
02831  20F3  02 
02831  20F4  00 
02831  20F5  0C 
02831  20F6  0C 
02831  20F7  0C 
02831  20F8  00 
02832  20F9  14          .BYTE  20,24,0,0,0,8,8,0
02832  20FA  18 
02832  20FB  00 
02832  20FC  00 
02832  20FD  00 
02832  20FE  08 
02832  20FF  08 
02832  2100  00 
02833  2101  12          .BYTE  18,16,0,0,0,14,14,0
02833  2102  10 
02833  2103  00 
02833  2104  00 
02833  2105  00 
02833  2106  0E 
02833  2107  0E 
02833  2108  00 
02834  2109  12          .BYTE  18,22,0,0,0,6,6,0
02834  210A  16 
02834  210B  00 
02834  210C  00 
02834  210D  00 
02834  210E  06 
02834  210F  06 
02834  2110  00 
02835  2111  12          .BYTE  18,4,2,0,12,12,12,0
02835  2112  04 
02835  2113  02 
02835  2114  00 
02835  2115  0C 
02835  2116  0C 
02835  2117  0C 
02835  2118  00 
02836  2119  14          .BYTE  20,24,0,0,0,8,8,0
02836  211A  18 
02836  211B  00 
02836  211C  00 
02836  211D  00 
02836  211E  08 
02836  211F  08 
02836  2120  00 
02837  2121  12          .BYTE  18,16,0,0,0,14,14,0
02837  2122  10 
02837  2123  00 
02837  2124  00 
02837  2125  00 
02837  2126  0E 
02837  2127  0E 
02837  2128  00 






DISLIST.ASM......PAGE 0061

LINE# LOC   CODE        LINE


02838  2129  12          .BYTE  18,22,0,0,0,6,6,0
02838  212A  16 
02838  212B  00 
02838  212C  00 
02838  212D  00 
02838  212E  06 
02838  212F  06 
02838  2130  00 
02839  2131  12          .BYTE  18,4,2,0,26,12,12,0
02839  2132  04 
02839  2133  02 
02839  2134  00 
02839  2135  1A 
02839  2136  0C 
02839  2137  0C 
02839  2138  00 
02840  2139  14          .BYTE  20,24,0,0,0,8,8,0
02840  213A  18 
02840  213B  00 
02840  213C  00 
02840  213D  00 
02840  213E  08 
02840  213F  08 
02840  2140  00 
02841  2141  12          .BYTE  18,16,0,0,0,14,14,0
02841  2142  10 
02841  2143  00 
02841  2144  00 
02841  2145  00 
02841  2146  0E 
02841  2147  0E 
02841  2148  00 
02842  2149  00          .BYTE  0,22,0,0,6,6,6,0
02842  214A  16 
02842  214B  00 
02842  214C  00 
02842  214D  06 
02842  214E  06 
02842  214F  06 
02842  2150  00 
02843  2151  12          .BYTE  18,0,18,0,12,12,12,0
02843  2152  00 
02843  2153  12 
02843  2154  00 
02843  2155  0C 
02843  2156  0C 
02843  2157  0C 
02843  2158  00 
02844  2159  14          .BYTE  20,24,0,0,8,8,10,0
02844  215A  18 
02844  215B  00 
02844  215C  00 
02844  215D  08 
02844  215E  08 
02844  215F  0A 






DISLIST.ASM......PAGE 0062

LINE# LOC   CODE        LINE


02844  2160  00 
02845  2161  12          .BYTE  18,16,18,0,0,14,0,0
02845  2162  10 
02845  2163  12 
02845  2164  00 
02845  2165  00 
02845  2166  0E 
02845  2167  00 
02845  2168  00 
02846  2169  04          .BYTE  4,22,4,0,6,6,6,0
02846  216A  16 
02846  216B  04 
02846  216C  00 
02846  216D  06 
02846  216E  06 
02846  216F  06 
02846  2170  00 
02847  2171  12          .BYTE  18,4,18,0,12,12,12,0
02847  2172  04 
02847  2173  12 
02847  2174  00 
02847  2175  0C 
02847  2176  0C 
02847  2177  0C 
02847  2178  00 
02848  2179  14          .BYTE  20,24,0,0,8,8,10,0
02848  217A  18 
02848  217B  00 
02848  217C  00 
02848  217D  08 
02848  217E  08 
02848  217F  0A 
02848  2180  00 
02849  2181  12          .BYTE  18,16,18,0,14,14,16,0
02849  2182  10 
02849  2183  12 
02849  2184  00 
02849  2185  0E 
02849  2186  0E 
02849  2187  10 
02849  2188  00 
02850  2189  04          .BYTE  4,22,0,0,6,6,6,0
02850  218A  16 
02850  218B  00 
02850  218C  00 
02850  218D  06 
02850  218E  06 
02850  218F  06 
02850  2190  00 
02851  2191  12          .BYTE  18,4,18,0,12,12,12,0
02851  2192  04 
02851  2193  12 
02851  2194  00 
02851  2195  0C 
02851  2196  0C 






DISLIST.ASM......PAGE 0063

LINE# LOC   CODE        LINE


02851  2197  0C 
02851  2198  00 
02852  2199  14          .BYTE  20,24,0,0,0,8,8,0
02852  219A  18 
02852  219B  00 
02852  219C  00 
02852  219D  00 
02852  219E  08 
02852  219F  08 
02852  21A0  00 
02853  21A1  12          .BYTE  18,16,0,0,0,14,14,0
02853  21A2  10 
02853  21A3  00 
02853  21A4  00 
02853  21A5  00 
02853  21A6  0E 
02853  21A7  0E 
02853  21A8  00 
02854  21A9  04          .BYTE  4,22,0,0,6,6,6,0
02854  21AA  16 
02854  21AB  00 
02854  21AC  00 
02854  21AD  06 
02854  21AE  06 
02854  21AF  06 
02854  21B0  00 
02855  21B1  12          .BYTE  18,4,18,0,12,12,12,0
02855  21B2  04 
02855  21B3  12 
02855  21B4  00 
02855  21B5  0C 
02855  21B6  0C 
02855  21B7  0C 
02855  21B8  00 
02856  21B9  14          .BYTE  20,24,0,0,0,8,8,0
02856  21BA  18 
02856  21BB  00 
02856  21BC  00 
02856  21BD  00 
02856  21BE  08 
02856  21BF  08 
02856  21C0  00 
02857  21C1  12          .BYTE  18,16,0,0,0,14,14,0
02857  21C2  10 
02857  21C3  00 
02857  21C4  00 
02857  21C5  00 
02857  21C6  0E 
02857  21C7  0E 
02857  21C8  00 
02858  21C9              ;*********************************
02859  21C9              .FIL   0:SYM.ASM
02860  21C9              ;*********************************
02861  21C9              ; SYMBOLIC ROUTINES
02862  21C9              ;*********************************






DISLIST.ASM......PAGE 0064

LINE# LOC   CODE        LINE


02863  21C9              ; SYMBOLIC DISASSEMBLY OPTION
02864  21C9              ;*********************************
02865  21C9  A9 36       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
02866  21CB  A0 25              LDY #>MSS1      ;HIGH BYTE MESSAGE
02867  21CD  20 52 13           JSR STRPNT      ;OUTPUT MESSAGE
02868  21D0  20 27 13           JSR CRNO        ;GET KEY PRESS
02869  21D3  90 08              BCC SOP1        ;C=0 YES
02870  21D5              ;*********************************
02871  21D5              ; ABSOLUTE DISASSEMBLY SELECTED
02872  21D5              ;*********************************
02873  21D5  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
02874  21D7  8D 38 08           STA SYMBOL      ;STORE FLAG
02875  21DA  4C 26 22           JMP SY          ;FOR INTERNAL
02876  21DD              ;*********************************
02877  21DD              ; SYMBOLIC DISASSEMBLY SELECTED
02878  21DD              ;*********************************
02879  21DD  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
02880  21DF  8D 38 08           STA SYMBOL      ;STORE FLAG
02881  21E2              ;*********************************
02882  21E2              ; SETUP START OF TABLE POINTER
02883  21E2              ;*********************************
02884  21E2  A9 4B              LDA #<STABLE
02885  21E4  8D 3B 08           STA SYMBOS
02886  21E7  8D 39 08           STA SYMBOP
02887  21EA  A9 2E              LDA #>STABLE
02888  21EC  8D 3C 08           STA SYMBOS+1
02889  21EF  8D 3A 08           STA SYMBOP+1
02890  21F2              ;*********************************
02891  21F2              ; CHECK FOR SYMBOL TABLE OPTION
02892  21F2              ;*********************************
02893  21F2  A9 5A       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
02894  21F4  A0 25              LDY #>MSS2      ;HIGH BYTE MESSAGE
02895  21F6  20 52 13           JSR STRPNT      ;OUTPUT MESSAGE
02896  21F9  20 27 13           JSR CRNO        ;GET KEY PRESS
02897  21FC  B0 28              BCS SY          ;C=1 NO
02898  21FE              ;*********************************
02899  21FE              ; APPEND SYMBOL TABLE
02900  21FE              ;*********************************
02901  21FE  A9 9E              LDA #<MSS4
02902  2200  A0 25              LDY #>MSS4
02903  2202  20 52 13           JSR STRPNT
02904  2205  20 27 13           JSR CRNO
02905  2208  B0 0A              BCS SOP4
02906  220A  A9 CE              LDA #<UTABLE
02907  220C  8D 39 08           STA SYMBOP
02908  220F  A9 2F              LDA #>UTABLE
02909  2211  8D 3A 08           STA SYMBOP+1
02910  2214              ;*********************************
02911  2214              ; GO AND LOAD TABLE
02912  2214              ;*********************************
02913  2214  20 B9 23    SOP4   JSR READXX      ;READ FILE
02914  2217  B0 0D              BCS SY          ;C=1 ERROR
02915  2219              ;*********************************
02916  2219              ; SETUP END OF TABLE POINTER
02917  2219              ;*********************************






DISLIST.ASM......PAGE 0065

LINE# LOC   CODE        LINE


02918  2219  AD 39 08           LDA SYMBOP      ;XREF POINTER
02919  221C  8D 3D 08           STA SYMBOE
02920  221F  AD 3A 08           LDA SYMBOP+1
02921  2222  8D 3E 08           STA SYMBOE+1
02922  2225  60                 RTS
02923  2226              ;*********************************
02924  2226              ; DEFAULT SYMBOL TABLE END
02925  2226              ;*********************************
02926  2226  A9 CE       SY     LDA #<UTABLE
02927  2228  8D 3D 08           STA SYMBOE
02928  222B  A9 2F              LDA #>UTABLE
02929  222D  8D 3E 08           STA SYMBOE+1
02930  2230  60                 RTS
02931  2231              ;*********************************
02932  2231              ; SET OR RESET SYMBOL TABLE
02933  2231              ;*********************************
02934  2231  AD 3B 08    SSET   LDA SYMBOS
02935  2234  8D 39 08           STA SYMBOP
02936  2237  AD 3C 08           LDA SYMBOS+1
02937  223A  8D 3A 08           STA SYMBOP+1
02938  223D  60                 RTS
02939  223E              ;*********************************
02940  223E              ; EQUATE TABLE SETUP
02941  223E              ;*********************************
02942  223E  AD 32 08    EQUINT LDA TABINE
02943  2241  8D 2E 08           STA TABINP
02944  2244  8D 30 08           STA TABINS
02945  2247  AD 33 08           LDA TABINE+1
02946  224A  8D 2F 08           STA TABINP+1
02947  224D  8D 31 08           STA TABINS+1
02948  2250  60                 RTS
02949  2251              ;*********************************
02950  2251              ; ENTRY POINT FOR ADDRESS
02951  2251              ;*********************************
02952  2251  AD 38 08    SYM    LDA SYMBOL
02953  2254  F0 43              BEQ SYMEND
02954  2256  AD 22 08           LDA SELECT      ;COPY SELECT
02955  2259  8D 45 08           STA WORKED      ;ADDRESS INTO
02956  225C  AD 23 08           LDA SELECT+1    ;WORKED
02957  225F  8D 46 08           STA WORKED+1
02958  2262  4C 6A 22           JMP SYM1        ;CHECK FOR MATCH
02959  2265              ;*********************************
02960  2265              ; ENTRY POINT FOR OPCODES
02961  2265              ;*********************************
02962  2265  AD 38 08    SYMOP  LDA SYMBOL
02963  2268  F0 2F              BEQ SYMEND
02964  226A              ;*********************************
02965  226A              ; COMPARE ADDRESS TO SYMBOL TABLE
02966  226A              ;*********************************
02967  226A  20 31 22    SYM1   JSR SSET
02968  226D  20 3A 23    SYM2   JSR GETC
02969  2270  8D 48 08           STA WORKER+1
02970  2273  20 31 23           JSR INCC
02971  2276  20 3A 23           JSR GETC
02972  2279  8D 47 08           STA WORKER






DISLIST.ASM......PAGE 0066

LINE# LOC   CODE        LINE


02973  227C              ;*********************************
02974  227C  38                 SEC             ;SET CARRY
02975  227D  AD 47 08           LDA WORKER
02976  2280  ED 45 08           SBC WORKED      ;SUB FROM LOW
02977  2283  8D 51 08           STA TEMP        ;STORE RESULT
02978  2286  AD 48 08           LDA WORKER+1
02979  2289  ED 46 08           SBC WORKED+1    ;SUB FROM HIGH
02980  228C  0D 51 08           ORA TEMP        ;OR RESULTS
02981  228F  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
02982  2291  20 0D 23           JSR NEXTC       ;IF NOT NEXT
02983  2294  B0 03              BCS SYMEND      ;END OF TABLE?
02984  2296  4C 6D 22           JMP SYM2        ;NO CHECK NEXT
02985  2299  18          SYMEND CLC             ;NO MATCHES CLEAR
02986  229A  60                 RTS             ;RETURN
02987  229B              ;*********************************
02988  229B              ; FOUND MATCH
02989  229B              ;*********************************
02990  229B  AD 12 08    MATCH  LDA PASS        ;CHECK PASS
02991  229E  CD 15 08           CMP CPASS       ;IS IT LAST
02992  22A1  F0 18              BEQ MATCHS      ;IF SO PRINT
02993  22A3  CD 16 08           CMP SPASS
02994  22A6  F0 3A              BEQ MATCHT
02995  22A8  20 51 19           JSR RANGE       ;SYMBOL IN RANGE
02996  22AB  90 3F              BCC MATEXT      ;NO INTERNAL EQ
02997  22AD  20 31 23           JSR INCC        ;INC TO SYMBOL
02998  22B0  20 3A 23           JSR GETC        ;GET FIRST CHAR
02999  22B3  C9 20              CMP #$20        ;SPACE
03000  22B5  F0 03              BEQ MATONE      ;NOT EQUATE
03001  22B7  4C C8 19           JMP PUTI        ;PUT IN EQUATE
03002  22BA  60          MATONE RTS             ;RETURN
03003  22BB              ;*********************************
03004  22BB              ; CHECK FOR SYMBOL+1
03005  22BB              ;*********************************
03006  22BB  20 31 23    MATCHS JSR INCC        ;INC TO LABEL
03007  22BE  20 3A 23           JSR GETC        ;GET CHARARCTER
03008  22C1  C9 20              CMP #$20        ;IS IT SPACE
03009  22C3  D0 1D              BNE MATCHT      ;IF NOT GO ON
03010  22C5  38                 SEC             ;SET CARRY
03011  22C6  AD 39 08           LDA SYMBOP      ;GET LOW POINT
03012  22C9  E9 09              SBC #$09        ;LAST SYMBOL
03013  22CB  48                 PHA             ;PUSH ON STACK
03014  22CC  AD 3A 08           LDA SYMBOP+1    ;GET HIGH POINT
03015  22CF  E9 00              SBC #$00        ;LAST SYMBOL
03016  22D1  A8                 TAY             ;PUT IN Y
03017  22D2  68                 PLA             ;GET LO POINT
03018  22D3  20 ED 22           JSR STRSYM      ;PRINT SYMBOL
03019  22D6  A9 2B              LDA #'+'         ;ASCII +
03020  22D8  20 A8 13           JSR PCHAR       ;PRINT IT
03021  22DB  A9 31              LDA #'1'         ;ASCII 1
03022  22DD  20 A8 13           JSR PCHAR       ;PRINT IT
03023  22E0  38                 SEC             ;C=1 SYMBOL
03024  22E1  60                 RTS             ;RETURN
03025  22E2              ;*********************************
03026  22E2  AD 39 08    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03027  22E5  AC 3A 08           LDY SYMBOP+1    ;HIGH BYTE LABEL






DISLIST.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03028  22E8  20 ED 22           JSR STRSYM      ;PRINT LABEL
03029  22EB              ;*********************************
03030  22EB  38                 SEC             ;MATCH SET CARRY
03031  22EC  60          MATEXT RTS             ;RETURN
03032  22ED              ;*********************************
03033  22ED              ; PRINT SYMBOL
03034  22ED              ;*********************************
03035  22ED  85 02       STRSYM STA ZEROUR
03036  22EF  84 03              STY ZEROUR+1
03037  22F1  A0 00              LDY #$00
03038  22F3  B1 02       STRSY1 LDA (ZEROUR),Y
03039  22F5  F0 0A              BEQ SYEXIT
03040  22F7  C9 20              CMP #$20
03041  22F9  F0 06              BEQ SYEXIT
03042  22FB  20 A8 13           JSR PCHAR
03043  22FE  C8                 INY
03044  22FF  D0 F2              BNE STRSY1
03045  2301  60          SYEXIT RTS
03046  2302  B1 02       FIXSYM LDA (ZEROUR),Y
03047  2304  F0 FB              BEQ SYEXIT
03048  2306  20 A8 13           JSR PCHAR
03049  2309  C8                 INY
03050  230A  4C 02 23           JMP FIXSYM
03051  230D              ;*********************************
03052  230D              ; INC SYMBOL ADDRESS TABLE POINTER
03053  230D              ;*********************************
03054  230D  18          NEXTC  CLC
03055  230E  AD 39 08           LDA SYMBOP
03056  2311  69 08              ADC #$08
03057  2313  8D 39 08           STA SYMBOP
03058  2316  AD 3A 08           LDA SYMBOP+1
03059  2319  69 00              ADC #$00
03060  231B  8D 3A 08           STA SYMBOP+1
03061  231E  CD 3E 08           CMP SYMBOE+1
03062  2321  90 0A              BCC COK
03063  2323  D0 0A              BNE NCOK
03064  2325  AD 39 08           LDA SYMBOP
03065  2328  CD 3D 08           CMP SYMBOE
03066  232B  B0 02              BCS NCOK
03067  232D  18          COK    CLC
03068  232E  60                 RTS
03069  232F  38          NCOK   SEC
03070  2330  60                 RTS
03071  2331              ;*********************************
03072  2331  EE 39 08    INCC   INC SYMBOP
03073  2334  D0 03              BNE *+5
03074  2336  EE 3A 08           INC SYMBOP+1
03075  2339  60                 RTS
03076  233A              ;*********************************
03077  233A              ; GET BYTE FROM ADDRESS TABLE
03078  233A              ;*********************************
03079  233A  AD 39 08    GETC   LDA SYMBOP
03080  233D  85 02              STA ZEROUR
03081  233F  AD 3A 08           LDA SYMBOP+1
03082  2342  85 03              STA ZEROUR+1






DISLIST.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03083  2344  A0 00              LDY #$00
03084  2346  B1 02              LDA (ZEROUR),Y
03085  2348  60                 RTS
03086  2349              ;*********************************
03087  2349              ; PRINT EQUATE TABLE
03088  2349              ;*********************************
03089  2349  38          EQUPRT SEC
03090  234A  AD 30 08           LDA TABINS
03091  234D  ED 32 08           SBC TABINE
03092  2350  8D 51 08           STA TEMP
03093  2353  AD 31 08           LDA TABINS+1
03094  2356  ED 33 08           SBC TABINE+1
03095  2359  0D 51 08           ORA TEMP
03096  235C  F0 55              BEQ EQUEND
03097  235E  20 73 1A           JSR SORT
03098  2361  20 84 17           JSR COMENT
03099  2364  20 3E 19           JSR PRTOTH
03100  2367  A9 30              LDA #<EQUATE
03101  2369  A0 26              LDY #>EQUATE
03102  236B  20 52 13           JSR STRPNT
03103  236E  20 95 12           JSR NEWLIN
03104  2371  20 84 17           JSR COMENT
03105  2374  20 18 1A    EQUOP  JSR GETI
03106  2377  8D 45 08           STA WORKED
03107  237A  20 0F 1A           JSR INCI
03108  237D  20 18 1A           JSR GETI
03109  2380  8D 46 08           STA WORKED+1
03110  2383  20 3E 19           JSR PRTOTH
03111  2386  20 65 22           JSR SYMOP
03112  2389  B0 03              BCS EQUOP1
03113  238B  20 E2 17           JSR PWORK
03114  238E  A9 3D       EQUOP1 LDA #'='
03115  2390  20 A8 13           JSR PCHAR
03116  2393  A9 24              LDA #'$'
03117  2395  20 A8 13           JSR PCHAR
03118  2398  20 E5 17           JSR PWORKD
03119  239B  20 95 12           JSR NEWLIN
03120  239E              ;*********************************
03121  239E  20 0F 1A           JSR INCI
03122  23A1  AD 2F 08           LDA TABINP+1
03123  23A4  CD 33 08           CMP TABINE+1
03124  23A7  90 CB              BCC EQUOP
03125  23A9  D0 08              BNE EQUEND
03126  23AB  AD 2E 08           LDA TABINP
03127  23AE  CD 32 08           CMP TABINE
03128  23B1  90 C1              BCC EQUOP
03129  23B3              ;*********************************
03130  23B3  20 84 17    EQUEND JSR COMENT
03131  23B6  4C AF 19           JMP RESINT
03132  23B9              ;*********************************
03133  23B9              ; READ CROSS REFERENCE SEQ FILE
03134  23B9              ;      INTO SYMBOL TABLE
03135  23B9              ;*********************************
03136  23B9              ; READ FILE NAME DEFAULT ON CR
03137  23B9              ;*********************************






DISLIST.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03138  23B9  A9 80       READXX LDA #<MSS3
03139  23BB  A0 25              LDY #>MSS3
03140  23BD  20 52 13           JSR STRPNT
03141  23C0  20 E4 FF    SOP2   JSR GETIN
03142  23C3  F0 FB              BEQ SOP2
03143  23C5  C9 30              CMP #'0'
03144  23C7  F0 04              BEQ SOP3
03145  23C9  C9 31              CMP #'1'
03146  23CB  D0 F3              BNE SOP2
03147  23CD  20 D2 FF    SOP3   JSR CHROUT
03148  23D0  8D E6 08           STA TEXTER
03149  23D3              ;*********************************
03150  23D3  A9 C2              LDA #<LOADF
03151  23D5  A0 25              LDY #>LOADF
03152  23D7  20 52 13           JSR STRPNT
03153  23DA              ;*********************************
03154  23DA  20 B3 12           JSR INSTNG
03155  23DD  F0 20              BEQ READXF
03156  23DF  98                 TYA
03157  23E0  48                 PHA
03158  23E1  20 AB 0C           JSR INITD
03159  23E4  68                 PLA
03160  23E5  A8                 TAY
03161  23E6  A2 00              LDX #$00
03162  23E8  BD 32 25    XFILE1 LDA NAMS,X
03163  23EB  99 5C 08           STA BUF,Y
03164  23EE  C8                 INY
03165  23EF  E8                 INX
03166  23F0  E0 04              CPX #$04
03167  23F2  D0 F4              BNE XFILE1
03168  23F4  98                 TYA
03169  23F5  A0 08              LDY #>BUF
03170  23F7  A2 5C              LDX #<BUF
03171  23F9  20 BD FF           JSR SETNAM
03172  23FC  4C 08 24           JMP REOPEN
03173  23FF              ;*********************************
03174  23FF              ; DEFAULT FILENAME XRFF0000
03175  23FF              ;********************************
03176  23FF  A9 0E       READXF LDA #$0E
03177  2401  A0 25              LDY #>NAME
03178  2403  A2 28              LDX #<NAME
03179  2405  20 BD FF           JSR SETNAM
03180  2408              ;*********************************
03181  2408              ; OPEN FILE
03182  2408              ;********************************
03183  2408  A9 03       REOPEN LDA #$03
03184  240A  A2 08              LDX #$08
03185  240C  A0 03              LDY #$03
03186  240E  20 BA FF           JSR SETLFS
03187  2411  20 C0 FF           JSR OPEN
03188  2414              ;********************************
03189  2414              ; CHECK FOR DISK ERROR
03190  2414              ;*********************************
03191  2414  20 5B 12           JSR DISERR
03192  2417  B0 3F              BCS QUITXX






DISLIST.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03193  2419              ;*********************************
03194  2419              ; OUTPUT LOADING MESSAGE
03195  2419              ;*********************************
03196  2419  A9 E0              LDA #<LOADM     ;MSG LOW
03197  241B  A0 25              LDY #>LOADM     ;MSG HIGH
03198  241D  20 52 13           JSR STRPNT      ;OUTPUT MSG
03199  2420              ;*********************************
03200  2420  A9 00              LDA #$00        ;COL COUNTER
03201  2422  8D 51 08           STA TEMP
03202  2425              ;*********************************
03203  2425              ; INPUT AND LOAD SYMBOL TABLE
03204  2425              ;*********************************
03205  2425  20 69 24    READX  JSR READS       ;INPUT SYMBOL
03206  2428  20 E7 24           JSR PUTC
03207  242B  20 0F 25           JSR LINES       ;SCREEN OUT
03208  242E  20 E1 FF           JSR STOP
03209  2431  F0 05              BEQ QUITX
03210  2433  20 B7 FF           JSR READST
03211  2436  F0 ED              BEQ READX
03212  2438              ;*********************************
03213  2438              ;    CLOSE OPEN FILE
03214  2438              ;*********************************
03215  2438  A9 03       QUITX  LDA #$03
03216  243A  20 C3 FF           JSR CLOSE
03217  243D  20 CC FF           JSR CLRCHN
03218  2440  20 16 18           JSR CRLF
03219  2443              ;*********************************
03220  2443              ; SET END OF TABLE
03221  2443              ;*********************************
03222  2443  AD 39 08           LDA SYMBOP
03223  2446  8D 3D 08           STA SYMBOE
03224  2449  AD 3A 08           LDA SYMBOP+1
03225  244C  8D 3E 08           STA SYMBOE+1
03226  244F              ;*********************************
03227  244F              ; OUTPUT LOADED MESSAGE
03228  244F              ;*********************************
03229  244F  A9 FE              LDA #<LOADC
03230  2451  A0 25              LDY #>LOADC
03231  2453  20 52 13           JSR STRPNT
03232  2456  18                 CLC
03233  2457  60                 RTS
03234  2458              ;*********************************
03235  2458              ; OUTPUT ERROR MESSAGE
03236  2458              ;*********************************
03237  2458  A9 03       QUITXX LDA #$03
03238  245A  20 C3 FF           JSR CLOSE
03239  245D  20 CC FF           JSR CLRCHN
03240  2460  A9 15              LDA #<LOADE
03241  2462  A0 26              LDY #>LOADE
03242  2464  20 52 13           JSR STRPNT
03243  2467  38                 SEC
03244  2468  60                 RTS
03245  2469              ;*********************************
03246  2469              ; READ SYMBOL FROM FILE
03247  2469              ;*********************************






DISLIST.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03248  2469  A2 03       READS  LDX #$03        ;FILE NUMBER
03249  246B  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03250  246E  A0 02              LDY #$02        ;COUNTER
03251  2470  20 CF FF           JSR CHRIN       ;INPUT CHAR
03252  2473  99 DA 08           STA SYMBUF,Y    ;1ST CHAR
03253  2476  20 D2 FF           JSR CHROUT      ;PRITN IT
03254  2479  C8                 INY             ;INC POINTER
03255  247A  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03256  247D  99 DA 08           STA SYMBUF,Y    ;STORE
03257  2480  20 D2 FF           JSR CHROUT      ;PRINT IT
03258  2483  C8                 INY             ;INC OFFSET
03259  2484  C0 08              CPY #$08        ;8 IS FOR NULL
03260  2486  D0 F2              BNE READY       ;BRANCH IF NOT
03261  2488  A9 00              LDA #$00        ;NULL MARKER
03262  248A  99 DA 08           STA SYMBUF,Y    ;STORE AT END
03263  248D              ;*********************************
03264  248D  20 28 18           JSR SPACE       ;PRINT SPACE
03265  2490  20 F3 17           JSR DOLLAR      ;PRINT $ SIGN
03266  2493              ;*********************************
03267  2493  AD E6 08           LDA TEXTER
03268  2496  C9 30              CMP #'0'
03269  2498  F0 2F              BEQ STDREF
03270  249A              ;*********************************
03271  249A  A0 00              LDY #$00
03272  249C  20 A9 24           JSR XGET
03273  249F  C8                 INY
03274  24A0  20 A9 24           JSR XGET
03275  24A3  20 CF FF           JSR CHRIN       ;GET $0D
03276  24A6  4C CC FF           JMP CLRCHN
03277  24A9              ;*********************************
03278  24A9  20 CF FF    XGET   JSR CHRIN
03279  24AC  20 D2 FF           JSR CHROUT
03280  24AF  20 03 13           JSR BINARY
03281  24B2  0A                 ASL A
03282  24B3  0A                 ASL A
03283  24B4  0A                 ASL A
03284  24B5  0A                 ASL A
03285  24B6  99 DA 08           STA SYMBUF,Y
03286  24B9  20 CF FF           JSR CHRIN
03287  24BC  20 D2 FF           JSR CHROUT
03288  24BF  20 03 13           JSR BINARY
03289  24C2  19 DA 08           ORA SYMBUF,Y
03290  24C5  99 DA 08           STA SYMBUF,Y
03291  24C8  60                 RTS
03292  24C9              ;*********************************
03293  24C9  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03294  24CB  20 CF FF           JSR CHRIN       ;HIGH BYTES
03295  24CE  99 DA 08           STA SYMBUF,Y    ;
03296  24D1  8C 54 08           STY SAVY        ;
03297  24D4  20 3C 13           JSR PRBYT       ;
03298  24D7  AC 54 08           LDY SAVY        ;
03299  24DA  C8                 INY             ;
03300  24DB  20 CF FF           JSR CHRIN       ;LOW BYTE
03301  24DE  99 DA 08           STA SYMBUF,Y    ;
03302  24E1  20 3C 13           JSR PRBYT       ;






DISLIST.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03303  24E4  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03304  24E7              ;*********************************
03305  24E7              ; MOVE SYMBOL FROM BUFFER TO TABLE
03306  24E7              ;*********************************
03307  24E7  A0 00       PUTC   LDY #$00
03308  24E9  AD 39 08           LDA SYMBOP
03309  24EC  85 02              STA ZEROUR
03310  24EE  AD 3A 08           LDA SYMBOP+1
03311  24F1  85 03              STA ZEROUR+1
03312  24F3  B9 DA 08    PUT    LDA SYMBUF,Y
03313  24F6  91 02              STA (ZEROUR),Y
03314  24F8  C8                 INY
03315  24F9  C0 09              CPY #$09
03316  24FB  D0 F6              BNE PUT
03317  24FD  18                 CLC
03318  24FE  AD 39 08           LDA SYMBOP
03319  2501  69 09              ADC #$09
03320  2503  8D 39 08           STA SYMBOP
03321  2506  AD 3A 08           LDA SYMBOP+1
03322  2509  69 00              ADC #$00
03323  250B  8D 3A 08           STA SYMBOP+1
03324  250E  60                 RTS
03325  250F              ;*********************************
03326  250F              ; OUTPUT SYMBOL IN 4 COLUMNS
03327  250F              ;*********************************
03328  250F  EE 51 08    LINES  INC TEMP
03329  2512  A9 03              LDA #$03
03330  2514  CD 51 08           CMP TEMP
03331  2517  F0 05              BEQ RESET
03332  2519  A9 2E              LDA #'.'
03333  251B  4C D2 FF           JMP CHROUT
03334  251E  A9 00       RESET  LDA #$00
03335  2520  8D 51 08           STA TEMP
03336  2523  A9 0D              LDA #$0D
03337  2525  4C D2 FF           JMP CHROUT
03338  2528              ;*********************************
03339  2528              ;   COMMAND MESSAGES
03340  2528              ;*********************************
03341  2528  30 3A       NAME   .BYTE '0:XRLL0000'
03342  2532  2C 53       NAMS   .BYTE ',S,R'
03343  2536              ;*********************************
03344  2536  0D          MSS1   .BYTE $0D
03345  2537  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '

03346  2559  00                 .BYTE 0
03347  255A  0D          MSS2   .BYTE $0D
03348  255B  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03349  257F  00                 .BYTE 0
03350  2580  0D          MSS3   .BYTE $0D
03351  2581  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03352  259D  00                 .BYTE 0
03353  259E  0D          MSS4   .BYTE $0D
03354  259F  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03355  25C1  00                 .BYTE 0
03356  25C2  0D          LOADF  .BYTE $0D
03357  25C3  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '






DISLIST.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03358  25DF  00          .BYTE  0
03359  25E0  0D          LOADM  .BYTE $0D,$0D
03359  25E1  0D 
03360  25E2  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03361  25FB  0D          .BYTE  $0D,$0D
03361  25FC  0D 
03362  25FD  00          .BYTE  0
03363  25FE  0D          LOADC  .BYTE $0D
03364  25FF  53 59       .BYTE  'SYMBOL TABLE LOADED'
03365  2612  0D          .BYTE  $0D,$0D
03365  2613  0D 
03366  2614  00          .BYTE  0
03367  2615  0D          LOADE  .BYTE $0D
03368  2616  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03369  262D  0D          .BYTE  $0D,$0D
03369  262E  0D 
03370  262F  00          .BYTE  0
03371  2630              ;*********************************
03372  2630  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03373  264A  00                 .BYTE 0
03374  264B              ;*********************************
03375  264B              ; PATCH CODE AREA
03376  264B              ;*********************************
03377  264B              *=*+$0800
03378  2E4B              ;*********************************
03379  2E4B              ; SYMBOL TABLE
03380  2E4B              ;*********************************
03381  2E4B              ;  KERNAL JUMP TABLE
03382  2E4B              ;*********************************
03383  2E4B  FF          STABLE .BYTE $FF,$80,'IDBYTE',0
03383  2E4C  80 
03383  2E4D  49 44 
03383  2E53  00 
03384  2E54  FF                 .BYTE $FF,$81,'CINT  ',0
03384  2E55  81 
03384  2E56  43 49 
03384  2E5C  00 
03385  2E5D  FF                 .BYTE $FF,$84,'IOINIT',0
03385  2E5E  84 
03385  2E5F  49 4F 
03385  2E65  00 
03386  2E66  FF                 .BYTE $FF,$87,'RAMTAS',0
03386  2E67  87 
03386  2E68  52 41 
03386  2E6E  00 
03387  2E6F  FF                 .BYTE $FF,$8A,'RESTOR',0
03387  2E70  8A 
03387  2E71  52 45 
03387  2E77  00 
03388  2E78  FF                 .BYTE $FF,$8D,'VECTOR',0
03388  2E79  8D 
03388  2E7A  56 45 
03388  2E80  00 
03389  2E81  FF                 .BYTE $FF,$90,'SETMSG',0
03389  2E82  90 






DISLIST.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03389  2E83  53 45 
03389  2E89  00 
03390  2E8A  FF                 .BYTE $FF,$93,'SECOND',0
03390  2E8B  93 
03390  2E8C  53 45 
03390  2E92  00 
03391  2E93  FF                 .BYTE $FF,$96,'TKSA  ',0
03391  2E94  96 
03391  2E95  54 4B 
03391  2E9B  00 
03392  2E9C  FF                 .BYTE $FF,$99,'MEMTOP',0
03392  2E9D  99 
03392  2E9E  4D 45 
03392  2EA4  00 
03393  2EA5  FF                 .BYTE $FF,$9C,'MEMBOT',0
03393  2EA6  9C 
03393  2EA7  4D 45 
03393  2EAD  00 
03394  2EAE  FF                 .BYTE $FF,$9F,'SCNKEY',0
03394  2EAF  9F 
03394  2EB0  53 43 
03394  2EB6  00 
03395  2EB7  FF                 .BYTE $FF,$A2,'SETTMO',0
03395  2EB8  A2 
03395  2EB9  53 45 
03395  2EBF  00 
03396  2EC0  FF                 .BYTE $FF,$A5,'ACPTR ',0
03396  2EC1  A5 
03396  2EC2  41 43 
03396  2EC8  00 
03397  2EC9  FF                 .BYTE $FF,$A8,'CIOUT ',0
03397  2ECA  A8 
03397  2ECB  43 49 
03397  2ED1  00 
03398  2ED2  FF                 .BYTE $FF,$AB,'UNTLK ',0
03398  2ED3  AB 
03398  2ED4  55 4E 
03398  2EDA  00 
03399  2EDB  FF                 .BYTE $FF,$AE,'UNLSN ',0
03399  2EDC  AE 
03399  2EDD  55 4E 
03399  2EE3  00 
03400  2EE4  FF                 .BYTE $FF,$B1,'LISTEN',0
03400  2EE5  B1 
03400  2EE6  4C 49 
03400  2EEC  00 
03401  2EED  FF                 .BYTE $FF,$B4,'TALK  ',0
03401  2EEE  B4 
03401  2EEF  54 41 
03401  2EF5  00 
03402  2EF6  FF                 .BYTE $FF,$B7,'READST',0
03402  2EF7  B7 
03402  2EF8  52 45 
03402  2EFE  00 
03403  2EFF  FF                 .BYTE $FF,$BA,'SETLFS',0






DISLIST.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03403  2F00  BA 
03403  2F01  53 45 
03403  2F07  00 
03404  2F08  FF                 .BYTE $FF,$BD,'SETNAM',0
03404  2F09  BD 
03404  2F0A  53 45 
03404  2F10  00 
03405  2F11  FF                 .BYTE $FF,$C0,'OPEN  ',0
03405  2F12  C0 
03405  2F13  4F 50 
03405  2F19  00 
03406  2F1A  FF                 .BYTE $FF,$C3,'CLOSE ',0
03406  2F1B  C3 
03406  2F1C  43 4C 
03406  2F22  00 
03407  2F23  FF                 .BYTE $FF,$C6,'CHKIN ',0
03407  2F24  C6 
03407  2F25  43 48 
03407  2F2B  00 
03408  2F2C  FF                 .BYTE $FF,$C9,'CHKOUT',0
03408  2F2D  C9 
03408  2F2E  43 48 
03408  2F34  00 
03409  2F35  FF                 .BYTE $FF,$CC,'CLRCHN',0
03409  2F36  CC 
03409  2F37  43 4C 
03409  2F3D  00 
03410  2F3E  FF                 .BYTE $FF,$CF,'CHRIN ',0
03410  2F3F  CF 
03410  2F40  43 48 
03410  2F46  00 
03411  2F47  FF                 .BYTE $FF,$D2,'CHROUT',0
03411  2F48  D2 
03411  2F49  43 48 
03411  2F4F  00 
03412  2F50  FF                 .BYTE $FF,$D5,'LOAD  ',0
03412  2F51  D5 
03412  2F52  4C 4F 
03412  2F58  00 
03413  2F59  FF                 .BYTE $FF,$D8,'SAVE  ',0
03413  2F5A  D8 
03413  2F5B  53 41 
03413  2F61  00 
03414  2F62  FF                 .BYTE $FF,$DB,'SETTIM',0
03414  2F63  DB 
03414  2F64  53 45 
03414  2F6A  00 
03415  2F6B  FF                 .BYTE $FF,$DE,'RDTIM ',0
03415  2F6C  DE 
03415  2F6D  52 44 
03415  2F73  00 
03416  2F74  FF                 .BYTE $FF,$E1,'STOP  ',0
03416  2F75  E1 
03416  2F76  53 54 
03416  2F7C  00 






DISLIST.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03417  2F7D  FF                 .BYTE $FF,$E4,'GETIN ',0
03417  2F7E  E4 
03417  2F7F  47 45 
03417  2F85  00 
03418  2F86  FF                 .BYTE $FF,$E7,'CLALL ',0
03418  2F87  E7 
03418  2F88  43 4C 
03418  2F8E  00 
03419  2F8F  FF                 .BYTE $FF,$EA,'UDTIM ',0
03419  2F90  EA 
03419  2F91  55 44 
03419  2F97  00 
03420  2F98  FF                 .BYTE $FF,$ED,'SCREEN',0
03420  2F99  ED 
03420  2F9A  53 43 
03420  2FA0  00 
03421  2FA1  FF                 .BYTE $FF,$F0,'PLOT  ',0
03421  2FA2  F0 
03421  2FA3  50 4C 
03421  2FA9  00 
03422  2FAA  FF                 .BYTE $FF,$F3,'IOBASE',0
03422  2FAB  F3 
03422  2FAC  49 4F 
03422  2FB2  00 
03423  2FB3              ;*********************************
03424  2FB3  FF                 .BYTE $FF,$FA,'NMIVEC',0
03424  2FB4  FA 
03424  2FB5  4E 4D 
03424  2FBB  00 
03425  2FBC  FF                 .BYTE $FF,$FC,'RESVEC',0
03425  2FBD  FC 
03425  2FBE  52 45 
03425  2FC4  00 
03426  2FC5  FF                 .BYTE $FF,$FE,'IRQVEC',0
03426  2FC6  FE 
03426  2FC7  49 52 
03426  2FCD  00 
03427  2FCE              ;*********************************
03428  2FCE  00          UTABLE .BYTE 0
03429  2FCF              ;*********************************
03430  2FCF              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSEXT   1692    ABSLUT   166E    ABSX     1693    ABSY     1699
 AC0      1CC3    AC1      1CC6    ACC      1624    ACHECK   1CB1
 ADRS     084F    AFILE    0E72    AGET     0EA6    AGET1    0EB2
 ALINE    1CF4    ALOP     1D06    AOP      0E3E    AOP1     0F03
 AOP2     0F2D    AOP3     0F52    AOPX     0EFE    ASC      0F6F








SYMBOL TABLE

SYMBOL VALUE
 ASCCCC   1C3F    ASCI1    1C6C    ASCII    1C61    ASCIIQ   1C9A
 ASCKK    1C56    BASIC    080D    BINARY   1303    BOP      0E69
 BUF      085C    BYTBIT   154F    BYTES    1CC9    BYTESX   1CF1
 BYTEXT   158F    BYTT     154C    CASCII   1D3F    CDATA    08E7
 CHKIN    FFC6    CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2
 CLOSE    FFC3    CLRCHN   FFCC    COK      232D    COMENT   1784
 COMET    178A    COMOPT   081D    COMPT    179A    CONST0   14B8
 CONST1   14BD    CPASS    0815    CRLF     1816    CRLFPR   13F2
 CRNO     1327    CRNO1    1334    CRYS     131A    CRYS1    1332
 CSHORT   1798    DATABE   08EF    DATABP   08EB    DATABS   08ED
 DATAO1   1BCD    DATAO2   1C03    DATAOP   1BBE    DATUT    1CAB
 DBYTES   1D4B    DBYTEX   1D78    DECSL    1865    DEVICE   0819
 DISA     0A30    DISASS   0A21    DISB     0A5E    DISC     0AED
 DISERR   125B    DISFUL   0AEA    DISL     1524    DISL1    1532
 DLOOA    1286    DLOOC    127C    DLOOE    1270    DLOOP    0A8F
 DOLLAR   17F3    DONE     0B64    DONED    0B45    DOP      0B6D
 DOP2     0E39    DOP3     0E3B    DSLINE   1514    EA       0820
 EAGOL    0828    EAOUT    082C    EAS      08E4    EASCI1   1D23
 EASCII   1D28    EFILE    1774    ENDAX    1BCA    ENDDAT   1CAE
 EPASS    0814    EQUATE   2630    EQUEND   23B3    EQUINT   223E
 EQUOP    2374    EQUOP1   238E    EQUPRT   2349    ERRCT    085A
 FILE     0D8D    FILEOK   0D87    FINAL    1549    FINISH   13DF
 FIXSYM   2302    FOP1     0FAB    FOP2     0FAD    FOROPT   081C
 FORWRD   170C    GETBYT   12E6    GETC     233A    GETI     1A18
 GETIN    FFE4    GETOPE   1E87    GETSL    184F    GETWRD   12C2
 GFILE0   0D7B    HEADER   1411    HEADES   1464    HEADFX   148C
 HEADOK   147E    HEADSY   147F    HEXA     14A8    ILLEGL   1602
 ILLMSG   1893    IMEXIT   165E    IMMEDT   1629    IMPLI1   16AD
 IMPLID   169F    IMPONE   16AC    INCC     2331    INCI     1A0F
 INCIE    1A07    INCSL    1846    INDRCT   16B9    INDX     16CE
 INDY     16D7    INEND    12E5    INENX    1302    INIT     1053
 INITD    0CAB    INITIN   1977    INSTN1   12B5    INSTNG   12B3
 INTCH    1A36    INTCHA   1A27    INTCHK   1A33    INTEND   1A6F
 INTEXT   1A05    INTMAT   1A71    INTOUT   1B5E    INTPR    1B69
 INTPRM   1B90    INTPRS   1B8B    INTPRT   1B48    INTSA    1871
 INTSET   1989    IPASS    0813    LARGE    1AD9    LINECK   121C
 LINECO   125A    LINECT   0858    LINEFL   08C0    LINEOK   1453
 LINES    250F    LISTCT   0857    LOADC    25FE    LOADE    2615
 LOADF    25C2    LOADM    25E0    LOOP1    1B64    LOOP2    1BB8
 LPAREN   17F8    LTITLE   14DD    LTITLS   1507    MATCH    229B
 MATCHS   22BB    MATCHT   22E2    MATEXT   22EC    MATONE   22BA
 MBYTE    1E37    MCODES   1FC9    MDBYTE   1E47    MEMSIZ   0037
 MNAMES   1EF1    MNEMON   1E50    MNLOOP   1E5A    MODES    20C9
 MPASS    09F2    MSA1     1120    MSA2     1142    MSA3     115A
 MSAOP    1101    MSB4     11DC    MSB5     11FC    MSD1     106E
 MSD2     1080    MSD4     1090    MSD4A    10AA    MSD5     10BD
 MSF1     0FFE    MSF2     101A    MSG      0FB1    MSG1     102E
 MSG2     1055    MSG5     1170    MSGBIT   187E    MSGDIS   0A0E
 MSGEND   188E    MSGERR   0A04    MSR1     10D9    MSS1     2536
 MSS2     255A    MSS3     2580    MSS4     259E    MWORD    1E3F
 NAME     2528    NAMS     2532    NASCII   1D30    NBUF     08C4
 NCHARS   08C3    NCOK     232F    NDATA    08E9    NEGREL   188A
 NEWEXT   12B2    NEWLIN   1295    NEXLIN   1404    NEXPTR   1401
 NEXPTS   1454    NEXTBY   1E1E    NEXTC    230D    NEXTP    0AC0
 NEXTSL   182D    NOASC    1D49    NOBINC   1E35    NOFILE   0D8B








SYMBOL TABLE

SYMBOL VALUE
 NOHEX    1316    NOID     0D9E    NOINC    1844    NOPRT    0E1E
 NOTABS   0EE9    NPRAD    17D0    NPRAD1   17D1    OFFSET   0824
 OFILE    0DA1    OFILE1   0DB4    OFILE2   0DB9    OFILE3   0DDC
 OFILE4   0DEB    OFILED   0D96    ONEBX    15C0    ONEBY    15BD
 ONEBYT   1592    OPCPUT   15FB    OPCSYM   15FE    OPEN     FFC0
 OPERN1   1E7A    OPERND   1E82    ORGIN    175E    OUFILE   0D60
 OUTPUT   081A    P1       17C7    PAGECT   0855    PAGER1   144D
 PASS     0812    PAUS1    1C93    PAUSE    0AB9    PCHAR    13A8
 PEXIT    13DD    PFILE0   0B8D    PFILE1   0B8F    PMSG     09F8
 POSREL   1886    POVER    17C4    PRAD     17AD    PRBYT    133C
 PRBYTS   1336    PREND    1BB5    PRFILE   0C85    PRIN     13BD
 PRINT    0E20    PRLA     17A3    PRO2RD   0C61    PROGED   0BD5
 PROGM    104F    PROGOK   0CAA    PROGRD   0BC0    PRTASS   1E6D
 PRTDAF   1936    PRTDAL   0ECD    PRTDAS   0EBA    PRTDAT   191A
 PRTEST   1913    PRTGET   0DEC    PRTNEX   0EC5    PRTNU1   1377
 PRTNU2   137E    PRTNU3   137F    PRTNUM   136E    PRTOK    1BA8
 PRTON1   18B5    PRTONE   18A7    PRTOT1   1949    PRTOTH   193E
 PRTPAG   1363    PRTTH1   1908    PRTTHE   18E2    PRTTW1   18D7
 PRTTWO   18BD    PSELEC   17D9    PUIT     19E2    PUT      24F3
 PUTC     24E7    PUTI     19C8    PWORK    17E2    PWORKD   17E5
 QUITS    0AF3    QUITX    2438    QUITXX   2458    QUTERR   0B0A
 RANG     1963    RANGE    1951    READS    2469    READST   FFB7
 READX    2425    READXF   23FF    READXX   23B9    READY    247A
 RELATV   16E3    RELND    1715    RELNEG   1740    RELP     1752
 RELPC    1733    RELPM    1744    RELPUT   172F    RELSYM   1732
 REOPEN   2408    RESET    251E    RESINT   19AF    ROPT     0818
 ROUT     1975    RPAREN   17FD    S3       1AC1    SA       081E
 SAGOL    0826    SAOUT    082A    SAVA     0852    SAVEE    084D
 SAVEP    0849    SAVES    084B    SAVINT   1996    SAVX     0853
 SAVY     0854    SBLOK    1E30    SCREN    13D1    SCRNO1   149E
 SCROFF   148F    SCRON    149F    SELECT   0822    SEMIC    17EE
 SETLFS   FFBA    SETNAM   FFBD    SEXIT    1362    SKIPER   1C47
 SLOK     183F    SMALL    1ADC    SMALLP   0836    SMALLS   0834
 SOP      21C9    SOP1     21DD    SOP2     23C0    SOP3     23CD
 SOP4     2214    SORT     1A73    SORT1    1A88    SORT2    1A97
 SORT3    1B19    SORT4    1B45    SORTOK   1B42    SOUT     1358
 SPAC     1820    SPAC6    181B    SPACE    1828    SPACM    181D
 SPASS    0816    SSET     2231    STABLE   2E4B    STARTS   0CC5
 STDREF   24C9    STOP     FFE1    STRPNT   1352    STRSY1   22F3
 STRSYM   22ED    SUBP     1E9D    SUBS     1ED5    SUBS1    1EB9
 SY       2226    SYEXIT   2301    SYM      2251    SYM1     226A
 SYM2     226D    SYMBOE   083D    SYMBOL   0838    SYMBOP   0839
 SYMBOS   083B    SYMBUF   08DA    SYMEND   2299    SYMOP    2265
 SYTAB    21F2    T2       1AC4    TABINE   0832    TABINP   082E
 TABINS   0830    TDATA    08F1    TEMP     0851    TEXTER   08E6
 TWOB     1601    TWOBX    15F8    TWOBY    15F5    TWOBYT   15C6
 UTABLE   2FCE    UYMBOE   0843    UYMBOP   083F    UYMBOS   0841
 VERSON   08C2    VICREG   D011    WIND1    0D43    WIND2    0D45
 WINDOP   0D07    WINDOW   081B    WORD1    1D90    WORDM    1DD6
 WORDPT   1DCA    WORDS    1D7B    WORDS2   1E06    WORDS3   1E18
 WORDSX   1DC7    WORDSY   1DD0    WORDXX   1E1B    WORKED   0845
 WORKER   0847    WREADY   E391    WRITE    104B    XFILE1   23E8
 XGET     24A9    XINDEX   1802    XOP0     0F86    XOP1     0F96
 XOP2     0F98    XOPT     0817    XTITLE   14C2    XTITLS   14FA
 YINDEX   180C    YSHEX    1318    ZEROPG   165F    ZEROUR   0002








SYMBOL TABLE

SYMBOL VALUE
 ZEROX    1662    ZEROY    1668   

END OF ASSEMBLY
